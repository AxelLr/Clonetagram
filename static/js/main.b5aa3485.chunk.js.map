{"version":3,"sources":["util/images/noprofileimg2.png","util/images/landing-image.jpg","util/images/image-preview.png","util/images/googleLogo.webp","hoc/ProtectedRoutes.js","hoc/RestrictedRoutes.js","redux/actions/SocketManager.js","redux/reducers/types.js","redux/actions/AuthenticationActions.js","util/ValidationSchema.js","components/LoadingAuthentication.js","pages/register/Register.js","redux/actions/PostsActions.js","components/post/components/DeletePost.js","components/post/components/HandleLikes.js","components/post/Post.js","pages/home/components/posts/components/subscription-posts/SubscriptionsPosts.js","pages/home/components/posts/Posts.js","components/Avatar.js","pages/home/components/user-section/components/UserData.js","pages/home/components/user-section/UserSection.js","components/addpost/AddPost.js","pages/home/Home.js","pages/login/components/ResetPasswordDialog.js","pages/login/Login.js","pages/fullpost/components/commentlist/components/comment/components/AddComment.js","redux/actions/CommentsActions.js","pages/fullpost/components/commentlist/components/comment/components/Replies/components/DeleteReply.js","pages/fullpost/components/commentlist/components/comment/components/Replies/components/Reply.js","pages/fullpost/components/commentlist/components/comment/components/Replies/components/AddRepply.js","pages/fullpost/components/commentlist/components/comment/components/Replies/Replies.js","pages/fullpost/components/commentlist/components/comment/components/DeleteComment.js","pages/fullpost/components/commentlist/components/comment/Comment.js","pages/fullpost/components/commentlist/CommentsList.js","pages/fullpost/FullPost.js","pages/profile/components/profile-posts/ProfilePosts.js","pages/profile/components/ProfileImg.js","pages/profile/components/HandleFollow.js","redux/actions/UserActions.js","pages/profile/components/SubsFollowersList.js","pages/profile/components/edit-account-details/components/EditDescription.js","pages/profile/components/edit-account-details/components/EditImage.js","pages/profile/components/edit-account-details/components/HandlePrivacy.js","pages/profile/components/edit-account-details/EditAccountDetails.js","pages/profile/components/PrivateAccountSign.js","pages/profile/Profile.js","pages/notfound/NotFound.js","pages/Redirecting/Redirecting.js","pages/reset-password/ResetPassword.js","pages/explore/components/pagination/Pagination.js","pages/explore/Explore.js","components/navbar/components/UserList.js","components/navbar/components/SearchByUsername.js","customHooks/useDidUpdateEffect.js","components/navbar/components/navbar-buttons/components/notifications/components/Notification.js","components/navbar/components/navbar-buttons/components/notifications/components/FollowUpRequest.js","components/navbar/components/navbar-buttons/components/notifications/components/RequestsHandler.js","components/navbar/components/navbar-buttons/components/notifications/Notifications.js","redux/actions/NotificationActions.js","components/navbar/components/navbar-buttons/NavbarButtons.js","components/navbar/components/OpenMenuButton.js","components/navbar/components/DrawerNavigator.js","components/navbar/Navbar.js","App.js","util/jwtDecode.js","serviceWorker.js","redux/reducers/AuthenticationReducer.js","redux/reducers/PostsReducer.js","redux/reducers/UIReducer.js","redux/reducers/CommentsReducer.js","redux/reducers/ProfileReducer.js","redux/reducers/NotificationsReducer.js","redux/store/Store.js","util/MuiTheme.js","index.js"],"names":["module","exports","ProtectedRoute","Component","component","path","rest","authenticated","useSelector","state","user","render","props","to","RestrictedRoute","sendUserId","user_id","dispatch","a","async","socket","io","type","payload","emit","setToken","token","localStorage","setItem","axios","defaults","headers","common","getItem","getConnectedUser","history","get","response","data","_id","msg","removeItem","push","logOutUser","checkEmail","email","setSubmitting","setOpenDialog","post","hasPassword","console","log","error","Yup","required","registerPassword","min","max","matches","password","confirmPassword","oneOf","registerSchema","username","loginSchema","emailCheckSchema","resetPassword","LoadingAuthentication","style","position","height","width","opacity","backgroundColor","display","alignItems","justifyContent","CircularProgress","size","color","useStyles","makeStyles","theme","textField","marginBottom","fontSize","Register","classes","useDispatch","enableReinitialize","initialValues","validationSchema","onSubmit","values","newValues","errors","registerUser","handleSubmit","isSubmitting","touched","handleChange","handleBlur","className","Card","elevation","Typography","margin","variant","TextField","id","name","value","onChange","onBlur","helperText","label","Button","disabled","onClick","marginTop","textDecoration","src","landingImage","alt","getSubscriptionsPosts","page","setPage","setFetching","count","length","current","DeletePost","post_id","useState","open","setOpen","loading","setLoading","title","placement","IconButton","Dialog","onClose","fullWidth","maxWidth","DialogTitle","DialogActions","postid","delete","deletePost","marginLeft","HandleLikes","connectedUser","loggedUser","likes","liked","filter","like","aria-label","media","paddingTop","expand","transform","transition","transitions","create","duration","shortest","expandOpen","avatar","red","Post","onSinglePost","UI","imageURL","description","date","userRef","commentCount","CardHeader","Avatar","profileImg","action","subheader","moment","format","objectFit","CardActions","padding","disableSpacing","CardContent","SubscriptionsPosts","useRef","allPosts","trigger","setTrigger","fetchingSubscriptionPosts","setFetchingSubscriptionPosts","bottomListener","div","document","getElementById","window","scrollY","innerHeight","clientHeight","offsetTop","useEffect","addEventListener","removeEventListener","map","key","Posts","pointer","borderRadius","cursor","UserData","useHistory","noProfileImg","Skeleton","animation","UserSection","AddPost","file","setFile","image","setImage","content","setContent","setErrors","handleClose","DialogContent","flexDirection","hidden","placeholder","e","preventDefault","target","files","URL","createObjectURL","imagePreview","click","tpye","multiline","rows","inputProps","maxLength","fontFamily","split","pop","formData","FormData","append","newPost","Home","ResetPasswordDialog","provider","success","handleReset","setHandleReset","textAlign","Login","openDialog","tryCount","setTryCount","userHasPassword","serverErrors","loginUser","href","startIcon","GoogleIcon","root","input","background","AddComment","handleComment","addComment","selectedPost","noValidate","autoComplete","onKeyPress","DeleteReply","reply","comment","comment_id","reply_id","removeReply","Reply","createdAt","ListItem","ListItemAvatar","ListItemText","primary","secondary","ListItemSecondaryAction","Divider","AddRepply","addReply","Replies","replies","ExpansionPanelDetails","maxHeight","overflow","DeleteComment","deleteComment","palette","paper","ExpansionPanelSummary","border","boxShadow","ExpansionPanel","outline","inline","Comment","right","top","CommentsList","comments","List","FullPost","match","params","status","getPost","ProfilePosts","userPosts","selectedPosts","ProfileImg","changingProfileImage","HandleFollow","userProfile","isFollowed","setIsFollowed","subscription","subscriptions","find","subscript","followUpRequests","req","follower_id","cancelRequest","unfollowUser","privateUser","usersData","followUser","private","nested","paddingLeft","spacing","SubsFollowersList","userList","showingFollowers","children","aria-labelledby","ListSubheader","button","EditDescription","details","setDetails","trim","addUserDetails","EditImage","newImage","put","HandlePrivacy","FormControl","FormLabel","FormGroup","FormControlLabel","control","Switch","checked","patch","setPrivacy","withRouter","openDescription","setOpenDescription","openImage","setOpenImage","event","currentTarget","Menu","disableScrollLock","MenuListProps","disablePadding","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","anchorEl","keepMounted","Boolean","MenuItem","PrivateAccountSign","Profile","setShowingFollowers","loadingProfile","setLoadingProfile","profile","followers","isLoggedUser","hasPermissions","foll","EditAccountDetails","NotFound","ResetPassword","updated","setTimeout","getUserByToken","updatePassword","nBlur","Pagination","numberOfPosts","numberOfPages","setNumberOfPages","currentPage","setCurrentPage","pagination","i","Math","ceil","handlePagination","postsNumber","getPostsFromPage","classList","add","Explore","getAllPosts","UserList","searchResults","Collapse","in","timeout","unmountOnExit","Paper","search","shape","fade","white","breakpoints","up","searchIcon","pointerEvents","inputRoot","inputInput","SearchByUsername","setFilter","usersList","setUsersList","setSearchResults","typingTimeout","setTypingTimeOut","results","toLocaleLowerCase","includes","fn","inputs","didMountRef","useDidUpdateEffect","clearTimeout","getAllUsers","InputBase","defaultValue","onFocus","Notification","notification","readed","sender","senderName","postRef","senderAvatar","icon","route","minWidth","startOf","fromNow","FollowUpRequest","request","acceptRequest","endIcon","ignoreRequest","RequestsHandler","setShowRequests","requests","Badge","badgeContent","Notifications","notifications","setAnchorEl","showRequests","aria-owns","undefined","aria-haspopup","not","onEntered","unreadedNotifications","notif","markNotificationsAsReaded","NavbarButtons","onHome","OpenMenuButton","edge","DrawerNavigator","openMenu","Drawer","ListItemIcon","Navbar","AppBar","Toolbar","baseURL","userSocket","decoded","invalidToken","JwtDecode","err","decodeToken","exp","Date","now","on","exact","Redirecting","location","hostname","initialState","reducers","combineReducers","followed","profileImage","follower","sub","newRequest","posts","Store","createStore","applyMiddleware","thunk","createMuiTheme","light","main","dark","contrastText","ReactDOM","ThemeProvider","store","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.b5aa3485.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/noprofileimg2.a77a9fc1.png\";","module.exports = __webpack_public_path__ + \"static/media/landing-image.5c621457.jpg\";","module.exports = __webpack_public_path__ + \"static/media/image-preview.df803060.png\";","module.exports = __webpack_public_path__ + \"static/media/googleLogo.cc4a562f.webp\";","import React from 'react'\r\nimport { Route, Redirect } from 'react-router-dom'\r\n// REDUX\r\nimport { useSelector } from 'react-redux'\r\n\r\nexport default function ProtectedRoute ({ component: Component, path, ...rest }) {\r\n\r\nconst authenticated = useSelector(state => state.user.authenticated)\r\n\r\nreturn (\r\n  <Route \r\n    path={path}\r\n    {...rest}\r\n    render={(props) => { return authenticated ? <Component {...props} /> : <Redirect to='/' />}}\r\n  />\r\n)}\r\n","import React from 'react'\r\nimport { Route, Redirect } from 'react-router-dom'\r\nimport { useSelector } from 'react-redux'\r\n\r\nexport default function RestrictedRoute ({ component: Component, path, ...rest }) {\r\n\r\nconst authenticated = useSelector(state => state.user.authenticated)\r\n\r\nreturn (\r\n  <Route\r\n    path={path}\r\n    {...rest}\r\n    render={(props) => { return !authenticated ? <Component {...props} /> : <Redirect to='/Home' /> }}\r\n  />\r\n)}\r\n\r\n","import io from 'socket.io-client'\r\n// ACTIONS\r\nimport { SET_USER_SOCKET } from '../reducers/types'\r\nconst ENDPOINT = 'https://clonetagram.herokuapp.com/'\r\n\r\nexport function sendUserId(user_id) {\r\n    return async function(dispatch) {\r\n       const socket = io(ENDPOINT)\r\n        dispatch({type: SET_USER_SOCKET, payload: socket })\r\n        socket.emit('SET_USER_ID', user_id)\r\n    }\r\n}\r\n\r\n\r\n","// AUTHENTICATION TYPES\r\nexport const AUTHENTICATED = 'AUTHENTICATED'\r\nexport const UNAUTHENTICATED = 'UNAUTHENTICATED'\r\nexport const SET_ERRORS = 'SET_ERRORS'\r\nexport const LOADING = 'LOADING'\r\nexport const LOADED = 'LOADED'\r\nexport const CLEAR_ERRORS = 'CLEAR_ERRORS'\r\nexport const USER_LOGGED = 'USER_LOGGED'\r\n// USER TYPES\r\nexport const CHANGE_PRIVACY = 'CHANGE_PRIVACY'\r\nexport const SET_PASSWORD_AS_TRUE = 'SET_PASSWORD_AS_TRUE'\r\nexport const SET_PASSWORD_AS_FALSE = 'SET_PASSWORD_AS_FALSE'\r\nexport const SET_UPDATED_USERS = 'SET_UPDATED_USERS'\r\nexport const SET_NEW_IMAGE = 'SET_NEW_IMAGE'\r\nexport const CANCEL_REQUEST = 'CANCEL_REQUEST'\r\nexport const FOLLOW_USER = 'FOLLOW_USER'\r\nexport const UNFOLLOW_USER = 'UNFOLLOW_USER'\r\nexport const ADD_TO_REQUESTS = 'ADD_TO_REQUESTS'\r\nexport const DELETE_REQUEST = 'DELETE_REQUEST'\r\nexport const ADD_REQUEST = 'ADD_REQUEST'\r\n// DATA TYPES\r\nexport const GET_ALL_POSTS = 'GET_ALL_POSTS'\r\nexport const SET_SELECTED_PROFILE = 'SET_SELECTED_PROFILE'\r\nexport const SET_SELECTED_POSTS = 'SET_SELECTED_POSTS'\r\nexport const SET_NEW_POST = 'SET_NEW_POST'\r\nexport const DELETE_POST = 'DELETE_POST'\r\nexport const SET_POST = 'SET_POST'\r\nexport const SET_LIKES = 'SET_LIKES'\r\nexport const SET_DISLIKE = 'SET_DISLIKE'\r\nexport const SET_SUBSCRIPTIONS_POSTS = 'SET_SUBSCRIPTIONS_POSTS'\r\nexport const CLEAR_POSTS = 'CLEAR_POSTS'\r\nexport const SET_NEW_SUBSCRIPTIONS_POSTS = 'SET_NEW_SUBSCRIPTIONS_POSTS'\r\n// COMMENT TYPES\r\nexport const SET_NEW_COMMENT = 'SET_NEW_COMMENT'\r\nexport const SET_POST_COMMENTS = 'SET_POST_COMMENTS'\r\nexport const SET_REPLIES = 'SET_REPLIES'\r\nexport const DELETE_REPLY = 'DELETE_REPLY'\r\nexport const DELETE_COMMENT = 'DELETE_COMMENT'\r\n// UI TYPES\r\nexport const ON_HOME = 'ON_HOME'\r\nexport const ON_EXPLORE = 'ON_EXPLORE'\r\nexport const FOCUS_OFF = 'FOCUS_OFF'\r\nexport const ON_SINGLE_POST = 'ON_SINGLE_POST'\r\nexport const CLOSE_SINGLE_POST = 'CLOSE_SINGLE_POST'\r\nexport const CHANGING_PROFILE_IMAGE = 'CHANGING_PROFILE_IMAGE'\r\nexport const PROFILE_IMAGE_CHANGED = 'PROFILE_IMAGE_CHANGED'\r\nexport const OPEN_MENU = 'OPEN_MENU'\r\nexport const CLOSE_MENU = 'CLOSE_MENU'\r\n// NOTIFICATION TYPES\r\nexport const SET_NOTIFICATIONS = 'SET_NOTIFICATIONS'\r\nexport const SET_NEW_NOTIFICATION = 'SET_NEW_NOTIFICATION'\r\nexport const MARK_NOTIFICATIONS_AS_READED = 'MARK_NOTIFICATIONS_AS_READED'\r\n// SOCKET TYPES\r\nexport const SET_USER_SOCKET = 'SET_USER_SOCKET'\r\n\r\n\r\n\r\n\r\n\r\n","import { \r\n    AUTHENTICATED,\r\n    UNAUTHENTICATED,\r\n    SET_ERRORS, \r\n    LOADING, \r\n    LOADED,\r\n    CLEAR_ERRORS, \r\n    USER_LOGGED, \r\n    SET_NEW_IMAGE,\r\n    SET_PASSWORD_AS_TRUE, \r\n    SET_PASSWORD_AS_FALSE, \r\n    PROFILE_IMAGE_CHANGED,\r\n    CHANGING_PROFILE_IMAGE\r\n} from '../reducers/types'\r\n\r\nimport axios from 'axios'\r\nimport { sendUserId } from './SocketManager'\r\n\r\nexport const setToken = (token) => {\r\n    localStorage.setItem('x-auth-token', token)\r\n    axios.defaults.headers.common['Authorization'] = localStorage.getItem('x-auth-token')\r\n}\r\n\r\nexport function getConnectedUser(history) {\r\n        return async function(dispatch) {\r\n            try {\r\n                dispatch({type: LOADING})\r\n                const response = await axios.get('/users/me')\r\n                dispatch({type: USER_LOGGED, payload: response.data})\r\n                dispatch({type: LOADED})\r\n                dispatch({type: AUTHENTICATED})\r\n                dispatch(sendUserId(response.data._id))\r\n            } catch (err) {\r\n               if(err.response.data.msg === 'invalid token') {\r\n                   dispatch({ type: UNAUTHENTICATED})\r\n                   localStorage.removeItem('x-auth-token')\r\n                   history.push('/')\r\n               }\r\n            }\r\n        }\r\n}\r\n\r\nexport function registerUser(values, setSubmitting) {\r\n        return async function(dispatch) {\r\n            try {\r\n                const response = await axios.post('/user/register', values)\r\n                dispatch({type: CLEAR_ERRORS})\r\n                setToken(response.data.token)\r\n                await dispatch(getConnectedUser())\r\n                setSubmitting(false)       \r\n            } catch (err) {\r\n                dispatch({ type: SET_ERRORS, payload: err.response.data.errors })   \r\n                setSubmitting(false)\r\n            }  \r\n        }\r\n}\r\n\r\nexport function loginUser (values, setSubmitting, setOpenDialog, setTryCount) {\r\n    return async function(dispatch) {\r\n        try {\r\n            const response = await axios.post('/user/login', values)  \r\n            setToken(response.data.token)\r\n            dispatch({type: CLEAR_ERRORS})   \r\n            await dispatch(getConnectedUser())\r\n         \r\n         \r\n        } catch (err) {  \r\n            setSubmitting(false)\r\n            dispatch({type: SET_ERRORS, payload: err.response.data.error })\r\n            err.response.data.error === 'Credenciales incorrectas. Por favor, intenta de nuevo.' && setTryCount(state => state + 1)\r\n            if(err.response.data.hasPassword === false) {\r\n                setOpenDialog(true)\r\n                dispatch({type: SET_PASSWORD_AS_FALSE })\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function logOutUser () {\r\n    return async function(dispatch) {\r\n        localStorage.removeItem('x-auth-token')\r\n        delete axios.defaults.headers.common['Authorization']\r\n        dispatch ({ type: UNAUTHENTICATED })\r\n    }\r\n}\r\n\r\nexport function editProfileImage (newImage) {\r\n    return async function(dispatch) {\r\n        try {\r\n            dispatch({type: CHANGING_PROFILE_IMAGE})\r\n            const response = await axios.put('/users/image', newImage, {\r\n                headers: {\r\n                'content-type': 'multipart/form-data'\r\n                }\r\n            })\r\n            dispatch({type: SET_NEW_IMAGE, payload: response.data })\r\n            dispatch({ type: PROFILE_IMAGE_CHANGED })\r\n            \r\n        } catch (err) {\r\n            dispatch({type: PROFILE_IMAGE_CHANGED})\r\n            console.log(err)\r\n        }\r\n    }\r\n}\r\n\r\nexport function checkEmail(email, setSubmitting, setOpenDialog) {\r\n    return async function(dispatch) {\r\n        try {\r\n            const response = await axios.post('/user/checkEmail', email)\r\n            setSubmitting(false)\r\n            dispatch({type: CLEAR_ERRORS})\r\n\r\n            if(response.data.hasPassword) { dispatch({type: SET_PASSWORD_AS_TRUE }) } else {\r\n                dispatch({type: SET_PASSWORD_AS_FALSE})\r\n                setOpenDialog(true)\r\n            }   \r\n\r\n        } catch (error) {\r\n            setSubmitting(false)\r\n            console.log(error)\r\n            dispatch({type: SET_ERRORS, payload: error.response.data.error })\r\n        }\r\n    }\r\n}\r\n\r\nexport function resetPassword(email, setHandleReset, setOpen) {\r\n    return async function() {\r\n        try {\r\n           setHandleReset(state => { return { ...state, loading: true } }) \r\n           await axios.post('/user/forgotPassword', { email }) \r\n           setHandleReset({ loading: false, success: true }) \r\n           setOpen(false)\r\n\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n}\r\n\r\nexport function getUserByToken(token, setHandleReset, history) {\r\n    return async function() {\r\n        try {\r\n            const response = await axios.get(`/user/reset/${token}`)\r\n            setHandleReset({ user: response.data.email, success: true })\r\n\r\n        } catch (error) {\r\n            if(error.response.status === 401) {\r\n                setHandleReset({user: null, success: false })\r\n                setTimeout(() => history.push('/'), 1500)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function updatePassword(password, handleReset,setHandleReset, setSubmitting, history) {\r\n    return async function() {\r\n        try {\r\n            await axios.patch('/user/reset/password', { password, email: handleReset.user })\r\n            \r\n            setHandleReset({...handleReset, updated: true })\r\n            \r\n            setTimeout(() => { \r\n\r\n                setSubmitting(false)\r\n                history.push('/')\r\n                \r\n            }, 1500)\r\n\r\n        } catch (error) {\r\n            console.log(error)\r\n            setSubmitting(false)\r\n        }\r\n    }\r\n}","import * as Yup from 'yup'\r\n\r\nconst email = Yup.string().email('Correo Electrónico inválido').required('Coloca tu Correo electrónico')\r\n\r\nconst registerPassword = Yup.string()\r\n.required('Contraseña Requerida')\r\n.min(6, 'Contraseña demasiado corta.')\r\n.max(18, 'Contraseña demasiado larga')\r\n.matches(/^\\S*$/,('La contraseña no puede contener espacios'))\r\n.matches(/[a-z]/, 'Debe contener al menos una letra minúscula')\r\n.matches(/[A-Z]/, 'Debe contener al menos una letra mayúscula')\r\n\r\nconst password = Yup.string().required('Contraseña Requerida')\r\n\r\nconst confirmPassword = Yup.string().oneOf([Yup.ref('registerPassword'), null], 'Las contraseñas deben coincidir').required('Las contraseñas deben coincidir')\r\n\r\nexport const registerSchema = Yup.object({\r\n    email,\r\n    registerPassword,\r\n    confirmPassword,\r\n    username: Yup.string().required('Coloca tu nombre').min(3, 'El nombre es demasiado corto').max(20, 'El nombre es demasiado largo')\r\n})\r\n\r\nexport const loginSchema = Yup.object({\r\n    email,\r\n    password\r\n})\r\n\r\nexport const emailCheckSchema = Yup.object({\r\n    email\r\n})\r\n\r\nexport const resetPassword = Yup.object({\r\n    registerPassword,\r\n    confirmPassword\r\n})\r\n","import React from 'react'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\n\r\nexport default function LoadingAuthentication() {\r\n    return (\r\n        <div style={{\r\n            position: 'absolute',\r\n            height: '100vh',\r\n            width: '100%',\r\n            opacity: .75,\r\n            backgroundColor: '#e5e5e5',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center'\r\n           \r\n        }}>\r\n            <CircularProgress size={60} color='primary' />\r\n        </div>\r\n    )\r\n}\r\n\r\n","import React from 'react'\r\n// FORMIK\r\nimport { Formik, Form } from 'formik'\r\n// ROUTER \r\nimport { Link } from 'react-router-dom'\r\n// REDUX\r\nimport { registerUser } from '../../redux/actions/AuthenticationActions'\r\nimport { useDispatch } from 'react-redux'\r\n// MUI\r\nimport Button from '@material-ui/core/Button'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Card from '@material-ui/core/Card'\r\n// YUP\r\nimport { registerSchema } from '../../util/ValidationSchema'\r\n// IMAGE\r\nimport landingImage from '../../util/images/landing-image.jpg'\r\n// COMPONENTS \r\nimport LoadingAuthentication from '../../components/LoadingAuthentication'\r\n// STYLES\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  textField: {\r\n    marginBottom: 55,\r\n    height: 40,\r\n    fontSize: 2\r\n}\r\n}))\r\n\r\nexport default function Register() {\r\n\r\n  const classes = useStyles()\r\n  const dispatch = useDispatch()\r\n\r\n  return (\r\n      <Formik\r\n              enableReinitialize\r\n              initialValues={{ email: '', registerPassword: '', confirmPassword: '', username: '' }}\r\n              validationSchema={registerSchema}\r\n              onSubmit={(values, { setSubmitting }) => {\r\n\r\n                const newValues = {\r\n                  email: values.email,\r\n                  password: values.registerPassword,\r\n                  username: values.username\r\n                }\r\n\r\n                dispatch(registerUser(newValues, setSubmitting))\r\n              }}\r\n            >\r\n              {({ handleSubmit, isSubmitting, errors, values, touched, handleChange, handleBlur }) => (\r\n              <div className='form-container'>\r\n                <Card className='form-card' elevation={8}>\r\n\r\n                    <Form className='form'>\r\n\r\n                      <Typography style={{margin: '5px 0px 25px 0px'}} variant='h4'> Regístrate! </Typography>\r\n\r\n                      <TextField\r\n                          className={classes.textField}\r\n                          variant='outlined'\r\n                          error={errors.email && touched.email}\r\n                          id='email'\r\n                          name='email'\r\n                          type='email'\r\n                          value={values.email}\r\n                          onChange={handleChange}\r\n                          onBlur={handleBlur}\r\n                          required\r\n                          helperText={(errors.email || touched.email) && errors.email}\r\n                          label='Correo Electrónico'\r\n                      />\r\n                      <TextField\r\n                        className={classes.textField}\r\n                          variant='outlined'\r\n                          error={errors.registerPassword && touched.registerPassword}\r\n                          id='registerPassword'\r\n                          name='registerPassword'\r\n                          type='password'\r\n                          value={values.registerPassword}\r\n                          onChange={handleChange}\r\n                          onBlur={handleBlur}\r\n                          required\r\n                          helperText={(errors.registerPassword && touched.registerPassword) && errors.registerPassword}\r\n                          label='Contraseña'\r\n                      />\r\n                      <TextField\r\n                        className={classes.textField}\r\n                          variant='outlined'\r\n                          error={errors.confirmPassword && touched.confirmPassword}\r\n                          id='confirmPassword'\r\n                          name='confirmPassword'\r\n                          type='password'\r\n                          value={values.confirmPassword}\r\n                          onChange={handleChange}\r\n                          onBlur={handleBlur}\r\n                          required\r\n                          helperText={(errors.confirmPassword && touched.confirmPassword) && errors.confirmPassword}\r\n                          label='Confirmar Contraseña'\r\n                      />                 \r\n                      <TextField\r\n                        className={classes.textField}\r\n                          variant='outlined'\r\n                          error={errors.username && touched.username}\r\n                          id='username'\r\n                          name='username'\r\n                          type='username'\r\n                          value={values.username}\r\n                          onChange={handleChange}\r\n                          onBlur={handleBlur}\r\n                          required\r\n                          helperText={(errors.username && touched.username) ? errors.username : 'Todos veran tu nombre*'}\r\n                          label='Nombre completo'\r\n                      />\r\n                      <Button\r\n                          disabled={isSubmitting}\r\n                          type=\"submit\"\r\n                          onClick={handleSubmit}\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          style={{marginTop: 5}}\r\n                      >\r\n                      Registrarse\r\n                      </Button>\r\n\r\n                      <p className='auth-p' > Ya tienes una cuenta?\r\n                        <Link \r\n                          style={{textDecoration: 'none', color: '#046B86'}} \r\n                          to=\"/\"> Iniciar sesión\r\n                        </Link>\r\n                      </p>\r\n                    </Form>\r\n                    <img src={landingImage} alt='landing' className='auth-image' />\r\n                </Card>\r\n              { isSubmitting && <LoadingAuthentication /> }\r\n              </div>  \r\n              )}\r\n      </Formik>\r\n  )    \r\n} \r\n","import { GET_ALL_POSTS, SET_SELECTED_POSTS, SET_NEW_POST, DELETE_POST, SET_SUBSCRIPTIONS_POSTS,\r\n       SET_POST, SET_LIKES, SET_DISLIKE, \r\n     SET_NEW_SUBSCRIPTIONS_POSTS } from '../reducers/types'\r\nimport axios from 'axios'\r\n\r\nexport function getAllPosts(setLoading) {\r\n    return async function(dispatch) {\r\n        try {\r\n            setLoading(true)\r\n            const response = await axios.get('/posts')\r\n            setLoading(false)\r\n            dispatch( {type: GET_ALL_POSTS, payload: response.data} )\r\n            \r\n        } catch (err) {\r\n            console.log(err)            \r\n        }\r\n    }\r\n}\r\n\r\nexport function getPostsFromPage (page, postsNumber) {\r\n    return async function(dispatch) {\r\n        try {\r\n            const response = await axios.get(`/posts/?page=${page}&?postsNumber=${postsNumber}`)\r\n            dispatch( {type: GET_ALL_POSTS, payload: response.data} )\r\n        } catch (err) {\r\n            console.log(err)            \r\n        }\r\n    }\r\n}\r\n\r\nexport function getSubscriptionsPosts(page, setPage, setFetching, count) {\r\n    return async function(dispatch) {\r\n        try {\r\n                setFetching(true)\r\n                const response = await axios.get(`/posts/user/subscriptions/?page=${page}`) \r\n\r\n                if(response.data.length > 0) {       \r\n                    page === 1 ? dispatch({type: SET_SUBSCRIPTIONS_POSTS, payload: response.data}) : dispatch({type: SET_NEW_SUBSCRIPTIONS_POSTS, payload: response.data})\r\n                    setFetching(false)\r\n                    setPage(page + 1)\r\n                    count.current = 0\r\n\r\n                } else {\r\n                    setFetching(false)\r\n                    count.current = 1\r\n                }\r\n\r\n        } catch (err) {\r\n            console.log(err)  \r\n        }\r\n    }\r\n}\r\n\r\nexport function getUserPosts(id) {\r\n    return async function(dispatch) {\r\n        try {\r\n            const response = await axios.get(`/posts/users/${id}`)\r\n            dispatch( { type: SET_SELECTED_POSTS, payload: response.data })\r\n\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n}\r\n\r\nexport function newPost(data, setOpen, setLoading, setErrors) {\r\n    return async function(dispatch) {\r\n        try {  \r\n               setLoading(true)\r\n                const response =  await axios.post('/posts/add', data, { headers: {\r\n                     'content-type': 'multipart/form-data' \r\n                     }\r\n                })         \r\n                setOpen(false)\r\n                setLoading(false)\r\n                dispatch({ type: SET_NEW_POST, payload: response.data })\r\n\r\n        } catch (err) {\r\n            setLoading(false)\r\n            setErrors(err.response.data)    \r\n            console.log(err.response.data)\r\n        }\r\n    }\r\n}\r\n\r\nexport function deletePost(postid, setOpen, setLoading) {\r\n    return async function(dispatch) {\r\n        try {\r\n            setLoading(true)\r\n            await axios.delete(`/posts/${postid}/delete`)\r\n            dispatch({ type: DELETE_POST, payload: postid })\r\n            setLoading(false)\r\n            setOpen(false)\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n}\r\n\r\nexport function getPost(id, history, setLoading) {\r\n    return async function(dispatch) {\r\n        try {\r\n            setLoading(true)\r\n            const response = await axios.get(`/posts/post/${id}`)\r\n            dispatch({type: SET_POST, payload: response.data})\r\n            setLoading(false)\r\n        } catch (err) {\r\n            if (err.response.status === 500) { history.push('/*')}\r\n            console.log(err)            \r\n        }\r\n    }\r\n}\r\n\r\nexport const likeAPost = (post_id) => async (dispatch) => {\r\n        try {\r\n            const response = await axios.post(`/posts/${post_id}/like`)\r\n            console.log(response.data)\r\n            dispatch({type: SET_LIKES, payload: response.data })\r\n\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\nexport function dislikeAPost(post_id) {\r\n    return async function(dispatch) {\r\n        try {\r\n            const response = await axios.delete(`/posts/${post_id}/dislike`)\r\n            dispatch({ type: SET_DISLIKE, payload: response.data })\r\n       \r\n        } catch (err) {\r\n            console.log(err)    \r\n        }\r\n    }\r\n}\r\n","import React,{ useState } from 'react'\r\nimport { deletePost } from '../../../redux/actions/PostsActions'\r\n// REDUX\r\nimport { useDispatch } from 'react-redux'\r\n// MUI\r\nimport ToolTip from '@material-ui/core/Tooltip'\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\n// ICONS\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\nimport IconButton from '@material-ui/core/IconButton'\r\n\r\nexport default function DeletePost({ post_id }) {\r\n\r\n    const [open, setOpen] = useState(false)\r\n    const [loading, setLoading ] = useState(false)\r\n    const dispatch = useDispatch()\r\n\r\n    const handleDelete = () => dispatch(deletePost(post_id, setOpen, setLoading))\r\n    \r\n    return (\r\n        <div>\r\n            <ToolTip title=\"Borrar Post\" placement=\"bottom\">\r\n                <IconButton onClick={() => setOpen(true)}> \r\n                    <DeleteIcon color=\"primary\" />\r\n                </IconButton> \r\n            </ToolTip>\r\n\r\n            <Dialog open={open} onClose={() => setOpen(false)} fullWidth maxWidth=\"sm\" >\r\n                \r\n                <DialogTitle> Estas Seguro de que quieres borrar esta publicacíon ? </DialogTitle>\r\n\r\n                <DialogActions>\r\n                    <Button disabled={loading} onClick={handleDelete} variant='contained' color=\"primary\">\r\n                    Si { loading && <CircularProgress style={{marginLeft: 15}} size={30} /> } \r\n                    </Button>\r\n                    <Button onClick={() => setOpen(false)} variant='contained' color=\"secondary\">\r\n                    Cancelar\r\n                    </Button> \r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\n// REDUX\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { likeAPost, dislikeAPost } from '../../../redux/actions/PostsActions'\r\n// MUI\r\nimport IconButton from '@material-ui/core/IconButton'\r\n// ICONS\r\nimport FavoriteIcon from '@material-ui/icons/Favorite'\r\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder'\r\n\r\nexport default function HandleLikes(props) {\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const connectedUser = useSelector(state => state.user.loggedUser)\r\n\r\n    const { likes, _id } = props.post\r\n\r\n    const liked = connectedUser && likes && likes.filter(like => like.user === connectedUser._id).length > 0\r\n\r\n    const handleLike = () => dispatch(likeAPost(_id))\r\n\r\n    const handleDislike = () => dispatch(dislikeAPost(_id))\r\n\r\n    return (\r\n            <div>\r\n                { liked ?\r\n                <IconButton onClick={handleDislike}  aria-label='add to favorites'>\r\n                    <FavoriteIcon  /> { likes && likes.length }\r\n                </IconButton>    \r\n                :  \r\n                <IconButton  onClick={handleLike} aria-label='add to favorites'>\r\n                    <FavoriteBorderIcon  /> { likes && likes.length }\r\n                </IconButton> \r\n                }            \r\n            </div>\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react'\r\nimport DeletePost from './components/DeletePost'\r\nimport moment from 'moment'\r\nimport { Link } from 'react-router-dom'\r\nimport HandleLikes from './components/HandleLikes'\r\n// REDUX\r\nimport { useSelector } from 'react-redux'\r\n// MUI\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Card from '@material-ui/core/Card'\r\nimport CardHeader from '@material-ui/core/CardHeader'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport CardActions from '@material-ui/core/CardActions'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport { red } from '@material-ui/core/colors'\r\n// ICONS\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport SpeakerNotesIcon from '@material-ui/icons/SpeakerNotes'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  media: {\r\n    height: 0,\r\n    paddingTop: '56.25%', // 16:9\r\n  },\r\n  expand: {\r\n    transform: 'rotate(0deg)',\r\n    marginLeft: 'auto',\r\n    transition: theme.transitions.create('transform', {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    transform: 'rotate(180deg)',\r\n  },\r\n  avatar: {\r\n    backgroundColor: red[500],\r\n  },\r\n}))\r\n\r\nexport default function Post({ post }) {\r\n\r\n  const onSinglePost = useSelector(state => state.UI.onSinglePost)\r\n\r\n  const connectedUser = useSelector(state => state.user.loggedUser)\r\n \r\n  const { imageURL, description, date, userRef, _id, commentCount } = post\r\n\r\n  const classes = useStyles()\r\n \r\n  return (\r\n      <Card elevation={8}>\r\n          <CardHeader\r\n              avatar={\r\n                <Avatar aria-label='profile-pic' className={classes.avatar}>\r\n                  <Link to={`/users/${userRef && userRef._id}`}> <img height={50} width={50} src={ userRef && userRef.profileImg} alt='profile-pic' /> </Link>\r\n                </Avatar>\r\n              }\r\n              action={\r\n              <div> \r\n                { userRef && userRef._id === connectedUser._id && < DeletePost post_id={_id} /> }\r\n              </div>\r\n              }\r\n              title={userRef && userRef.username}\r\n              subheader={moment(date).format('LLL')}\r\n          />\r\n\r\n          <img src={imageURL} style={{objectFit: 'cover', backgroundColor: '#3C3C3C'}} height={480} width={'100%'} alt='Post' /> \r\n        \r\n          <CardActions style={{ padding: 0 }} disableSpacing>\r\n            < HandleLikes post={post} /> \r\n            < Link style={{textDecoration: 'none' }} to={`/posts/${_id}`}> \r\n          { !onSinglePost && <IconButton> < SpeakerNotesIcon/> {commentCount} </IconButton>  }\r\n            </Link>\r\n          </CardActions>\r\n\r\n          <CardContent style={{ padding: '0px 0px 20px 10px'}}> \r\n            <Typography color='textSecondary' component='p'>\r\n              { description }\r\n            </Typography>\r\n          </CardContent>\r\n      </Card>\r\n  )\r\n}","import React,{ useEffect, useState, useRef } from 'react'\r\nimport Post from '../../../../../../components/post/Post'\r\n// REDUX\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n// ACTIONS\r\nimport { getSubscriptionsPosts } from '../../../../../../redux/actions/PostsActions'\r\n// MUI\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\n\r\nexport default function SubscriptionsPosts() {\r\n\r\n    let count = useRef(0)\r\n    const allPosts = useSelector(state => state.data.allPosts)\r\n    const dispatch = useDispatch()\r\n    const [trigger, setTrigger] = useState(false)\r\n    const [fetchingSubscriptionPosts, setFetchingSubscriptionPosts] = useState(false)\r\n    const [page, setPage] = useState(1) \r\n\r\n    useEffect(() => {\r\n      dispatch(getSubscriptionsPosts(page, setPage, setFetchingSubscriptionPosts, count))\r\n      window.addEventListener('scroll', bottomListener)        \r\n      return () => {\r\n          window.removeEventListener('scroll', bottomListener)\r\n      }\r\n    }, [dispatch, page])\r\n\r\n    useEffect(() => {\r\n        dispatch(getSubscriptionsPosts(page, setPage, setFetchingSubscriptionPosts, count))\r\n    }, [trigger])\r\n\r\n    function bottomListener() {\r\n        let div = document.getElementById('scrollHandler')\r\n        if(window.scrollY + window.innerHeight === div.clientHeight + div.offsetTop) {     \r\n           if( count.current === 0 ) {\r\n               count.current = 1\r\n               setTrigger(state => !state)\r\n           }\r\n        }   \r\n    }  \r\n\r\n    return (\r\n        <div id='scrollHandler' className='allPosts-container'>\r\n        { allPosts.map((post, key) => < Post key={key} post={post} />) }\r\n        { fetchingSubscriptionPosts && <CircularProgress size={60} color='primary' style={{margin: '0px auto'}} /> }\r\n    </div> \r\n    )\r\n}\r\n","import React from 'react'\r\n// COMPONNTS\r\nimport SubscriptionsPosts from './components/subscription-posts/SubscriptionsPosts'\r\n\r\nexport default function Posts() {\r\n    \r\n    return (     \r\n        <section className='posts-container'>\r\n          <SubscriptionsPosts  />       \r\n        </section>\r\n    )\r\n}\r\n","import React from 'react'\r\n\r\nexport default function Avatar({ height, width, src, alt, onClick, pointer }) {\r\n    return (\r\n        <img\r\n            onClick={onClick}\r\n            alt={alt}\r\n            src={src} \r\n            style={{borderRadius: '50%', margin: 10, width: width, height: height, cursor: pointer && 'pointer'}}\r\n        />\r\n    )\r\n}\r\n","import React from 'react'\r\n// MUI\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Skeleton from '@material-ui/lab/Skeleton'\r\n// UTIL\r\nimport noProfileImg from '../../../../../util/images/noprofileimg2.png'\r\n// COMPONENTS\r\nimport Avatar from '../../../../../components/Avatar'\r\n// ROUTER\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nexport default function UserData({ loading, connectedUser }) {\r\n\r\n  const history = useHistory()\r\n\r\n    return (\r\n        <div className='user-data'>\r\n            { loading ?\r\n              <div> \r\n                <Avatar \r\n                  alt='no-profile' \r\n                  src={noProfileImg} \r\n                  width={50}\r\n                  height={50}\r\n                />\r\n              </div>  \r\n            : \r\n              <div> \r\n                  <Avatar \r\n                    onClick={() => history.push(`/users/${connectedUser._id}`)} \r\n                    alt='profile' \r\n                    src={connectedUser.profileImg}\r\n                    width={50}\r\n                    height={50}\r\n                    pointer\r\n                  />\r\n              </div>          \r\n            }\r\n              <Typography variant='h6' >\r\n                { loading ? \r\n                    < Skeleton width={150} animation=\"wave\" /> : \r\n                    <div style={{cursor:'pointer'}} onClick={() => history.push(`/users/${connectedUser._id}`)} > \r\n                        {connectedUser.username}\r\n                    </div>\r\n                }\r\n              </Typography>\r\n          </div>\r\n    )\r\n}\r\n","import React from 'react'\r\n// COMPONENTS\r\nimport UserData from './components/UserData'\r\n// REDUX\r\nimport { useSelector } from 'react-redux'\r\n\r\nexport default function UserSection() {\r\n\r\n    const connectedUser = useSelector(state => state.user.loggedUser)\r\n    const loading = useSelector(state => state.user.loading)\r\n\r\n    return (\r\n        <section className='users-section'>\r\n            < UserData connectedUser={connectedUser} loading={loading} />\r\n        </section>\r\n    )\r\n}\r\n","import React,{ useState } from 'react'\r\n// REDUX\r\nimport { useDispatch } from 'react-redux'\r\nimport { newPost } from '../../redux/actions/PostsActions'\r\n// MUI \r\nimport AddBoxIcon from '@material-ui/icons/AddBox'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport ToolTip from '@material-ui/core/Tooltip'\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport imagePreview from '../../util/images/image-preview.png'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\n\r\nexport default function AddPost() {\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const [ file, setFile ] = useState('')\r\n    const [image, setImage ] = useState('')\r\n    const [content, setContent ] = useState('')\r\n    const [open, setOpen] = useState(false)\r\n    const [errors, setErrors ] = useState('')\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const selectFile = (e) =>  {\r\n        e.preventDefault()\r\n        setFile(e.target.files[0])\r\n        e.target.files[0] ? setImage(URL.createObjectURL(e.target.files[0])) : setImage('')    \r\n    }\r\n\r\n    const pickFile = (e) => {\r\n        e.preventDefault()\r\n        setErrors('')\r\n        const button = document.getElementById('file-input')\r\n        button.click()\r\n    }\r\n    \r\n    const handleOpen = () => setOpen(true)\r\n   \r\n    const handleClose = () => {\r\n        setOpen(false)\r\n        setImage('')\r\n        setContent('')\r\n        setErrors('')\r\n    }\r\n    \r\n    const uploadPost = () => {\r\n        if(image) {\r\n           \r\n            const fileType = file.name.split('.').pop()\r\n\r\n            if(fileType !== ('jpg' || 'jpeg')) return setErrors('Formato de imágen inválido. Solo jpg o jpeg.')\r\n            \r\n            let formData = new FormData()\r\n            formData.append('image', file, file.name) \r\n            formData.append('description', content) \r\n            dispatch(newPost(formData, setOpen, setLoading, setErrors))\r\n            setErrors('')\r\n        } else {\r\n            setErrors('Debes seleccionar una imágen primero')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className='add-post-container' placement='top'>\r\n            <ToolTip  title='Nuevo Post'> \r\n                < AddBoxIcon onClick={handleOpen} />\r\n            </ToolTip>\r\n\r\n            <Dialog open={open} onClose={handleClose} fullWidth maxWidth=\"sm\" >\r\n                <DialogTitle> Nuevo Post </DialogTitle>\r\n\r\n                <DialogContent>\r\n                    <div style={{display: 'flex', flexDirection: 'column'}}>\r\n                        \r\n                        <input \r\n                            hidden='hidden' \r\n                            id='file-input'\r\n                            type='file' \r\n                            placeholder='select an image' \r\n                            onChange={selectFile}\r\n                        />\r\n\r\n                        { image ?\r\n                            <img src={image} width={400} style={{margin: 'auto'}} height={400} alt='new post' /> \r\n                        :   <img src={imagePreview} width={250} style={{margin: 'auto'}} height={250} alt='preview' /> \r\n                        }\r\n                        \r\n                        <Button onClick={pickFile} style={{marginTop: 30}} variant='outlined' color=\"primary\">\r\n                            Seleccionar Imágen\r\n                        </Button>\r\n\r\n                        <TextField\r\n                            style={{marginTop: 30}}\r\n                            name=\"descripcion\"\r\n                            tpye=\"text\"\r\n                            multiline\r\n                            rows=\"4\"\r\n                            placeholder=\"Si asi lo quieres, añade una descripción...\"\r\n                            value={content}\r\n                            onChange={(e) => setContent(e.target.value)}\r\n                            fullWidth\r\n                            inputProps={{ maxLength: 200 }}                            \r\n                        />\r\n                    </div>\r\n                        <p style={{color:'red', fontFamily: 'Open Sans', margin: 'auto'}}>  { errors && errors } </p>\r\n                </DialogContent>\r\n\r\n                <DialogActions>\r\n                        \r\n                    <Button disabled={loading || errors} onClick={uploadPost} variant='contained' color=\"primary\">\r\n                        Publicar! { loading && <CircularProgress style={{marginLeft: 15}} size={30} /> } \r\n                    </Button>\r\n\r\n                    <Button onClick={handleClose} variant='contained' style={{backgroundColor: 'red'}} color=\"secondary\">\r\n                        Cancelar\r\n                    </Button>\r\n\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import React,{ useEffect } from 'react'\r\n// COMPONENTS\r\nimport Posts from './components/posts/Posts'\r\nimport UserSection from './components/user-section/UserSection'\r\nimport AddPost from '../../components/addpost/AddPost'\r\n// REDUX \r\nimport { useDispatch } from 'react-redux'\r\n// TYPES\r\nimport { ON_HOME, CLEAR_POSTS, FOCUS_OFF} from '../../redux/reducers/types'\r\n\r\nexport default function Home() {\r\n\r\nconst dispatch = useDispatch()\r\n\r\nuseEffect(() => { \r\n    dispatch({type: ON_HOME })\r\n    return () => {\r\n        dispatch({type: CLEAR_POSTS })\r\n        dispatch({type: FOCUS_OFF })\r\n    }\r\n}, [dispatch])\r\n\r\n    return (\r\n        <div className='home-container'>     \r\n             <AddPost/>  \r\n             <UserSection /> \r\n             < Posts />\r\n             \r\n        </div>\r\n    )\r\n}\r\n\r\n// 568 PX\r\n\r\n","import React,{ useState } from 'react'\r\n// REDUX\r\nimport { useDispatch } from 'react-redux'\r\n// ACTIONS\r\nimport { resetPassword } from '../../../redux/actions/AuthenticationActions'\r\n// MUI\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport Button from '@material-ui/core/Button'\r\n\r\nexport default function ResetPasswordDialog({ open, setOpen, hasPassword, provider, values}) {\r\n\r\n    const dispatch = useDispatch()\r\n    const [ handleReset, setHandleReset] = useState({\r\n        loading: false,\r\n        success: null\r\n    })\r\n\r\n    return (\r\n        <div>\r\n            <Dialog open={open} onClose={() => setOpen(false)} fullWidth maxWidth=\"sm\" >\r\n                <DialogTitle> OOPS! </DialogTitle>\r\n                <DialogContent>\r\n                    <p style={{width: '100%', textAlign: 'justify', fontFamily: 'Open Sans'}}> \r\n                      { !hasPassword ? \r\n                      `Al parecer, la cuenta con la que intentas ingresar existe, pero no cuenta con una contraseña establecida. Si quieres establecer una nueva contraseña, haz clic en Reestablecer Contraseña.\r\n                       Tambien puedes volver atras e ingresar a tu cuenta a través de` : \r\n                      `Haz clic en reestablecer contraseña si deseas recuperar tu cuenta. Revisa tu correo (${values.email}), recibiras un mensaje para continuar con el proceso.` \r\n                       }  \r\n                   </p>\r\n\r\n                { handleReset.success && <p> El link ha sido enviado exitosamente, revisa tu correo. </p> }\r\n                </DialogContent>\r\n\r\n                <DialogActions>\r\n                <Button disabled={handleReset.loading} onClick={() => dispatch(resetPassword(values.email, setHandleReset, setOpen))} variant='contained' color=\"primary\">\r\n                   Reestablecer Contraseña \r\n                </Button>\r\n                <Button disabled={handleReset.loading} onClick={() => setOpen(false)} variant='contained' color=\"primary\">\r\n                   Volver atrás\r\n                </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import React,{ useState } from 'react'\r\n// FORMIK\r\nimport { Formik, Form } from 'formik'\r\n// ROUTER \r\nimport { Link } from 'react-router-dom'\r\n// REDUX\r\nimport { loginUser, checkEmail } from '../../redux/actions/AuthenticationActions'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n// MUI\r\nimport Button from '@material-ui/core/Button'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Card from '@material-ui/core/Card'\r\n// ICONS\r\nimport FacebookIcon from '@material-ui/icons/Facebook'\r\nimport GoogleIcon from '../../util/images/googleLogo.webp'\r\n// STYLES\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n// YUP\r\nimport { loginSchema, emailCheckSchema } from '../../util/ValidationSchema'\r\n// IMAGE\r\nimport landingImage from '../../util/images/landing-image.jpg'\r\n// COMPONENTS \r\nimport LoadingAuthentication from '../../components/LoadingAuthentication'\r\nimport ResetPasswordDialog from './components/ResetPasswordDialog'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  textField: {\r\n    marginBottom: 55,\r\n    height: 40,\r\n    fontSize: 2\r\n}\r\n}))\r\n\r\nexport default function Login() {\r\n\r\n  const [ openDialog, setOpenDialog ] = useState(false)\r\n  const [ tryCount, setTryCount ] = useState(0)\r\n\r\n  const userHasPassword = useSelector(state => state.user.userHasPassword)\r\n  const serverErrors = useSelector(state => state.user.errors)\r\n\r\n  const classes = useStyles()\r\n  const dispatch = useDispatch()\r\n\r\n  return (\r\n      <Formik\r\n              initialValues={ userHasPassword === true ? { email: '', password: '' } : { email: '' } }\r\n              validationSchema={userHasPassword === true ? loginSchema : emailCheckSchema }\r\n              onSubmit={(values, { setSubmitting }) => {\r\n                \r\n                userHasPassword === null && dispatch(checkEmail(values, setSubmitting, setOpenDialog))\r\n                userHasPassword === true && dispatch(loginUser(values, setSubmitting ,setOpenDialog, setTryCount))\r\n                userHasPassword === false && dispatch(checkEmail(values, setSubmitting, setOpenDialog))\r\n              }}\r\n            >\r\n              {({ handleSubmit, isSubmitting, errors, values, touched, handleChange, handleBlur }) => (\r\n              <div className='form-container'>\r\n\r\n                <ResetPasswordDialog \r\n                    open={openDialog} \r\n                    setOpen={setOpenDialog} \r\n                    hasPassword={userHasPassword}\r\n                    values={values}\r\n                />\r\n\r\n                <Card className='form-card' elevation={8}>\r\n                 \r\n                    <Form className='form'>\r\n\r\n                      <Typography style={{margin: '5px 0px 25px 0px'}}  variant='h4'> Iniciar Sesión </Typography>\r\n\r\n                      <TextField\r\n                          variant='outlined'\r\n                          className={classes.textField}\r\n                          error={errors.email || serverErrors}\r\n                          id='email'\r\n                          name='email'\r\n                          type='email'\r\n                          value={values.email}\r\n                          onChange={handleChange}\r\n                          onBlur={handleBlur}\r\n                          required\r\n                          helperText={!userHasPassword ? errors.email || serverErrors : errors.email }\r\n                          label='Correo Electrónico'\r\n                      />\r\n                      { userHasPassword &&   \r\n                      \r\n                      <TextField\r\n                          variant='outlined'\r\n                         \r\n                          error={errors.password || serverErrors }\r\n                          id='password'\r\n                          name='password'\r\n                          type='password'\r\n                          value={values.password}\r\n                          onChange={handleChange}\r\n                          onBlur={handleBlur}\r\n                          required\r\n                          helperText={ errors.password || serverErrors }\r\n                          label='Contraseña'\r\n                      /> \r\n                      }\r\n                        { tryCount >= 1 && <p style={{fontFamily: 'Open Sans', marginTop: 20 }}> Olvidaste tu contraseña? haz click <span onClick={() => setOpenDialog(true)} style={{color: 'blue', cursor: 'pointer'}}> Aquí </span> para recuperarla. </p>} \r\n                       \r\n                      <Button\r\n                          disabled={isSubmitting}\r\n                          type='submit'\r\n                          onClick={handleSubmit}\r\n                          variant='contained'\r\n                          color='primary'\r\n                          style={{ margin: '10px 0px'}}\r\n                      >\r\n                      Iniciar Sesión\r\n                      </Button>\r\n                      \r\n                      <a style={{cursor: 'pointer', textDecoration: 'none', margin: '10px 0px'}} href='https://clonetagram.herokuapp.com/api/user/login/facebook'>\r\n                        <Button variant='contained' color='secondary' style={{width: '100%' }} startIcon={ <FacebookIcon style={{margin: 0, padding: 0}} />}>\r\n                          <p style={{margin: 0, padding: 0}} > Iniciar sesión con Facebook </p>\r\n                        </Button>\r\n                      </a> \r\n\r\n                      <a style={{cursor: 'pointer', textDecoration: 'none', margin: '10px 0px', }} href='https://clonetagram.herokuapp.com/api/user/login/google'>\r\n                        <Button variant='outlined' color='primary' style={{width: '100%'}} startIcon={ <img src={GoogleIcon} alt='google-icon' width='20' height='20'/>}>\r\n                          <p style={{ margin: 0, padding: 0}}> Iniciar sesión con Google </p>\r\n                        </Button>\r\n                      </a> \r\n\r\n                      <p className='auth-p'> No tienes una cuenta?\r\n                        <Link \r\n                          style={{textDecoration: 'none', color: '#046B86'}} \r\n                          to='/Register'> Registrate Aquí\r\n                        </Link>\r\n                      </p>\r\n                    </Form>\r\n                    <img src={landingImage} alt='landing'className='auth-image' />\r\n                </Card>\r\n              { isSubmitting && <LoadingAuthentication /> }\r\n              </div>  \r\n              )}\r\n      </Formik>\r\n  )    \r\n} \r\n","import React,{ useState } from 'react'\r\n// REDUX\r\nimport { addComment } from '../../../../../../../redux/actions/CommentsActions'\r\nimport { useDispatch } from 'react-redux'\r\n// MUI\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport TextField from '@material-ui/core/TextField'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    '& > *': {\r\n      width: '100%'\r\n    },\r\n  },\r\n  input: {\r\n    background: '#181818'\r\n  }\r\n}));\r\n\r\nexport default function AddComment(props) {\r\n\r\nconst classes = useStyles()\r\nconst dispatch = useDispatch()\r\n\r\nconst [ loading, setLoading ] = useState(false)\r\nconst [ content, setContent ] = useState('')\r\n\r\nconst handleComment = (e) => {\r\n   e.preventDefault()\r\n   if(content) {\r\n    setLoading(true)\r\n    dispatch(addComment({ content }, props.selectedPost._id, setLoading ))  \r\n    setContent('')  \r\n   }   \r\n}\r\n\r\n  return (\r\n        <form className={classes.root} noValidate autoComplete=\"off\">\r\n                <TextField\r\n                    disabled={loading}\r\n                    type=\"text\"\r\n                    label=\"Añade un comentario\"\r\n                    rows=\"2\"\r\n                    variant='filled'\r\n                    value={content}\r\n                    onChange={(e) => setContent(e.target.value)}\r\n                    fullWidth\r\n                    onKeyPress={(e) => {\r\n                        if (e.key === 'Enter') {\r\n                            handleComment(e) \r\n                        }\r\n                      }}    \r\n                />\r\n        </form>\r\n  )\r\n}","import { SET_POST_COMMENTS, SET_REPLIES, SET_NEW_COMMENT, DELETE_REPLY, DELETE_COMMENT } from '../reducers/types'\r\nimport axios from 'axios'\r\n\r\nexport function getPostComments(id) {\r\n    return async function(dispatch) {    \r\n        try {\r\n            const response = await axios.get(`/comments/${id}`)\r\n            dispatch({ type: SET_POST_COMMENTS, payload: response.data})\r\n\r\n        } catch (err) {\r\n            console.log(err.response)\r\n        }\r\n    }\r\n}\r\n\r\nexport function addComment(content, id, setLoading) {\r\n    return async function(dispatch) {\r\n        try {\r\n            const response = await axios.post(`/comments/${id}`, content)\r\n            dispatch({ type: SET_NEW_COMMENT, payload: response.data })\r\n            setLoading(false)\r\n\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n}\r\n\r\nexport function deleteComment(comment_id, setLoading, setOpen) {\r\n    return async function(dispatch) {\r\n        try {\r\n            setLoading(true)\r\n            await axios.delete(`/comments/${comment_id}/delete`)\r\n            setLoading(false)\r\n            dispatch({ type: DELETE_COMMENT, payload: comment_id })\r\n            setOpen(false)\r\n        } catch (err) {\r\n            console.log(err)  \r\n        }\r\n    }\r\n}\r\n\r\nexport function addReply(content, comment_id) {\r\n    return async function(dispatch) {\r\n        try {\r\n           const response = await axios.post(`/comments/${comment_id}/reply`, content)\r\n           dispatch({ type: SET_REPLIES, payload: response.data })\r\n\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n}\r\n\r\nexport function removeReply(comment_id, reply_id, setLoading, setOpen) {\r\n    return async function(dispatch) {\r\n        try {\r\n            setLoading(true)\r\n            await axios.delete((`/comments/${comment_id}/reply/${reply_id}/delete`))\r\n            setLoading(false)\r\n            setOpen(false)\r\n            dispatch({type: DELETE_REPLY, payload: { comment_id, reply_id } })\r\n\r\n        } catch (error) {\r\n            setLoading(false)\r\n            console.log(error)\r\n        }\r\n    }\r\n}","import React,{ useState } from 'react'\r\n// REDUX\r\nimport { removeReply } from '../../../../../../../../../redux/actions/CommentsActions'\r\nimport { useDispatch } from 'react-redux'\r\n// MUI\r\nimport ToolTip from '@material-ui/core/Tooltip'\r\n// ICONS\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CancelIcon from '@material-ui/icons/Cancel'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport Button from '@material-ui/core/Button'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\n\r\nexport default function DeleteReply({ reply, comment }) {\r\n    \r\n    const dispatch = useDispatch()\r\n    const [ open, setOpen ] = useState(false)\r\n    const [ loading, setLoading ] = useState(false) \r\n\r\n    const handleDelete = () => dispatch(removeReply(comment._id, reply._id, setLoading, setOpen))\r\n    \r\n    return (\r\n            <div>\r\n                <ToolTip title=\"Borrar comentario\" placement=\"bottom\">\r\n                    <IconButton onClick={ () => setOpen(true)} > \r\n                    <CancelIcon color=\"primary\"/>\r\n                    </IconButton> \r\n                </ToolTip>\r\n                <Dialog open={open} onClose={() => setOpen(false)} fullWidth maxWidth=\"sm\" >\r\n                    <DialogTitle> Seguro que quieres borrar tu comentario ?  </DialogTitle>\r\n                    <DialogActions>\r\n                            \r\n                        <Button disabled={loading} onClick={handleDelete} variant='contained' color=\"primary\">\r\n                        Borrar { loading && <CircularProgress style={{marginLeft: 15}} size={30} /> } \r\n                        </Button>\r\n\r\n                        <Button onClick={() => setOpen(false)} variant='contained' style={{backgroundColor: 'red'}} color=\"secondary\">\r\n                            Cancelar\r\n                        </Button>\r\n\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport moment from 'moment'\r\n// MUI\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport ListItem from '@material-ui/core/ListItem'\r\n// COMMENT \r\nimport DeleteReply from './DeleteReply'\r\n\r\nexport default function Reply({ reply, comment }) {\r\n\r\n    const { profileImg, createdAt, username } = reply.user_id\r\n    return (\r\n        <ListItem style={{display: 'flex'}}> \r\n            <ListItemAvatar>\r\n                  <Avatar alt='comment profile' src={profileImg} />\r\n              </ListItemAvatar>\r\n           \r\n            <div style={{ width: '100%'}}>\r\n                <ListItemText\r\n                    primary={username}\r\n                    secondary={moment(createdAt).format('LLL')}\r\n                />\r\n             \r\n                <ListItemText primary={reply.content} />\r\n\r\n                <ListItemSecondaryAction>\r\n                    <DeleteReply reply={reply} comment={comment} /> \r\n                </ListItemSecondaryAction>\r\n            </div>\r\n            <Divider variant=\"inset\" component=\"span\" />\r\n        </ListItem>\r\n    )\r\n}\r\n","import React,{ useState } from 'react'\r\n// REDUX\r\nimport { addReply } from '../../../../../../../../../redux/actions/CommentsActions'\r\nimport { useDispatch } from 'react-redux'\r\n// MUI\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport TextField from '@material-ui/core/TextField'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    '& > *': {\r\n      width: '100%'\r\n    },\r\n  },\r\n}))\r\n\r\nexport default function AddRepply(props) {\r\n\r\nconst classes = useStyles()\r\nconst dispatch = useDispatch()\r\n\r\nconst [content, setContent] = useState('')\r\n\r\nconst handleComment = (e) => {\r\n    e.preventDefault()\r\n   if(content) {\r\n    dispatch(addReply({ content }, props.comment._id ))  \r\n    setContent('')  \r\n   }   \r\n}\r\n\r\n  return (\r\n    <form className={classes.root} noValidate autoComplete=\"off\">\r\n           <TextField\r\n               tpye=\"text\"\r\n               label=\"Escribe un mensaje\"\r\n               rows=\"2\"\r\n               variant='filled'\r\n               value={content}\r\n               onChange={(e) => setContent(e.target.value)}\r\n               fullWidth\r\n               onKeyPress={(e) => {\r\n                   if (e.key === 'Enter') {\r\n                       handleComment(e) \r\n                   }\r\n                 }}    \r\n           />\r\n    </form>\r\n  )\r\n}\r\n","import React from 'react'\r\n// MUI\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails'\r\n// COMPONENTS\r\nimport Reply from './components/Reply'\r\nimport AddReply from './components/AddRepply'\r\n\r\nexport default function Replies ({ replies, comment, selectedPost }) {\r\n\r\n    return (\r\n       <ExpansionPanelDetails style={{ width: '100%', maxHeight: 450, padding: 0 }}>\r\n            <div style={{ width: '100%', display: 'flex', flexDirection: 'column', maxHeight: 400, overflow: 'auto'}}>\r\n                <AddReply comment={comment} selectedPost={selectedPost} />\r\n                { replies.map((reply, key) => <Reply reply={reply} key={key} comment={comment} />) }\r\n            </div> \r\n      </ExpansionPanelDetails>\r\n    )\r\n}\r\n","import React,{ useState } from 'react'\r\n// REDUX\r\nimport { deleteComment } from '../../../../../../../redux/actions/CommentsActions'\r\nimport { useDispatch } from 'react-redux'\r\n// MUI\r\nimport ToolTip from '@material-ui/core/Tooltip'\r\n// ICONS\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CancelIcon from '@material-ui/icons/Cancel'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport Button from '@material-ui/core/Button'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\n\r\nexport default function DeleteComment(props) {\r\n\r\n    const dispatch = useDispatch()\r\n    const [ open, setOpen ] = useState(false)\r\n    const [ loading, setLoading ] = useState(false) \r\n\r\n    const handleDelete = () => dispatch(deleteComment(props.comment_id, setLoading, setOpen))\r\n    \r\n    return (\r\n            <div>\r\n                <ToolTip title=\"Borrar comentario\" placement=\"bottom\">\r\n                    <IconButton onClick={ () => setOpen(true)} > \r\n                    <CancelIcon color=\"primary\"/>\r\n                    </IconButton> \r\n                </ToolTip>\r\n                <Dialog open={open} onClose={() => {\r\n                return setOpen(false)\r\n            }} fullWidth maxWidth=\"sm\" >\r\n                <DialogTitle> Seguro que quieres borrar el comentario ?  </DialogTitle>\r\n                <DialogActions>\r\n                        \r\n                    <Button disabled={loading} onClick={handleDelete} variant='contained' color=\"primary\">\r\n                       Borrar { loading && <CircularProgress style={{marginLeft: 15}} size={30} /> } \r\n                    </Button>\r\n\r\n                    <Button onClick={() => setOpen(false)} variant='contained' style={{backgroundColor: 'red'}} color=\"secondary\">\r\n                        Cancelar\r\n                    </Button>\r\n\r\n                </DialogActions>\r\n            </Dialog>\r\n            </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport moment from 'moment'\r\n// COMPONENTS\r\nimport Replies from './components/Replies/Replies'\r\nimport DeleteComment from './components/DeleteComment'\r\n// MUI\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel'\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n// REDUX\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n      height: '100%',\r\n      overflow: 'auto',\r\n      width: '100%',\r\n      backgroundColor: theme.palette.background.paper\r\n    },\r\n    ExpansionPanelSummary: {\r\n      border: 0,\r\n      width: '100%',\r\n      boxShadow: 'none'\r\n    },\r\n    ExpansionPanel: {\r\n      border: 0,\r\n      boxShadow: 'none',\r\n      width: '100%',\r\n      margin: 0,\r\n      outline: 'none',\r\n    },\r\n    inline: {\r\n      display: 'inline',\r\n    },\r\n  }))\r\n\r\nexport default function Comment({ comment }) {\r\n\r\n    const connectedUser = useSelector(state => state.user.loggedUser)\r\n    const selectedPost = useSelector(state => state.data.selectedPost)\r\n    const classes = useStyles()  \r\n\r\n    return (\r\n      <div> \r\n          <ListItem id='comment-box' alignItems='flex-start' >\r\n\r\n              <ListItemAvatar>\r\n                  <Avatar alt='comment profile' src={comment.user_id.profileImg} />\r\n              </ListItemAvatar>\r\n            \r\n            <div style={{ width: '100%'}}>\r\n              <ListItemText\r\n                primary={comment.user_id.username}\r\n                secondary={moment(comment.date).format('LLL')}\r\n              />\r\n\r\n              <span style={{position: 'absolute', right: 0, top: 0}}>\r\n                { connectedUser._id === comment.user_id._id && <DeleteComment comment_id={comment._id} selectedPost={selectedPost}  /> }\r\n              </span>  \r\n              \r\n              <ListItemText\r\n                primary={comment.content}\r\n              />\r\n              \r\n              <ExpansionPanel className={classes.ExpansionPanel}>\r\n\r\n                  <ExpansionPanelSummary className={classes.ExpansionPanelSummary}>\r\n                      <ListItemText secondary={`responder (${comment.replies.length})`}/>\r\n                  </ExpansionPanelSummary>\r\n                  \r\n                  <Replies replies={comment.replies} selectedPost={selectedPost} comment={comment} />\r\n              \r\n              </ExpansionPanel>\r\n            </div>     \r\n          </ListItem>     \r\n          <Divider variant='inset' component='li' />\r\n      </div>  \r\n    )\r\n}\r\n","import React from 'react'\r\n// COMPONENTS\r\nimport AddComment from './components/comment/components/AddComment'\r\nimport List from '@material-ui/core/List'\r\nimport Comment from './components/comment/Comment'\r\n\r\nexport default function CommentsList({ selectedPost, comments }) {\r\n  return (\r\n      <div> \r\n        <AddComment selectedPost={selectedPost} />  \r\n        <List>\r\n          { comments.map((comment, key) => <Comment comment={comment} key={key} />) }\r\n        </List>\r\n      </div>   \r\n  )}","import React,{ useEffect, useState } from 'react'\r\nimport Post from '../../components/post/Post'\r\nimport CommentsList from './components/commentlist/CommentsList'\r\n// REDUX\r\nimport { getPost } from '../../redux/actions/PostsActions'\r\nimport { getPostComments } from '../../redux/actions/CommentsActions' \r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { ON_SINGLE_POST, CLOSE_SINGLE_POST } from '../../redux/reducers/types'\r\n// MUI\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\n\r\nexport default function FullPost(props) {\r\n    \r\n    const post_id = props.match.params.id\r\n\r\n    const dispatch = useDispatch()\r\n    \r\n    const selectedPost = useSelector(state => state.data.selectedPost)\r\n    const comments = useSelector(state => state.comments.comments)\r\n\r\n    const [ loading, setLoading ] = useState(false)\r\n\r\n    useEffect(() => {\r\n      dispatch(getPost(post_id, props.history, setLoading))\r\n      dispatch(getPostComments(post_id))  \r\n      dispatch({ type: ON_SINGLE_POST })  \r\n      return () => {\r\n        dispatch({ type: CLOSE_SINGLE_POST })\r\n      }\r\n    }, [dispatch, post_id, props.history])\r\n \r\n    if(loading) return <div style={{display: 'flex', width: '100%', height: '100vh'}}> <CircularProgress style={{margin: 'auto'}} size={60} /> </div>\r\n\r\n    return (\r\n        <section className='fullPost-container'>       \r\n            <Post post={selectedPost} />\r\n            <CommentsList comments={comments} selectedPost={selectedPost} /> \r\n        </section>\r\n    )\r\n}\r\n","import React,{ useEffect } from 'react'\r\n// COMPONENTS\r\nimport Post from '../../../../components/post/Post'\r\n// ACTIONS\r\nimport { getUserPosts } from '../../../../redux/actions/PostsActions'\r\n// REDUX\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nexport default function ProfilePosts({ user_id }) {\r\n\r\n    const dispatch = useDispatch()\r\n    const userPosts = useSelector(state => state.data.selectedPosts)\r\n\r\n    useEffect(() => {\r\n        dispatch(getUserPosts(user_id))    \r\n    }, [dispatch, user_id])\r\n\r\n    return (\r\n        <div className='profilePosts-grid'>\r\n         { userPosts.map((post, key) => < Post key={key} post={post} />) } \r\n         </div>\r\n)}","import React from 'react'\r\n// REDUX\r\nimport { useSelector } from 'react-redux'\r\n// MUI\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\n\r\nexport default function ProfileImg({ src }) {\r\n\r\n    const loading = useSelector(state => state.UI.changingProfileImage)\r\n\r\n    if(loading) return <CircularProgress size={130} /> \r\n\r\n    return (\r\n            <img src={src} alt='profile'/> \r\n    )\r\n}\r\n\r\n\r\n\r\n","import React,{ useEffect, useState } from 'react'\r\n// REDUX\r\nimport { useDispatch } from 'react-redux'\r\n// ACTIONSs\r\nimport { followUser, unfollowUser, cancelRequest } from '../../../redux/actions/UserActions'\r\n// MUI\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Button from '@material-ui/core/Button'\r\n\r\nexport default function HandleFollow({ userProfile, connectedUser }) {\r\n\r\n   const user_id = userProfile._id\r\n   const dispatch = useDispatch()\r\n\r\n   const [ isFollowed, setIsFollowed ] = useState()\r\n   const [ loading, setLoading ] = useState(false)\r\n\r\n   useEffect(() => {\r\n\r\n        let subscription = connectedUser.subscriptions && connectedUser.subscriptions.find(subscript => subscript.user_id._id === user_id)\r\n        subscription ? setIsFollowed(true) : setIsFollowed(false) \r\n\r\n   }, [connectedUser, user_id])\r\n\r\n  const handleFollow =  () => dispatch(followUser(user_id, setLoading, userProfile.private, { userProfile, connectedUser }))\r\n\r\n  const handleUnfollow = () => dispatch(unfollowUser(user_id, setLoading, connectedUser._id))\r\n\r\n  const handleRequest = () => dispatch(cancelRequest(user_id, setLoading))\r\n\r\n  let requestAlreadySended = userProfile && userProfile.followUpRequests && userProfile.followUpRequests.find(req => req.follower_id._id === connectedUser._id)\r\n\r\n  if(requestAlreadySended) return (\r\n\r\n    <Button disabled={loading} onClick={handleRequest} style={{marginLeft: 10}} variant='contained' \r\n    color='primary' size='small' > Solicitud Enviada { loading && <CircularProgress style={{marginLeft: 5}} size={20} /> } \r\n    </Button> \r\n  )   \r\n\r\n    return (\r\n        <div>\r\n            { isFollowed ? \r\n            \r\n              <Button disabled={loading} onClick={handleUnfollow} style={{marginLeft: 10}} variant='contained' \r\n              color='primary' size='small' > Siguiendo { loading && <CircularProgress style={{marginLeft: 5}} size={20} /> } \r\n              </Button> \r\n              \r\n              : \r\n\r\n              <Button disabled={loading} onClick={handleFollow} style={{marginLeft: 10}} variant='contained' \r\n              size='small' > Seguir { loading && <CircularProgress style={{marginLeft: 5}} size={20} /> }  \r\n              </Button>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","import { \r\n      SET_SELECTED_PROFILE,\r\n      CHANGE_PRIVACY,\r\n      ADD_TO_REQUESTS,\r\n      FOLLOW_USER,\r\n      UNFOLLOW_USER,\r\n      DELETE_REQUEST\r\n} from '../reducers/types'\r\nimport axios from 'axios'\r\n\r\nexport function getUserProfile(id, setLoading) {\r\n    return async function(dispatch) {\r\n        try {\r\n            setLoading(true)\r\n            const response = await axios.get(`/users/${id}`)\r\n            dispatch({ type: SET_SELECTED_PROFILE, payload: response.data})\r\n            setLoading(false)\r\n\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n}\r\n\r\nexport function addUserDetails(data, setLoading, setOpen) {\r\n    return async function(dispatch) {\r\n        try {  \r\n            const response = await axios.post('users/me/details',{ details: data } )\r\n            dispatch({type: SET_SELECTED_PROFILE, payload: response.data})\r\n            setOpen(false)\r\n            setLoading(false)\r\n    \r\n        } catch (err) {\r\n            console.log(err)\r\n           setLoading(false)\r\n        }\r\n    }\r\n}\r\n\r\nexport function followUser(user_id, setLoading, privateUser, usersData) {\r\n    return async function(dispatch) {\r\n        try {\r\n            setLoading(true)\r\n            await axios.post(`/users/subscribe/${user_id}`)\r\n            privateUser ? dispatch({type: ADD_TO_REQUESTS, payload: usersData }) : dispatch({type: FOLLOW_USER, payload: usersData})\r\n            setLoading(false)\r\n\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n}\r\n// change\r\nexport function unfollowUser(user_id, setLoading, _id) {\r\n    return async function(dispatch) {\r\n        try {\r\n            setLoading(true)\r\n            await axios.delete(`/users/unsubscribe/${user_id}`)\r\n            dispatch({type: UNFOLLOW_USER, payload: { user_id, _id } })\r\n            setLoading(false)\r\n\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n}\r\n\r\n// ALTERAR\r\nexport function cancelRequest(user_id, setLoading) { \r\n    return async function(dispatch) {\r\n        try {\r\n            setLoading(true)\r\n            const response = await axios.delete(`/users/requests/cancel/${user_id}`)\r\n            dispatch({ type: SET_SELECTED_PROFILE, payload: response.data })\r\n            setLoading(false)\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n}\r\n\r\nexport function ignoreRequest(follower_id, setLoading) {\r\n    return async function(dispatch) {\r\n        try {\r\n            setLoading(true)\r\n            await axios.delete(`/users/requests/ignore/${follower_id}`)\r\n            dispatch({type: DELETE_REQUEST, payload: follower_id })\r\n            setLoading(false)\r\n            \r\n        } catch (error) {\r\n            console.log(error)\r\n            dispatch({type: DELETE_REQUEST, payload: follower_id })\r\n            setLoading(false)\r\n        }\r\n    }\r\n}\r\n\r\nexport function acceptRequest(follower_id, setLoading ) {\r\n    return async function(dispatch) {\r\n        try {\r\n             setLoading(true)\r\n             await axios.patch(`/users/requests/accept`, { follower_id }  )\r\n             dispatch({type: DELETE_REQUEST , payload: follower_id })\r\n             setLoading(false)\r\n\r\n        } catch (error) {\r\n            console.log(error)\r\n            dispatch({type: DELETE_REQUEST , payload: follower_id })\r\n            setLoading(false)\r\n        }\r\n    }\r\n}\r\n\r\nexport function setPrivacy(setLoading) {\r\n    return async function(dispatch) {\r\n        try {\r\n            setLoading(true)\r\n            await axios.patch('/users/privacy')\r\n            setLoading(false)\r\n            dispatch({type: CHANGE_PRIVACY })\r\n            \r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n// MUI\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\r\nimport Avatar from '@material-ui/core/Avatar'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n      width: '100%',\r\n      backgroundColor: theme.palette.background.paper,\r\n    },\r\n    nested: {\r\n      paddingLeft: theme.spacing(4),\r\n    },\r\n  }))\r\n\r\nexport default function SubsFollowersList({ open, userList = [], setOpen, showingFollowers }) {\r\n\r\n   const classes = useStyles() \r\n\r\n    return (\r\n        <Dialog children='div' open={open} onClose={() => setOpen(false)} fullWidth maxWidth=\"sm\" >\r\n            <div>\r\n                <List \r\n                    style={{width: '100%'}}\r\n                    component=\"nav\"\r\n                    aria-labelledby=\"nested-list-subheader\"\r\n                    subheader={\r\n                    <ListSubheader component=\"div\" id=\"nested-list-subheader\">\r\n                        { showingFollowers ? 'Seguidores' : 'Seguidos' } < hr/>\r\n                        {userList.length === 0 && showingFollowers ? 'Esta cuenta no tiene seguidores' : userList.length === 0 && !showingFollowers && 'Esta cuenta no sigue a nadie'}\r\n                    </ListSubheader>\r\n                    }\r\n                    className={classes.root}>\r\n\r\n                 { userList.map((user, key) =>  \r\n\r\n                    <div key={key}>\r\n                        <Link onClick={() => setOpen(false)} style={{textDecoration: 'none'}} to={`/users/${user.user_id._id}`} >\r\n                            <ListItem button className={classes.nested} >\r\n                                <ListItemAvatar>\r\n                                    <Avatar\r\n                                        src={user.user_id.profileImg}\r\n                                    />\r\n                                </ListItemAvatar>\r\n                                <ListItemText secondary={user.user_id.username} />\r\n                            </ListItem>\r\n                        </Link>\r\n                    </div>                   \r\n                 )} \r\n                </List>\r\n            </div>\r\n        </Dialog>\r\n    )\r\n}\r\n","import React,{ useState, useEffect } from 'react'\r\n// REDUX\r\nimport { useDispatch } from 'react-redux'\r\n// ACTIONS\r\nimport { addUserDetails } from '../../../../../redux/actions/UserActions'\r\n// MUI\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\n\r\nexport default function EditDescription({ description, open, setOpen }) {\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const [ loading, setLoading ] = useState(false)\r\n    const [ details, setDetails ] = useState('')\r\n    const [ errors, setErrors ] = useState('')\r\n\r\n    useEffect(() => {    \r\n            setDetails(description)\r\n    }, [description])\r\n\r\n    const handleEdit = () => {\r\n\r\n        if(details.trim() === '') {\r\n            setErrors('No debe estar vacío')\r\n        }\r\n        setLoading(true)\r\n        dispatch(addUserDetails(details, setLoading, setOpen))\r\n    }\r\n\r\n    const handleClose = () => {\r\n        setOpen(false)\r\n        setErrors('')\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Dialog open={open} onClose={handleClose} fullWidth maxWidth=\"sm\" >\r\n              <div style={{margin: '20px auto 20px auto', width:'85%'}}> \r\n                <TextField\r\n                    tpye=\"text\"\r\n                    label=\"Descripción\"\r\n                    multiline\r\n                    rows=\"4\"\r\n                    placeholder='Añade una descripción a tu perfil'\r\n                    value={details}\r\n                    onChange={(e) => setDetails(e.target.value)}\r\n                    fullWidth\r\n                />\r\n              </div>\r\n                { errors && <p style={{color: 'red', fontFamily: 'Open Sans', marginLeft: 40}}> {errors} </p>  }\r\n                \r\n                <DialogActions>\r\n                    <Button onClick={handleEdit} disabled={loading} variant='contained' color=\"primary\">\r\n                    Guardar { loading && <CircularProgress style={{marginLeft: 5}} size={20} /> } \r\n                    </Button>\r\n                    <Button onClick={handleClose} variant='contained' style={{backgroundColor: 'red'}} color=\"secondary\">\r\n                    Cancelar\r\n                    </Button> \r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\n// MUI\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\n// REDUX\r\nimport { useDispatch } from 'react-redux'\r\n// ACTIONS\r\nimport { editProfileImage } from '../../../../../redux/actions/AuthenticationActions'\r\n\r\nexport default function EditImage({ open, setOpen }) {\r\n    const dispatch = useDispatch()\r\n\r\n    const selectFile = (e) =>  {\r\n\r\n        e.preventDefault()\r\n        const file = e.target.files[0]\r\n        const formData = new FormData()\r\n        formData.append('image', file, file.name) \r\n        console.log(formData)\r\n   \r\n        if(formData) {\r\n            dispatch(editProfileImage(formData))\r\n            setOpen(false)\r\n        }\r\n    }\r\n\r\n    const pickFile = (e) => {\r\n        e.preventDefault()\r\n        const button = document.getElementById('file-input')\r\n        button.click()\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Dialog open={open} onClose={() => setOpen(false)} fullWidth maxWidth=\"sm\" >\r\n                <DialogTitle> Cambiar foto de perfil </DialogTitle>\r\n\r\n                <DialogContent>\r\n                    <form style={{display: 'flex', flexDirection: 'column'}}>\r\n\r\n                        <input required hidden='hidden' id='file-input'\r\n                        type='file' placeholder='select an image' onChange={selectFile} />\r\n                        \r\n                        <Button onClick={pickFile} variant='outlined' color=\"primary\">\r\n                            Subir Foto \r\n                        </Button>\r\n\r\n                    </form>\r\n                </DialogContent>\r\n\r\n                <DialogActions>\r\n                    <Button onClick={() => setOpen(false)} variant='contained' color=\"secondary\">\r\n                        Cancelar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import React,{ useState, useEffect } from 'react'\r\n// MUI\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport Switch from '@material-ui/core/Switch'\r\nimport FormLabel from '@material-ui/core/FormLabel'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport FormGroup from '@material-ui/core/FormGroup'\r\n// REDUX\r\nimport { useDispatch } from 'react-redux'\r\n// ACTIONS\r\nimport { setPrivacy } from '../../../../../redux/actions/UserActions'\r\n\r\nexport default function HandlePrivacy({ connectedUser }) {\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        console.log(connectedUser)\r\n    }, [connectedUser])\r\n\r\n    const [ loading, setLoading ] = useState(false)\r\n\r\n    const HandlePrivacyChange = () => {\r\n        dispatch(setPrivacy(setLoading))\r\n    }\r\n\r\n    return (\r\n        <FormControl component=\"fieldset\">\r\n        <FormLabel component=\"legend\"> Editar privacidad </FormLabel>\r\n        <FormGroup>\r\n          <FormControlLabel\r\n            control={<Switch  name=\"gilad\" />}\r\n            checked={ connectedUser.private}\r\n            label={ connectedUser.private ? 'Cuenta Privada' : 'Cuenta Pública'}\r\n            onChange={HandlePrivacyChange}\r\n            disabled={loading}\r\n          />\r\n           </FormGroup>\r\n           </FormControl>\r\n    )\r\n}\r\n","import React,{ useState } from 'react'\r\n// ROUTER\r\nimport { withRouter } from 'react-router-dom'\r\n// MUI\r\nimport Menu from '@material-ui/core/Menu'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\n// ICONS\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport EditIcon from '@material-ui/icons/Edit'\r\n// COMPONENTS\r\nimport EditDescription from './components/EditDescription'\r\nimport EditImage from './components/EditImage'\r\nimport HandlePrivacy from './components/HandlePrivacy'\r\n// REDUX\r\nimport { useDispatch } from 'react-redux'\r\n// ACTIONS\r\nimport { logOutUser } from '../../../../redux/actions/AuthenticationActions'\r\n\r\n function EdditAccountDetails({ description, connectedUser, history }) {\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  const [open, setOpen] = useState(null)\r\n  const [openDescription, setOpenDescription] = useState(false)\r\n  const [openImage, setOpenImage] = useState(false)\r\n\r\n  const handleClick = (event) => setOpen(event.currentTarget)\r\n\r\n  const handleDescriptionEdit = () => {\r\n    setOpenDescription(true)\r\n    setOpen(false)\r\n  }\r\n\r\n  const handleImageEdit = () => { \r\n    setOpenImage(true)\r\n    setOpen(false)\r\n  }\r\n\r\n  const handleLogOut = () => dispatch(logOutUser(history))\r\n  \r\n  return (\r\n    <div>\r\n        <IconButton onClick={handleClick} style={{height: 50, color: '#e5e5e5'}}>\r\n            < EditIcon />                   \r\n        </IconButton>\r\n      <Menu\r\n        disableScrollLock={true}\r\n        MenuListProps={{ disablePadding: false}}\r\n        getContentAnchorEl={null}\r\n        anchorOrigin={{ vertical: \"center\", horizontal: \"left\" }}\r\n        transformOrigin={{ horizontal: \"right\" }}\r\n        anchorEl={open}\r\n        keepMounted\r\n        open={Boolean(open)}\r\n        onClose={() => setOpen(false)}\r\n      >\r\n        <MenuItem onClick={handleDescriptionEdit}>Editar descripción</MenuItem>\r\n        <MenuItem onClick={handleImageEdit} > Editar imágen de perfil  </MenuItem>\r\n        <MenuItem > <HandlePrivacy connectedUser={connectedUser}/> </MenuItem>\r\n        <MenuItem onClick={handleLogOut} > Cerrar Sesión</MenuItem>\r\n      </Menu>\r\n      <EditImage open={openImage} setOpen={setOpenImage} /> \r\n      <EditDescription open={openDescription} setOpen={setOpenDescription} description={description} />\r\n      \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default withRouter(EdditAccountDetails)","import React from 'react'\r\nimport Card from '@material-ui/core/Card'\r\n\r\nexport default function PrivateAccountSign() {\r\n    return (\r\n        <div style={{width: '100%', height: 200, display: 'flex'}}> \r\n            <Card elevation='10' style={{ margin: 'auto', fontFamily: 'Open Sans', padding: 20 }}>\r\n            Esta cuenta es privada. Siguela para ver su contenido.\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n","import React,{ useEffect, useState, Fragment } from 'react'\r\n// COMPONENTS\r\nimport ProfilePosts from './components/profile-posts/ProfilePosts'\r\nimport ProfileImg from './components/ProfileImg'\r\nimport AddPost from '../../components/addpost/AddPost'\r\nimport HandleFollow from './components/HandleFollow'\r\nimport SubsFollowersList from './components/SubsFollowersList'\r\nimport EditAccountDetails from './components/edit-account-details/EditAccountDetails'\r\nimport PrivateAccountSign from './components/PrivateAccountSign'\r\n// IMAGE\r\nimport noProfileImg from '../../util/images/noprofileimg2.png'\r\n// REDUX\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { getUserProfile } from '../../redux/actions/UserActions'\r\n// MUI\r\nimport Button from '@material-ui/core/Button'\r\nimport Skeleton from '@material-ui/lab/Skeleton'\r\n\r\nexport default function Profile(props) {\r\n    \r\n    const dispatch = useDispatch()\r\n    const user_id = props.match.params.id\r\n\r\n    const [ showingFollowers, setShowingFollowers ] = useState(true)\r\n    const [ loadingProfile, setLoadingProfile ] = useState(false)\r\n    const [ open, setOpen ] = useState(false)\r\n\r\n    const connectedUser = useSelector(state => state.user.loggedUser)\r\n    const userProfile = useSelector(state => state.profile.profile)\r\n\r\n    const { subscriptions, followers, description, profileImg, username } = userProfile\r\n\r\n    let isLoggedUser = connectedUser._id === user_id\r\n  \r\n    useEffect(() => {\r\n        dispatch(getUserProfile(user_id, setLoadingProfile))   \r\n    }, [dispatch, user_id])\r\n\r\n    const setFollowers = () => {\r\n    setOpen(true)\r\n    setShowingFollowers(true)\r\n    }\r\n\r\n    const setSubscriptions = () => {\r\n        setOpen(true)\r\n        setShowingFollowers(false)\r\n    }\r\n\r\n    let hasPermissions = (followers && followers.find(foll => foll.user_id._id === connectedUser._id)) || !userProfile.private || connectedUser._id === user_id\r\n  \r\n    return (\r\n \r\n        <section className='profile-container'>\r\n\r\n            { isLoggedUser && < AddPost /> }\r\n            <div className='profile-data'>\r\n                <div className='data-container'>\r\n\r\n            { loadingProfile ? \r\n                <div>  \r\n                  <img src={noProfileImg} alt='loading profile' />\r\n                </div>\r\n            \r\n            : < ProfileImg src={profileImg} isLoggedUser={isLoggedUser} />\r\n            } \r\n                <div className='profile-info'>\r\n                        <span style={{display: 'flex', alignItems: 'flex-end' }}> <h1>\r\n                         { loadingProfile ? < Skeleton width={350} animation=\"wave\" /> : <div> {username} </div> } \r\n                         </h1> { connectedUser._id !== user_id && !loadingProfile && < HandleFollow userProfile={userProfile} connectedUser={connectedUser} /> } </span> \r\n                        <div>  \r\n                        { loadingProfile ? \r\n                        <div style={{marginLeft: 50}}> \r\n                            < Skeleton width={350} animation=\"wave\" />\r\n                            < Skeleton width={350} animation=\"wave\" />\r\n                        </div> \r\n\r\n                        : \r\n\r\n                        <p> { description && description } </p> } </div>\r\n                        \r\n                        <div>\r\n                            < SubsFollowersList showingFollowers={showingFollowers} open={open} setOpen={setOpen} userList={showingFollowers ? followers : subscriptions } />\r\n                         </div>     \r\n                    </div>\r\n                    { isLoggedUser && <EditAccountDetails connectedUser={connectedUser} description={description} /> }\r\n                </div>\r\n            </div>\r\n            { !loadingProfile &&\r\n           <div className='profile-button-container'>\r\n                  <Button  \r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                      style={{ background: '#e5e5e5', color: 'black'}}onClick={hasPermissions && setFollowers} >  { followers && followers.length } Seguidores \r\n                  </Button>\r\n                  <Button \r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                      style={{ background: '#e5e5e5', color: 'black'}} onClick={hasPermissions && setSubscriptions}> { subscriptions && subscriptions.length } Seguidos\r\n                  </Button>\r\n           </div>\r\n          }   \r\n                \r\n            <div className='profilePosts-container'> \r\n            { !hasPermissions && !loadingProfile ? <PrivateAccountSign /> : <ProfilePosts user_id={user_id} /> } \r\n           </div>        \r\n        </section>\r\n\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function NotFound() {\r\n    return (\r\n        <div className='notFound-container'>\r\n            <div className='notFound-text-container'>\r\n                <h1> E404</h1>\r\n                <h2>Lo sentimos. La página que buscas no existe.</h2>\r\n                <h2> Volver al <Link to='/Home' style={{textDecoration: 'none'}}> <span> Inicio </span> </Link></h2> \r\n            </div>\r\n            \r\n        </div>\r\n    )\r\n}\r\n","import React,{ useEffect } from 'react'\r\n// ACTIONS\r\nimport { setToken, getConnectedUser } from '../../redux/actions/AuthenticationActions'\r\n// REDUX\r\nimport { useDispatch } from 'react-redux'\r\n// ROUTER\r\nimport { withRouter } from 'react-router-dom'\r\n\r\nfunction Redirecting({ match, history }) {\r\n\r\n    const dispatch = useDispatch()\r\n\r\n useEffect(() => {\r\n     if(match.params.token) {\r\n        setToken(match.params.token)\r\n        dispatch(getConnectedUser(history))\r\n     } \r\n }, [dispatch, history, match.params.token])    \r\n\r\n    return (\r\n        <div>\r\n            <h1 style={{fontFamily: 'Open Sans' }}> Redirigiendo, espera un segundo por favor. </h1>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(Redirecting)\r\n","import React,{ useEffect, useState } from 'react'\r\n// REDUX\r\nimport { useDispatch } from 'react-redux'\r\n// ACTIONS\r\nimport { getUserByToken, updatePassword } from '../../redux/actions/AuthenticationActions'\r\n// FORMIK\r\nimport { Formik, Form } from 'formik'\r\n// MUI\r\nimport Button from '@material-ui/core/Button'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Card from '@material-ui/core/Card'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n// COMPONENTS \r\nimport LoadingAuthentication from '../../components/LoadingAuthentication'\r\n// VALIDATION\r\nimport { resetPassword } from '../../util/ValidationSchema'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    textField: {\r\n      marginBottom: 55,\r\n      height: 40,\r\n      fontSize: 2\r\n  }\r\n  }))\r\n\r\nexport default function ResetPassword(props) {\r\n\r\n    const dispatch = useDispatch()\r\n    const classes = useStyles()\r\n\r\n    const [handleReset, setHandleReset] = useState({\r\n        user: {},\r\n        success: null,\r\n        updated: null\r\n    })\r\n\r\n    useEffect(() => {\r\n        dispatch(getUserByToken(props.match.params.token, setHandleReset, props.history))\r\n    }, [props.match.params.token, setHandleReset, props.history, dispatch])\r\n\r\n    if(handleReset.success === false) return <h1>El token ha expirado, volviendo al inicio.</h1>\r\n\r\n    return (\r\n        <Formik\r\n            enableReinitialize\r\n            initialValues={{ registerPassword: '', confirmPassword: '' }}\r\n            validationSchema={resetPassword}\r\n            onSubmit={(values, { setSubmitting }) => { \r\n               console.log('submitting')\r\n                dispatch(updatePassword(values.registerPassword, handleReset,setHandleReset, setSubmitting, props.history))\r\n            }}\r\n        >\r\n        {({ handleSubmit, isSubmitting, errors, values, touched, handleChange, handleBlur }) => (\r\n        <div  className='form-container'>\r\n\r\n          <Card style={{margin: 'auto',  padding: 40}} elevation={8}>\r\n              <Form style={{ display: 'flex', flexDirection: 'column'}} >\r\n\r\n                <Typography style={{margin: '5px 0px 25px 0px'}}  variant='h4'> Reestablecer Contraseña </Typography>\r\n\r\n                <TextField\r\n                    variant='outlined'\r\n                    className={classes.textField}\r\n                    error={errors.registerPassword || errors.confirmPassword}\r\n                    id='registerPassword'\r\n                    name='registerPassword'\r\n                    type='password'\r\n                    value={values.registerPassword}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    required\r\n                    helperText={(errors.registerPassword || touched.registerPassword) && errors.registerPassword}\r\n                    label='Contraseña'\r\n                />            \r\n                <TextField\r\n                    className={classes.textField}\r\n                    variant='outlined'\r\n                    error={errors.confirmPassword}\r\n                    id='confirmPassword'\r\n                    name='confirmPassword'\r\n                    type='password'\r\n                    value={values.confirmPassword}\r\n                    onChange={handleChange}\r\n                    nBlur={handleBlur}\r\n                    required\r\n                    helperText={(errors.confirmPassword || touched.confirmPassword) && errors.confirmPassword}\r\n                    label='Confirmar Contraseña'\r\n                />                  \r\n                {handleReset.updated && <h1> contraseña reestablecida exitosamente, volvioendo al inicio ...</h1>}\r\n                <Button\r\n                    disabled={isSubmitting}\r\n                    type='submit'\r\n                    onClick={handleSubmit}\r\n                    variant='contained'\r\n                    color='primary'\r\n                    style={{marginTop: 5}}\r\n                >\r\n                 Reestablecer Contraseña\r\n                </Button>\r\n              </Form>\r\n          </Card>\r\n        { isSubmitting && <LoadingAuthentication /> }\r\n        </div>  \r\n        )}\r\n</Formik>\r\n    )\r\n}\r\n","import React,{ useState, useEffect } from 'react'\r\n// REDUX\r\nimport { getPostsFromPage } from '../../../../redux/actions/PostsActions'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n// MUI \r\nimport Card from '@material-ui/core/Card'\r\n\r\nexport default function Pagination() {\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const numberOfPosts = useSelector(state => state.data.numberOfPosts)\r\n    const [ numberOfPages, setNumberOfPages ] = useState(1)\r\n    const [ currentPage, setCurrentPage ] = useState('page-1')\r\n\r\n    let postsPerPage = 8;\r\n    let pagination = []\r\n\r\n    for(let i = 1; i <= numberOfPages; i++) {\r\n        pagination.push(i)\r\n    } \r\n\r\n    useEffect(() => {\r\n    setNumberOfPages(Math.ceil(numberOfPosts / postsPerPage)) \r\n    }, [numberOfPosts, postsPerPage])\r\n\r\n    const handlePagination = (page) => {\r\n\r\n       dispatch(getPostsFromPage(page))\r\n       setCurrentPage(`page-${page}`)\r\n\r\n       let selectedPage = document.getElementById(`page-${page}`)\r\n       selectedPage.classList.add('selected-page')\r\n    }\r\n    \r\n    return (\r\n        <Card className='pagination-container'>\r\n            { pagination.map( (page, key) => \r\n            \r\n            <span className={ currentPage === `page-${page}` ? 'selected-page' : null } id={`page-${page}`} onClick={() => handlePagination(page)} key={key}> {page} </span>\r\n            \r\n            )}\r\n            \r\n        </Card>\r\n    )\r\n}\r\n","import React,{ useEffect, useState } from 'react'\r\n// COMPONENTS\r\nimport Pagination from './components/pagination/Pagination'\r\nimport Post from '../../components/post/Post'\r\n// ACTIONS\r\nimport { getAllPosts } from '../../redux/actions/PostsActions'\r\n// MUI\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n// TYPES\r\nimport { CLEAR_POSTS, ON_EXPLORE, FOCUS_OFF } from '../../redux/reducers/types'\r\n\r\nexport default function Explore() {\r\n\r\n    const [loading, setLoading] = useState(false)\r\n    const dispatch = useDispatch()\r\n    const allPosts = useSelector(state => state.data.allPosts)\r\n\r\n    useEffect(() => {\r\n        dispatch(getAllPosts(setLoading))\r\n        dispatch({ type: ON_EXPLORE })\r\n        return () => {\r\n            dispatch({ type: CLEAR_POSTS })\r\n            dispatch({type: FOCUS_OFF })\r\n        }\r\n    }, [dispatch])\r\n\r\n    if(loading) return ( \r\n        <div style={{width: '100%', display: 'flex', justifyContent:'center', alignItems: 'flex-end', height: 200}}> \r\n            <CircularProgress size={60} color='primary' /> \r\n        </div>\r\n    ) \r\n\r\n    return (\r\n        <div style={{marginTop: 160}}>\r\n            <Pagination /> \r\n            <div className='explorePosts-container'>\r\n                { allPosts.map((post, key) => < Post key={key} post={post} />) }\r\n            </div>   \r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n// REDUX\r\nimport { useSelector } from 'react-redux'\r\n// MUI\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport Collapse from '@material-ui/core/Collapse'\r\nimport ExpandLess from '@material-ui/icons/ExpandLess'\r\nimport ExpandMore from '@material-ui/icons/ExpandMore'\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport Paper from '@material-ui/core/Paper'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: '100%',\r\n    maxWidth: 360,\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  nested: {\r\n    paddingLeft: theme.spacing(4),\r\n  },\r\n}))\r\n\r\nexport default function UserList({ open, searchResults }) {\r\n\r\n  const connectedUser = useSelector(state => state.user.loggedUser)\r\n\r\n  const classes = useStyles() \r\n\r\n  return (\r\n      <> \r\n        {open ? <ExpandLess /> : <ExpandMore />}\r\n  \r\n        <Collapse in={open} timeout=\"auto\" unmountOnExit style={{position: 'absolute', transform: 'translateY(20px)' }}  >\r\n          <Paper  > \r\n          <List style={{maxHeight: 500, width: 260 }}\r\n          component=\"nav\"\r\n          aria-labelledby=\"nested-list-subheader\"\r\n          subheader={\r\n          <ListSubheader component=\"div\" id=\"nested-list-subheader\">\r\n          Usuarios...\r\n          </ListSubheader>\r\n        }\r\n        className={classes.root}>\r\n          {searchResults.filter(user => user._id !== connectedUser._id ).map((user, key) =>\r\n          <div key={key} >\r\n            <Link style={{textDecoration: 'none'}} to={`/users/${user._id}`} >\r\n              <ListItem button className={classes.nested} >\r\n                  <ListItemAvatar>\r\n                    <Avatar\r\n                      src={user.profileImg}\r\n                    />\r\n                  </ListItemAvatar>\r\n                  <ListItemText  secondary={user.username} />\r\n                </ListItem>\r\n            </Link>\r\n          </div>  \r\n          )}\r\n          </List>\r\n          </Paper>\r\n        </Collapse>\r\n      </>\r\n  )\r\n}","import React,{ useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\n// MUI\r\nimport { fade, makeStyles } from '@material-ui/core/styles'\r\nimport InputBase from '@material-ui/core/InputBase'\r\n// ICONS\r\nimport SearchIcon from '@material-ui/icons/Search'\r\n// COMPONENTS\r\nimport UserList from './UserList'\r\n// CUSTOM HOOKS\r\nimport { useDidUpdateEffect } from '../../../customHooks/useDidUpdateEffect'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    search: {\r\n      position: 'relative',\r\n      borderRadius: theme.shape.borderRadius,\r\n      backgroundColor: fade(theme.palette.common.white, 0.15),\r\n      '&:hover': {\r\n        backgroundColor: fade(theme.palette.common.white, 0.25),\r\n      },\r\n      marginLeft: 0,\r\n      width: '100%',\r\n      [theme.breakpoints.up('sm')]: {\r\n        marginLeft: theme.spacing(1),\r\n        width: 'auto',\r\n      },\r\n    },\r\n    searchIcon: {\r\n      width: theme.spacing(7),\r\n      height: '100%',\r\n      position: 'absolute',\r\n      pointerEvents: 'none',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n    },\r\n    inputRoot: {\r\n      color: 'inherit',\r\n    },\r\n    inputInput: {\r\n      padding: theme.spacing(1, 1, 1, 7),\r\n      transition: theme.transitions.create('width'),\r\n      width: 70,\r\n      [theme.breakpoints.up('sm')]: {\r\n        width: 120,\r\n        '&:focus': {\r\n          width: 200,\r\n        },\r\n      },\r\n    },\r\n  }))\r\n\r\nexport default function SearchByUsername() {\r\n\r\n   const classes = useStyles()\r\n\r\n   const [open, setOpen] = useState(false)\r\n   const [filter, setFilter] = useState('')\r\n   const [usersList, setUsersList] = useState([])\r\n   const [searchResults, setSearchResults] = useState([])\r\n   const [typingTimeout, setTypingTimeOut ] = useState(0)\r\n  \r\n   useEffect(() => {\r\n    const results = usersList.filter(user =>\r\n    user.username.toLocaleLowerCase().includes(filter.toLocaleLowerCase()))\r\n    setSearchResults(results)\r\n  }, [usersList, filter])\r\n\r\n  const getAllUsers = async () => {\r\n    const response = await axios.get(`/users/?search=${filter}`)\r\n    setUsersList(response.data)\r\n  } \r\n\r\n  const handleFilter = e => setFilter(e.target.value)\r\n  \r\n  useDidUpdateEffect(() => {\r\n    if(open) { \r\n      typingTimeout && clearTimeout(typingTimeout)\r\n    setTypingTimeOut(setTimeout(() => getAllUsers(filter), 1000))\r\n   }\r\n  },[open, filter])\r\n\r\n    return (\r\n        <div >\r\n            <div className={classes.search} >\r\n                <div className={classes.searchIcon}>\r\n                <SearchIcon />\r\n                </div>\r\n                <InputBase         \r\n                defaultValue=''  \r\n                onChange={handleFilter}\r\n                value={filter}\r\n                onFocus={() =>setOpen(true)}\r\n                onBlur={() => {  \r\n                    setOpen(false)\r\n                    setFilter('')\r\n                }}\r\n                placeholder=\"Buscar...\"\r\n                classes={{\r\n                    root: classes.inputRoot,\r\n                    input: classes.inputInput,\r\n                }}\r\n                inputProps={{ 'aria-label': 'search' }}\r\n                />\r\n              <UserList open={open} setOpen={setOpen} searchResults={searchResults} />\r\n            </div>        \r\n        </div>\r\n    )\r\n}\r\n","import { useRef, useEffect } from 'react'\r\n\r\nexport function useDidUpdateEffect(fn, inputs) {\r\n    const didMountRef = useRef(false)\r\n  \r\n    useEffect(() => {\r\n      if (didMountRef.current)\r\n        fn()\r\n      else\r\n        didMountRef.current = true\r\n    }, inputs)\r\n  }","import React from 'react'\r\n// MUI \r\nimport FavoriteIcon from '@material-ui/icons/Favorite'\r\nimport ChatIcon from '@material-ui/icons/Chat'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\n// ROUTER\r\nimport { Link } from 'react-router-dom'\r\n// MOMENT\r\nimport moment from 'moment'\r\n\r\nexport default function Notification({ notification }) {\r\n    \r\n    const { readed, sender, type, createdAt, senderName, postRef, senderAvatar } = notification\r\n\r\n    let icon = type === 'like' ? ( <FavoriteIcon style={{color: '#DA201E'}}/> ) : (type === 'comment' || 'reply') && ( <ChatIcon style={{color: '#1565C0'}} /> )\r\n    \r\n    let action = type === 'like' ? 'le dio me gusta a tu publicación' : type === 'comment' ? 'ha comentado tu publicación' : type === 'reply' ? 'respondió un comentario tuyo' : type === 'follow' && 'ha comenzado a seguirte' \r\n\r\n    let route = type === 'follow' ? `/users/${sender}` : `/posts/${postRef}`\r\n\r\n    return (\r\n        <div>\r\n          <ListItem button style={{minWidth: 430, backgroundColor: !readed && '#A8A8A8'}} >\r\n        \r\n            <Link to={`/users/${sender}`}> \r\n              <ListItemAvatar >\r\n                <Avatar alt=\"Remy Sharp\" src={senderAvatar} />\r\n              </ListItemAvatar>\r\n            </Link>\r\n\r\n            <Link to={route} style={{textDecoration: 'none'}}>\r\n              <ListItemText\r\n                primary={senderName + ' ' + action}\r\n                secondary={moment(createdAt).startOf('hour').fromNow()}\r\n              />\r\n              <ListItemSecondaryAction>\r\n                {icon}\r\n              </ListItemSecondaryAction>\r\n            </Link>\r\n\r\n          </ListItem>\r\n\r\n          <Divider variant=\"inset\" component=\"li\" />\r\n        </div>\r\n    )\r\n}\r\n","import React,{ useState } from 'react'\r\nimport moment from 'moment'\r\n// REDUX\r\nimport { useDispatch } from 'react-redux'\r\nimport { ignoreRequest, acceptRequest } from '../../../.././../../../redux/actions/UserActions'\r\n// MUI\r\nimport Button from '@material-ui/core/Button'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\n// ROUTER\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function FollowUpRequest({ request }) {\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const [ loading, setLoading ] = useState(false)\r\n\r\n    const { _id, username, profileImg, createdAt } = request.follower_id    \r\n\r\n    const handleIgnore = () => dispatch(ignoreRequest(_id, setLoading))\r\n\r\n    const handleAccept = () => dispatch(acceptRequest(_id, setLoading))\r\n\r\n    return (\r\n        <div> \r\n            <ListItem style={{minWidth: 430}} >\r\n                \r\n                <Link to={`/users/${_id}`}> \r\n                <ListItemAvatar >\r\n                    <Avatar alt='Remy Sharp' src={profileImg} />\r\n                </ListItemAvatar>\r\n                </Link>\r\n               \r\n                <ListItemText\r\n                    primary={username}\r\n                    secondary={moment(createdAt).startOf('hour').fromNow()}\r\n                />\r\n             \r\n                <ListItemSecondaryAction>\r\n                    <Button disabled={loading} variant='contained' onClick={handleAccept} size='small' color='primary' endIcon={ loading && <CircularProgress size='small' /> } > Aceptar </Button>\r\n\r\n                    <Button disabled={loading} variant='contained' onClick={handleIgnore} size='small' color='default' > Ignorar </Button>\r\n                </ListItemSecondaryAction>\r\n            </ListItem>\r\n            <Divider variant='inset' component='li' />\r\n        </div> \r\n    )\r\n}\r\n","import React from 'react'\r\n// MUI\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport PersonIcon from '@material-ui/icons/Person'\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight'\r\nimport Badge from '@material-ui/core/Badge'\r\n\r\nexport default function RequestsHandler({ setShowRequests, requests = [] }) {\r\n    return (\r\n        <ListItem onClick={() => setShowRequests(true)} style={{minWidth: 430, cursor: 'pointer'}} >     \r\n        <ListItemAvatar style={{display: 'flex', alignItems: 'center', marginLeft: 10}} >\r\n            <Badge \r\n                badgeContent={requests.length}\r\n                color='secondary'\r\n                max={999}\r\n                anchorOrigin={{\r\n                  vertical: 'top',\r\n                  horizontal: 'left',\r\n                }}\r\n            >\r\n              <PersonIcon/>\r\n            </Badge>\r\n        </ListItemAvatar>\r\n    \r\n        <ListItemText\r\n            primary='Solicitudes de seguidores'\r\n            secondary='Aprueba o ignora las Solicitudes'\r\n        />\r\n\r\n        <ListItemSecondaryAction onClick={()=> setShowRequests(true)} style={{cursor: 'pointer'}}>\r\n              <ChevronRightIcon />\r\n        </ListItemSecondaryAction>\r\n    </ListItem>\r\n    )\r\n}\r\n","import React,{ useState, useEffect } from 'react'\r\n// REDUX \r\nimport { useDispatch, useSelector } from 'react-redux'\r\n// MUI\r\nimport ToolTip from '@material-ui/core/Tooltip'\r\nimport NotificationsActiveIcon from '@material-ui/icons/NotificationsActive'\r\nimport Menu from '@material-ui/core/Menu'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport Badge from '@material-ui/core/Badge'\r\n// ICONS\r\nimport IconButton from '@material-ui/core/IconButton'\r\n// ACTIONS\r\nimport { getUserNotifications, markNotificationsAsReaded } from '../../../../../../redux/actions/NotificationActions'\r\n// COMPONENTS\r\nimport Notification from './components/Notification'\r\nimport FollowUpRequest from './components/FollowUpRequest'\r\nimport RequestsHandler from './components/RequestsHandler'\r\n\r\nfunction Notifications () {\r\n\r\nconst dispatch = useDispatch() \r\n\r\nconst notifications = useSelector(state => state.notifications.notifications)\r\nconst requests = useSelector(state => state.user.loggedUser.followUpRequests)\r\n\r\nconst [ anchorEl, setAnchorEl ] = useState(null)\r\nconst [ showRequests, setShowRequests ] = useState(false) \r\n\r\nuseEffect(() => { dispatch(getUserNotifications()) }, [dispatch])\r\n\r\nconst handleOpen = event => setAnchorEl(event.target)\r\n\r\nconst handleClose = () => {\r\n  setShowRequests(false)\r\n  setAnchorEl(null)\r\n}\r\n\r\nconst onMenuOpened = () => {\r\n  let unreadedNotifications = notifications.filter((notif) => !notif.readed).map((notif) => notif._id)\r\n  unreadedNotifications.length > 0 && dispatch(markNotificationsAsReaded(unreadedNotifications)) \r\n}\r\n\r\n    return (\r\n          <div>\r\n              <ToolTip placement=\"top\" title=\"Notificaciones\">\r\n                <IconButton\r\n                  aria-owns={anchorEl ? 'simple-menu' : undefined}\r\n                  aria-haspopup=\"true\"\r\n                  onClick={handleOpen}\r\n                >\r\n                  <Badge \r\n                      badgeContent={notifications.filter(not => not.readed === false).length}\r\n                      color='secondary'\r\n                      max={999}\r\n                      anchorOrigin={{\r\n                        vertical: 'top',\r\n                        horizontal: 'left',\r\n                      }}\r\n                  >\r\n                    <NotificationsActiveIcon style={{color: '#888888'}}/>\r\n                  </Badge>\r\n                </IconButton>\r\n              </ToolTip>\r\n              <Menu\r\n                style={{padding: 0, maxHeight: 300 }}\r\n                anchorEl={anchorEl}\r\n                open={Boolean(anchorEl)}\r\n                onClose={handleClose}\r\n                onEntered={onMenuOpened}\r\n                disableScrollLock={true}\r\n                MenuListProps={{ disablePadding: false}}\r\n                getContentAnchorEl={null}\r\n                anchorOrigin={{ vertical: \"bottom\", horizontal: \"left\" }}\r\n                transformOrigin={{horizontal: \"right\", vertical: 'top' }}\r\n                keepMounted\r\n              >\r\n              { showRequests && requests.map((req) => <FollowUpRequest key={req._id} request={req} />) }\r\n              { requests && requests.length > 0 && !showRequests && <RequestsHandler setShowRequests={setShowRequests} requests={requests}/> }           \r\n              \r\n              { notifications.length > 0 ? <div> { notifications.filter(not => not.type !== 'followRequest').map((not) => <Notification key={not._id} notification={not} />) } </div>\r\n\r\n              :    \r\n\r\n              <MenuItem onClick={handleClose}>\r\n                No tienes notificaciones\r\n              </MenuItem>\r\n\r\n              }\r\n              </Menu>\r\n          </div>\r\n    )\r\n}\r\n\r\nexport default Notifications\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  \r\n    ","import axios from \"axios\"\r\nimport { SET_NOTIFICATIONS, MARK_NOTIFICATIONS_AS_READED } from \"../reducers/types\"\r\n\r\nexport const getUserNotifications = () => async (dispatch) => {\r\ntry {\r\n    const response = await axios.get('/notifications')\r\n    dispatch({type: SET_NOTIFICATIONS, payload: response.data })\r\n    \r\n} catch (error) {\r\n    console.log(error)\r\n}\r\n}\r\n\r\nexport const markNotificationsAsReaded = (notifications) => async (dispatch) => {\r\n    try {\r\n         await axios.patch('/notifications/read', notifications)\r\n         dispatch({ type: MARK_NOTIFICATIONS_AS_READED })\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}","import React from 'react'\r\n// MUI\r\nimport PublicIcon from '@material-ui/icons/Public'\r\nimport HomeIcon from '@material-ui/icons/Home'\r\n// COMPONENTS\r\nimport Notifications from './components/notifications/Notifications'\r\nimport Avatar from '../../../Avatar'\r\n// ROUTER\r\nimport { Link } from 'react-router-dom'\r\n// REDUX\r\nimport { useSelector } from 'react-redux'\r\n// UTIL\r\nimport noProfileImg from '../../../../util/images/noprofileimg2.png'\r\n\r\nexport default function NavbarButtons() {\r\n    \r\n  const loggedUser = useSelector(state => state.user.loggedUser)\r\n  const loading = useSelector(state => state.user.loading)\r\n  const onHome = useSelector(state => state.UI.onHome)\r\n  \r\n  return (\r\n        <div className='navbar-buttons'>\r\n\r\n            <Notifications />\r\n\r\n            <Link to={'/home'}>    \r\n                  < HomeIcon style={{color: onHome ? 'white' : '#888888' }} />\r\n            </Link>\r\n\r\n            <Link to={'/explore'}>  \r\n                  < PublicIcon style={{color: onHome === false ? 'white' : '#888888', margin: '0px 8px'}} />\r\n            </Link>\r\n\r\n          { loading ?\r\n\r\n              <Avatar \r\n                  alt='no-profile' \r\n                  src={noProfileImg} \r\n                  width={40}\r\n                  height={40}\r\n              /> \r\n          :\r\n              <Link to={`/users/${loggedUser._id}`}>\r\n                  <Avatar\r\n                      alt='profile' \r\n                      src={loggedUser.profileImg}\r\n                      width={40}\r\n                      height={40}\r\n                      pointer\r\n                  />\r\n              </Link>\r\n          }\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\n// MUI\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport MenuIcon from '@material-ui/icons/Menu'\r\n// COMPONENTS\r\nimport Notifications from './navbar-buttons/components/notifications/Notifications'\r\n// REDUX\r\nimport { OPEN_MENU } from '../../../redux/reducers/types'\r\nimport { useDispatch } from 'react-redux'\r\n\r\n\r\nexport default function OpenMenuButton() {\r\n\r\n    const dispatch = useDispatch()\r\n\r\n\r\n    return (\r\n        <div className='open-menu-button'>\r\n            <Notifications />\r\n            <IconButton\r\n                onClick={() => dispatch({type: OPEN_MENU })}\r\n                color=\"inherit\"\r\n                aria-label=\"open drawer\"\r\n                edge=\"start\"\r\n            >\r\n                <MenuIcon />\r\n             </IconButton>\r\n      </div>\r\n    )\r\n}\r\n","import React,{ useState } from 'react'\r\n// ROUTER \r\nimport { Link } from 'react-router-dom'\r\n// MUI\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Drawer from '@material-ui/core/Drawer'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport Button from '@material-ui/core/Button'\r\n// ICONS\r\nimport PublicIcon from '@material-ui/icons/Public'\r\nimport HomeIcon from '@material-ui/icons/Home'\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp'\r\n// REDUX\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n// ACTIONS\r\nimport { logOutUser } from '../../../redux/actions/AuthenticationActions'\r\n// TYPES\r\nimport { CLOSE_MENU } from '../../../redux/reducers/types'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n      width: '100%',\r\n      maxWidth: 360,\r\n      backgroundColor: theme.palette.background.paper,\r\n    },\r\n    nested: {\r\n      paddingLeft: theme.spacing(4),\r\n    },\r\n  }))\r\n\r\nexport default function DrawerNavigator() {\r\n\r\n    const [ open, setOpen ] = useState(false)\r\n    const dispatch = useDispatch()\r\n    const openMenu = useSelector(state => state.UI.openMenu)\r\n    const loggedUser = useSelector(state => state.user.loggedUser)\r\n    \r\n    const classes = useStyles()\r\n\r\n    const handleLogOut = () => {\r\n        dispatch({type: CLOSE_MENU})\r\n        dispatch(logOutUser())\r\n    }\r\n    \r\n    return (\r\n      <Drawer style={{width: '70%'}} color='secondary' open={openMenu} onClose={() => dispatch( { type: CLOSE_MENU } )}>\r\n        \r\n          <Link style={{margin: 0, padding: 0, display: 'flex'}} onClick={() => dispatch({type: CLOSE_MENU })} to={`/users/${loggedUser._id}`}>\r\n            <img src={loggedUser.profileImg} style={{width: 100, height: 100, margin: '5px auto', borderRadius: '50%'}} />\r\n          </Link>  \r\n         \r\n          <List\r\n            component=\"nav\"\r\n            aria-labelledby=\"nested-list-subheader\"\r\n            className={classes.root}\r\n          > \r\n            <Link style={{textDecoration: 'none'}} onClick={() => dispatch({type: CLOSE_MENU})} to='/Home'>\r\n                <ListItem button className={classes.nested}>\r\n                    <ListItemIcon> <HomeIcon /> </ListItemIcon>\r\n                    <ListItemText primary='Home' />\r\n                </ListItem>\r\n            </Link>\r\n\r\n                <Divider />\r\n\r\n            <Link style={{textDecoration: 'none'}} onClick={() => dispatch({type: CLOSE_MENU})} to='/Explore'>    \r\n                <ListItem button className={classes.nested}>\r\n                    <ListItemIcon> <PublicIcon /> </ListItemIcon>\r\n                    <ListItemText primary='Explorar' />\r\n                </ListItem>\r\n            </Link>    \r\n\r\n                <Divider />\r\n\r\n                <ListItem button onClick={() => setOpen(true)} className={classes.nested}>\r\n                    <ListItemIcon> <ExitToAppIcon/> </ListItemIcon>\r\n                    <ListItemText primary='Cerrar Sesión' />\r\n                </ListItem>\r\n          </List>\r\n\r\n          <Dialog open={open} onClose={() => setOpen(false)} fullWidth maxWidth=\"sm\" >\r\n                \r\n                <DialogTitle> Estas Seguro de que quieres desconectarte ? </DialogTitle>\r\n\r\n                <DialogActions>\r\n                    <Button onClick={handleLogOut} variant='contained' color=\"primary\">\r\n                      Si \r\n                    </Button>\r\n                    <Button onClick={() => setOpen(false)} variant='contained' color=\"secondary\">\r\n                      Cancelar\r\n                    </Button> \r\n                </DialogActions>\r\n         </Dialog>\r\n      </Drawer>\r\n    )\r\n}\r\n","import React from 'react'\r\n// MUI\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\n// ICONS\r\nimport NearMeIcon from '@material-ui/icons/NearMe'\r\n// COMPONENTS\r\nimport SearchByUsername from './components/SearchByUsername'\r\nimport NavbarButtons from './components/navbar-buttons/NavbarButtons'\r\nimport OpenMenuButton from './components/OpenMenuButton'\r\nimport DrawerNavigator from './components/DrawerNavigator'\r\n// ROUTER\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function Navbar() {\r\n  \r\n  return (\r\n        <nav>\r\n          <AppBar>\r\n            <Toolbar style={{display: 'flex', justifyContent: 'space-between'}}>\r\n              <Link to='/home'>\r\n                   <NearMeIcon \r\n                   fontSize='large'\r\n                   style={{color: 'white'}}\r\n                   />\r\n              </Link>\r\n              <SearchByUsername />\r\n              <NavbarButtons />\r\n              <OpenMenuButton />      \r\n              <DrawerNavigator/>\r\n            </Toolbar>\r\n          </AppBar>\r\n        </nav>\r\n  )\r\n}\r\n","import React, { useEffect } from 'react'\nimport axios from 'axios'\n// ROUTES\nimport { Switch, Route, withRouter } from 'react-router-dom'\nimport ProtectedRoute from './hoc/ProtectedRoutes'\nimport RestrictedRoute from './hoc/RestrictedRoutes'\n// REDUX\nimport { logOutUser } from './redux/actions/AuthenticationActions'\nimport { useDispatch, useSelector } from 'react-redux'\n//PAGES\nimport Register from './pages/register/Register'\nimport Home from './pages/home/Home'\nimport Login from './pages/login/Login'\nimport FullPost from './pages/fullpost/FullPost'\nimport Profile from './pages/profile/Profile'\nimport NotFound from './pages/notfound/NotFound'\nimport Redirecting from './pages/Redirecting/Redirecting'\nimport ResetPassword from './pages/reset-password/ResetPassword'\nimport Explore from './pages/explore/Explore'\n// COMPONENTS\nimport Navbar from './components/navbar/Navbar'\n// ACTIONS\nimport { getConnectedUser } from './redux/actions/AuthenticationActions'\nimport decodeToken from './util/jwtDecode'\n// TYPES \nimport { AUTHENTICATED, SET_NEW_NOTIFICATION, ADD_REQUEST } from './redux/reducers/types'\n\naxios.defaults.baseURL = 'https://clonetagram.herokuapp.com/api' \n\n function App({ history }) {\n\n  const authenticated = useSelector(state => state.user.authenticated)\n  const socket = useSelector(state => state.user.userSocket)\n  const dispatch = useDispatch() \n\n  let token = localStorage.getItem('x-auth-token')\n\n  if(token) {    \n\n  const { decoded, invalidToken } = decodeToken(token)\n  axios.defaults.headers.common['Authorization'] = token   \n\n    if(!invalidToken) { \n      if(!authenticated) {\n        dispatch({type: AUTHENTICATED })\n        dispatch(getConnectedUser(history))\n      } else {\n        decoded.exp * 1000 < Date.now() && dispatch(logOutUser()) \n      }\n    } \n  }\n\n  useEffect(() => {\n    if(socket) {\n\n      socket.on('NEW_NOTIFICATION', (payload) => payload.type === 'followRequest' ? dispatch({type: ADD_REQUEST, payload }) : dispatch({ type: SET_NEW_NOTIFICATION, payload }))\n    \n    }\n    \n  }, [socket, dispatch])\n\n  // RESTRICTED: RUTAS INACCESIBLES UNA VEZ AUTENTICADO\n  // PROTECTED: RUTAS INACCESIBLES AL NO ESTAR AUTENTICADO\n  return (\n    <> \n        { authenticated && <Navbar history={history} /> } \n        <Switch>\n          <RestrictedRoute exact path='/Register' component={Register} />\n          <ProtectedRoute exact path=\"/Home\"       component={Home} />\n          <RestrictedRoute exact path='/'          component={Login} />\n          <ProtectedRoute exact path='/users/:id'  component={Profile} />\n          <ProtectedRoute exact path='/posts/:id'  component={FullPost} />\n          <RestrictedRoute exact path='/redirecting/:token' component={Redirecting} />\n          <RestrictedRoute exact path='/resetPassword/:token' component={ResetPassword} />\n          <ProtectedRoute exact path='/explore' component={Explore} />\n          <Route exact path='*' component={NotFound} /> \n        </Switch>  \n    </>\n  )\n}\n\nexport default withRouter(App)","import JwtDecode from 'jwt-decode'\r\n\r\nexport default function decodeToken(token) {\r\n  \r\n  let decoded = {}\r\n  let invalidToken = false\r\n\r\n  try {\r\n    decoded = JwtDecode(token)\r\n  } catch (err) {\r\n      if(err) {\r\n        invalidToken = true\r\n        localStorage.removeItem('x-auth-token')\r\n      } \r\n  }\r\n  return { decoded, invalidToken }\r\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { \r\n    AUTHENTICATED,\r\n    SET_ERRORS, \r\n    LOADING, \r\n    LOADED,\r\n    USER_LOGGED, \r\n    UNAUTHENTICATED,\r\n    CLEAR_ERRORS, \r\n    CHANGE_PRIVACY,\r\n    SET_PASSWORD_AS_FALSE,\r\n    SET_PASSWORD_AS_TRUE,\r\n    SET_USER_SOCKET,\r\n    SET_UPDATED_USERS,\r\n    SET_NEW_IMAGE,\r\n    DELETE_REQUEST,\r\n    FOLLOW_USER,\r\n    UNFOLLOW_USER,\r\n    ADD_REQUEST\r\n} from './types'\r\n\r\nconst initialState = {\r\n    loggedUser: {},\r\n    authenticated: false,\r\n    userHasPassword: null,\r\n    loading: false,\r\n    errors: '',\r\n    userSocket: ''\r\n}\r\n\r\nexport default function (state = initialState, action) {\r\n    switch(action.type) {\r\n        case AUTHENTICATED:\r\n            return {\r\n                ...state,\r\n                authenticated: true\r\n            }\r\n        case UNAUTHENTICATED: \r\n            return {\r\n                ...state,\r\n                authenticated: false\r\n            }\r\n        case LOADING: \r\n            return {\r\n                ...state,\r\n                loading: true\r\n            }\r\n        case LOADED:\r\n            return {\r\n                ...state,\r\n                loading: false\r\n            }\r\n        case USER_LOGGED: {\r\n            return {\r\n                ...state,\r\n                loggedUser: { ...action.payload }\r\n            }\r\n        }\r\n        case SET_ERRORS: \r\n        return {\r\n            ...state,\r\n            errors: action.payload \r\n        }\r\n        case CLEAR_ERRORS: \r\n            return {\r\n                ...state,\r\n                errors: ''\r\n            }\r\n        case SET_PASSWORD_AS_TRUE:\r\n            return {\r\n                ...state,\r\n                userHasPassword: true\r\n            }\r\n        case SET_PASSWORD_AS_FALSE:\r\n            return {\r\n                ...state,\r\n                userHasPassword: false\r\n            }\r\n        case CHANGE_PRIVACY:\r\n            return {\r\n                ...state,\r\n                loggedUser: { ...state.loggedUser, private: !state.loggedUser.private }\r\n            }\r\n        case SET_USER_SOCKET:\r\n            return {\r\n                ...state,\r\n                userSocket: action.payload\r\n            }\r\n        case SET_UPDATED_USERS: \r\n            return {\r\n                ...state,\r\n                loggedUser: { ...state.loggedUser, ...action.payload.follower }\r\n            }\r\n        case SET_NEW_IMAGE: \r\n            return {\r\n                ...state,\r\n                loggedUser: { ...state.loggedUser, profileImg: action.payload.profileImage }\r\n            }\r\n        case DELETE_REQUEST: \r\n            return {\r\n                ...state,\r\n                loggedUser: { ...state.loggedUser, followUpRequests: state.loggedUser.followUpRequests.filter(req => req.follower_id._id !== action.payload)}\r\n            }\r\n        case FOLLOW_USER: \r\n        let { _id } = action.payload.userProfile\r\n            return {\r\n                ...state,\r\n                loggedUser: { ...state.loggedUser, subscriptions: [ { user_id: { _id  }} , ...state.loggedUser.subscriptions ]}\r\n            }\r\n        case UNFOLLOW_USER:\r\n            return {\r\n                ...state,\r\n                loggedUser: { ...state.loggedUser, subscriptions: state.loggedUser.subscriptions.filter(sub => sub.user_id._id !== action.payload.user_id) }\r\n            }\r\n        case ADD_REQUEST: {\r\n            console.log(action.payload)\r\n         let { sender, senderName, senderAvatar, createdAt } = action.payload\r\n\r\n         let newRequest = {\r\n             _id: sender,\r\n             username: senderName,\r\n             profileImg: senderAvatar,\r\n             createdAt\r\n         }\r\n            return {\r\n                ...state,\r\n                loggedUser: {...state.loggedUser, followUpRequests: [ { follower_id: newRequest }, ...state.loggedUser.followUpRequests]}\r\n            }\r\n        }\r\n        default: return state\r\n    }\r\n}","import { CLEAR_POSTS,\r\n         GET_ALL_POSTS, \r\n         SET_SELECTED_POSTS, \r\n         SET_NEW_POST,\r\n         DELETE_POST,\r\n         SET_SUBSCRIPTIONS_POSTS, \r\n         SET_POST,\r\n         SET_LIKES,\r\n         SET_DISLIKE, \r\n         SET_NEW_SUBSCRIPTIONS_POSTS, \r\n         SET_NEW_IMAGE } from './types'\r\n\r\nconst initialState = {\r\n    numberOfPosts : '',\r\n    allPosts: [],\r\n    selectedPosts: [],\r\n    selectedPost: {}\r\n}\r\n\r\nexport default function (state = initialState, action) {\r\n    switch(action.type) {\r\n        case GET_ALL_POSTS:\r\n            return {\r\n                ...state,\r\n                allPosts: [...action.payload.posts ],\r\n                selectedPost: {},\r\n                numberOfPosts: action.payload.numberOfPosts\r\n            }\r\n        case SET_SELECTED_POSTS:\r\n            return {\r\n                ...state,\r\n                selectedPosts: [ ...action.payload ]\r\n            }\r\n        case SET_NEW_POST:\r\n            return {\r\n                ...state,\r\n                allPosts: [ { ...action.payload }, ...state.allPosts ],\r\n                selectedPosts: [ { ...action.payload }, ...state.selectedPosts ]\r\n            }\r\n        case DELETE_POST:\r\n            return {\r\n                ...state,\r\n                allPosts: state.allPosts.filter(post => post._id !== action.payload),\r\n                selectedPosts: state.selectedPosts.filter(post => post._id !== action.payload),\r\n                selectedPost: ''\r\n            }\r\n        case SET_SUBSCRIPTIONS_POSTS: \r\n        console.log('overwrite')\r\n            return {\r\n                ...state,\r\n                allPosts: [...action.payload]\r\n            }\r\n        case SET_NEW_SUBSCRIPTIONS_POSTS: \r\n        console.log('pushing new ones')\r\n            return { \r\n                ...state,\r\n                allPosts: [ ...state.allPosts, ...action.payload ] \r\n            }\r\n        case CLEAR_POSTS:\r\n            return {\r\n                ...state,\r\n                allPosts: []\r\n            }\r\n        case SET_POST:\r\n            return {\r\n                ...state,\r\n                selectedPost: { ...action.payload }\r\n            }   \r\n        case SET_LIKES:\r\n        case SET_DISLIKE: \r\n            return {\r\n                 ...state,\r\n             allPosts: state.allPosts.map(post => {\r\n                if (post._id === action.payload._id) {\r\n                  return {...post, likes: [...action.payload.likes]}\r\n                };\r\n                return post;\r\n              }),\r\n             selectedPosts: state.selectedPosts.map(post => {\r\n                 if(post._id === action.payload._id) {\r\n                     return {...post, likes: [...action.payload.likes ]}\r\n                 }\r\n                 return post;\r\n             }),\r\n             selectedPost: {...state.selectedPost, likes: [...action.payload.likes]}\r\n            }   \r\n        case SET_NEW_IMAGE:\r\n            return {\r\n                ...state,\r\n                selectedPosts: state.selectedPosts.map(post => { \r\n                    if(post.userRef._id === action.payload.id) {\r\n                        return { ...post, userRef: { ...post.userRef, profileImg: action.payload.profileImage } }\r\n                    }\r\n                    return post\r\n                })\r\n            }\r\n        default: return state\r\n    }\r\n}","import {CLOSE_SINGLE_POST,\r\n        ON_SINGLE_POST,\r\n        ON_HOME,\r\n        ON_EXPLORE,\r\n        FOCUS_OFF,\r\n        CHANGING_PROFILE_IMAGE,\r\n        PROFILE_IMAGE_CHANGED,\r\n        OPEN_MENU,\r\n        CLOSE_MENU\r\n     } from './types'\r\n\r\nconst initialState = {\r\n    loading: false,\r\n    onSinglePost: false,\r\n    onHome: null,\r\n    changingProfileImage: false,\r\n    openMenu: false\r\n}\r\n\r\nexport default function(state = initialState, action) {\r\n    switch(action.type) {\r\n    case ON_SINGLE_POST:\r\n        return {\r\n            ...state,\r\n            onSinglePost: true\r\n        }\r\n    case CLOSE_SINGLE_POST:\r\n        return {\r\n            ...state,\r\n            onSinglePost: false\r\n        }\r\n    case ON_HOME: \r\n        return {\r\n            ...state,\r\n            onHome: true\r\n        }\r\n    case ON_EXPLORE:\r\n        return {\r\n            ...state,\r\n            onHome: false\r\n        }\r\n    case FOCUS_OFF: \r\n        return {\r\n            ...state,\r\n            onHome: null\r\n        }\r\n    case CHANGING_PROFILE_IMAGE:\r\n        return {\r\n            ...state,\r\n            changingProfileImage: true\r\n        }\r\n    case PROFILE_IMAGE_CHANGED:\r\n        return {\r\n            ...state,\r\n            changingProfileImage: false\r\n        }\r\n    case OPEN_MENU:\r\n        console.log('WORKINGs')\r\n        return {\r\n            ...state,\r\n            openMenu: true\r\n        }\r\n    case CLOSE_MENU:\r\n        return {\r\n            ...state,\r\n            openMenu: false\r\n        }\r\n    default: return state\r\n    }\r\n\r\n}","// TYPES\r\nimport { SET_POST_COMMENTS, SET_REPLIES, SET_NEW_COMMENT, DELETE_COMMENT, DELETE_REPLY } from './types'\r\n\r\nconst initialState = { \r\n    comments: []\r\n}\r\nexport default function (state = initialState, action) {\r\n    switch(action.type) {\r\n    case SET_POST_COMMENTS: \r\n        return {\r\n            comments: [ ...action.payload ] \r\n        }   \r\n    case SET_REPLIES: {\r\n        console.log(action.payload)\r\n        return {\r\n            comments: state.comments.map(comment => {\r\n                if(comment._id === action.payload._id) {\r\n                    return comment = action.payload\r\n                }\r\n                return comment\r\n            })\r\n        }\r\n    }\r\n    case SET_NEW_COMMENT: \r\n        return {\r\n            comments: [...state.comments, action.payload]\r\n        }\r\n    case DELETE_COMMENT: \r\n        return { \r\n            comments: state.comments.filter(comment => comment._id !== action.payload)\r\n        }\r\n    case DELETE_REPLY:\r\n        return {\r\n            comments: state.comments.map(comment => {\r\n                if(comment._id === action.payload.comment_id) {\r\n                    return { ...comment, replies: comment.replies.filter(reply => reply._id !== action.payload.reply_id)}\r\n                }\r\n                return comment\r\n            })\r\n        }\r\n    default: return state\r\n}\r\n}","// TYPES\r\nimport { SET_SELECTED_PROFILE, SET_UPDATED_USERS, SET_NEW_IMAGE, ADD_TO_REQUESTS, FOLLOW_USER, UNFOLLOW_USER } from './types'\r\n\r\nconst initialState = { \r\n    profile: {}\r\n}\r\n\r\nexport default function (state = initialState, action) {\r\n    switch(action.type) {\r\n        case SET_SELECTED_PROFILE: \r\n        return {\r\n            profile: { ...action.payload }\r\n        }\r\n        case SET_UPDATED_USERS: \r\n            return {\r\n                profile: { ...state.profile, ...action.payload.followed }\r\n            }\r\n        case SET_NEW_IMAGE: \r\n            return {\r\n                profile: { ...state.profile, profileImg: action.payload.profileImage }\r\n            }\r\n        case ADD_TO_REQUESTS:\r\n            let { _id } = action.payload.connectedUser\r\n            return {\r\n                profile: { ...state.profile, followUpRequests: [ { follower_id: {  _id } } ,...state.profile.followUpRequests]}\r\n            }\r\n        case FOLLOW_USER: {\r\n            let { _id, username, profileImg } = action.payload.connectedUser\r\n            return {\r\n                profile: { ...state.profile, followers: [ { user_id: { _id, username, profileImg } }, ...state.profile.followers ]}\r\n            }\r\n        }\r\n        case UNFOLLOW_USER: \r\n            return {\r\n                profile: { ...state.profile, followers: state.profile.followers.filter(foll => foll.user_id._id !== action.payload._id)}\r\n            }\r\n        default: return state\r\n    }\r\n}","import { SET_NOTIFICATIONS, SET_NEW_NOTIFICATION, MARK_NOTIFICATIONS_AS_READED } from './types'\r\nconst initialState = { \r\n    notifications: []\r\n}\r\n\r\nexport default function (state = initialState, action) {\r\n    switch(action.type) {\r\n        case SET_NOTIFICATIONS: \r\n            return {\r\n                notifications: action.payload\r\n            }\r\n        case SET_NEW_NOTIFICATION:\r\n            console.log(action.payload)\r\n            return {\r\n                notifications: [action.payload, ...state.notifications]\r\n            }\r\n        case MARK_NOTIFICATIONS_AS_READED: \r\n        console.log('EXEC')\r\n            return {\r\n                notifications: state.notifications.map(notif => { return { ...notif, readed: true } }) \r\n            }\r\n    default: return state\r\n}\r\n}","// REDUX\r\nimport thunk from 'redux-thunk'\r\nimport { createStore, combineReducers, applyMiddleware } from 'redux'\r\n// REDUCERS\r\nimport AuthenticationReducer from '../reducers/AuthenticationReducer'\r\nimport PostsReducer from '../reducers/PostsReducer'\r\nimport UIReducer from '../reducers/UIReducer'\r\nimport CommentsReducer from '../reducers/CommentsReducer'\r\nimport ProfileReducer from '../reducers/ProfileReducer'\r\nimport NotificationsReducer from '../reducers/NotificationsReducer'\r\n\r\nconst reducers = combineReducers ({\r\n    notifications: NotificationsReducer,\r\n    comments : CommentsReducer,\r\n    profile: ProfileReducer,\r\n    user: AuthenticationReducer,\r\n    data: PostsReducer,\r\n    UI: UIReducer\r\n})\r\n\r\nconst Store = createStore(reducers, applyMiddleware(thunk) )\r\n\r\nexport default Store","import { createMuiTheme } from '@material-ui/core/styles'\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n        light: '#484848',\r\n        main: '#212121',\r\n        dark: '#000000',\r\n        contrastText: '#ffffff',\r\n      },\r\n      secondary: {\r\n        light: '#e5e5e5',\r\n        main: '#1565c0',\r\n        dark: '#003c8f',\r\n        contrastText: '#ffffff',\r\n      },\r\n  },\r\n})\r\n\r\nexport default theme\r\n\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n// REDUX\nimport { Provider } from 'react-redux'\nimport Store from './redux/store/Store'\nimport './index.scss'\n// MUI \nimport { ThemeProvider } from '@material-ui/styles'\nimport theme from './util/MuiTheme'\n// ROUTER\nimport { HashRouter } from 'react-router-dom'\n\nReactDOM.render(\n  <HashRouter> \n    <ThemeProvider theme={theme}>  \n      <Provider store={Store}> \n          <App /> \n      </Provider>\n    </ThemeProvider>\n  </HashRouter>    \n, document.getElementById('root'))\n\nserviceWorker.unregister()\n"],"sourceRoot":""}