(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,a){e.exports=a.p+"static/media/noprofileimg2.a77a9fc1.png"},126:function(e,t,a){e.exports=a.p+"static/media/landing-image.5c621457.jpg"},200:function(e,t,a){e.exports=a.p+"static/media/image-preview.df803060.png"},202:function(e,t,a){e.exports=a.p+"static/media/googleLogo.cc4a562f.webp"},235:function(e,t,a){e.exports=a(297)},289:function(e,t){},296:function(e,t,a){},297:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),o=a.n(c),l=a(11),s=a.n(l),i=a(72),u=a(2),m=a(5);function d(e){var t=e.component,a=e.path,n=Object(u.a)(e,["component","path"]),c=Object(m.c)((function(e){return e.user.authenticated}));return r.a.createElement(i.b,Object.assign({path:a},n,{render:function(e){return c?r.a.createElement(t,e):r.a.createElement(i.a,{to:"/"})}}))}function p(e){var t=e.component,a=e.path,n=Object(u.a)(e,["component","path"]),c=Object(m.c)((function(e){return e.user.authenticated}));return r.a.createElement(i.b,Object.assign({path:a},n,{render:function(e){return c?r.a.createElement(i.a,{to:"/Home"}):r.a.createElement(t,e)}}))}var f=a(9),E=a(7),b=a.n(E),g=a(192),v=a.n(g);function h(e){return function(t){var a;return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:a=v()("https://clonetagram.herokuapp.com/"),t({type:"SET_USER_SOCKET",payload:a}),a.emit("SET_USER_ID",e);case 3:case"end":return n.stop()}}))}}var y=function(e){localStorage.setItem("x-auth-token",e),s.a.defaults.headers.common.Authorization=localStorage.getItem("x-auth-token")};function O(e){return function(t){var a;return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t({type:"LOADING"}),n.next=4,b.a.awrap(s.a.get("/users/me"));case 4:a=n.sent,t({type:"USER_LOGGED",payload:a.data}),t({type:"LOADED"}),t({type:"AUTHENTICATED"}),t(h(a.data._id)),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),"invalid token"===n.t0.response.data.msg&&(t({type:"UNAUTHENTICATED"}),localStorage.removeItem("x-auth-token"),e.push("/"));case 14:case"end":return n.stop()}}),null,null,[[0,11]])}}function S(){return function(e){return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:localStorage.removeItem("x-auth-token"),delete s.a.defaults.headers.common.Authorization,e({type:"UNAUTHENTICATED"});case 3:case"end":return t.stop()}}))}}function j(e,t,a){return function(n){var r;return b.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,b.a.awrap(s.a.post("/user/checkEmail",e));case 3:r=c.sent,t(!1),n({type:"CLEAR_ERRORS"}),r.data.hasPassword?n({type:"SET_PASSWORD_AS_TRUE"}):(n({type:"SET_PASSWORD_AS_FALSE"}),a(!0)),c.next=14;break;case 9:c.prev=9,c.t0=c.catch(0),t(!1),console.log(c.t0),n({type:"SET_ERRORS",payload:c.t0.response.data.error});case 14:case"end":return c.stop()}}),null,null,[[0,9]])}}var w=a(57),_=a(12),x=a(345),C=a(53),P=a(370),k=a(339),T=a(48),N=T.c().email("Correo Electr\xf3nico inv\xe1lido").required("Coloca tu Correo electr\xf3nico"),L=T.c().required("Contrase\xf1a Requerida").min(6,"Contrase\xf1a demasiado corta.").max(18,"Contrase\xf1a demasiado larga").matches(/^\S*$/,"La contrase\xf1a no puede contener espacios").matches(/[a-z]/,"Debe contener al menos una letra min\xfascula").matches(/[A-Z]/,"Debe contener al menos una letra may\xfascula"),R=T.c().required("Contrase\xf1a Requerida").min(6,"Contrase\xf1a demasiado corta.").max(18,"Contrase\xf1a demasiado larga"),I=T.c().oneOf([T.b("registerPassword"),null],"Las contrase\xf1as deben coincidir").required("Las contrase\xf1as deben coincidir"),U=T.a({email:N,registerPassword:L,confirmPassword:I,username:T.c().required("Coloca tu nombre").min(3,"El nombre es demasiado corto").max(20,"El nombre es demasiado largo")}),A=T.a({email:N,password:R}),D=T.a({email:N}),F=T.a({registerPassword:L,confirmPassword:I}),W=a(126),q=a.n(W),M=a(334);function z(){return r.a.createElement("div",{style:{position:"absolute",height:"100vh",width:"100%",opacity:.75,backgroundColor:"#e5e5e5",display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement(M.a,{size:60,color:"primary"}))}var H=a(338),B=Object(H.a)((function(e){return{textField:{marginBottom:55,height:40,fontSize:2}}}));function G(){var e=B(),t=Object(m.b)();return r.a.createElement(w.b,{enableReinitialize:!0,initialValues:{email:"",registerPassword:"",confirmPassword:"",username:""},validationSchema:U,onSubmit:function(e,a){var n=a.setSubmitting,r={email:e.email,password:e.registerPassword,username:e.username};t(function(e,t){return function(a){var n;return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,b.a.awrap(s.a.post("/user/register",e));case 3:return n=r.sent,a({type:"CLEAR_ERRORS"}),y(n.data.token),r.next=8,b.a.awrap(a(O()));case 8:t(!1),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(0),a({type:"SET_ERRORS",payload:r.t0.response.data.errors}),t(!1);case 15:case"end":return r.stop()}}),null,null,[[0,11]])}}(r,n))}},(function(t){var a=t.handleSubmit,n=t.isSubmitting,c=t.errors,o=t.values,l=t.touched,s=t.handleChange,i=t.handleBlur;return r.a.createElement("div",{className:"form-container"},r.a.createElement(k.a,{className:"form-card",elevation:8},r.a.createElement(w.a,{className:"form"},r.a.createElement(C.a,{style:{margin:"5px 0px 25px 0px"},variant:"h4"}," Reg\xedstrate! "),r.a.createElement(P.a,{className:e.textField,variant:"outlined",error:c.email&&l.email,id:"email",name:"email",type:"email",value:o.email,onChange:s,onBlur:i,required:!0,helperText:(c.email||l.email)&&c.email,label:"Correo Electr\xf3nico"}),r.a.createElement(P.a,{className:e.textField,variant:"outlined",error:c.registerPassword&&l.registerPassword,id:"registerPassword",name:"registerPassword",type:"password",value:o.registerPassword,onChange:s,onBlur:i,required:!0,helperText:c.registerPassword&&l.registerPassword&&c.registerPassword,label:"Contrase\xf1a"}),r.a.createElement(P.a,{className:e.textField,variant:"outlined",error:c.confirmPassword&&l.confirmPassword,id:"confirmPassword",name:"confirmPassword",type:"password",value:o.confirmPassword,onChange:s,onBlur:i,required:!0,helperText:c.confirmPassword&&l.confirmPassword&&c.confirmPassword,label:"Confirmar Contrase\xf1a"}),r.a.createElement(P.a,{className:e.textField,variant:"outlined",error:c.username&&l.username,id:"username",name:"username",type:"username",value:o.username,onChange:s,onBlur:i,required:!0,helperText:c.username&&l.username?c.username:"Todos veran tu nombre*",label:"Nombre completo"}),r.a.createElement(x.a,{disabled:n,type:"submit",onClick:a,variant:"contained",color:"primary",style:{marginTop:5}},"Registrarse"),r.a.createElement("p",{className:"auth-p"}," Ya tienes una cuenta?",r.a.createElement(_.b,{style:{textDecoration:"none",color:"#046B86"},to:"/"}," Iniciar sesi\xf3n"))),r.a.createElement("img",{src:q.a,alt:"landing",className:"auth-image"})),n&&r.a.createElement(z,null))}))}var K=a(8);function V(e,t,a,n){return function(r){var c;return b.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,a(!0),o.next=4,b.a.awrap(s.a.get("/posts/user/subscriptions/?page=".concat(e)));case 4:(c=o.sent).data.length>0?(r(1===e?{type:"SET_SUBSCRIPTIONS_POSTS",payload:c.data}:{type:"SET_NEW_SUBSCRIPTIONS_POSTS",payload:c.data}),a(!1),t(e+1),n.current=0):(a(!1),n.current=1),o.next=11;break;case 8:o.prev=8,o.t0=o.catch(0),console.log(o.t0);case 11:case"end":return o.stop()}}),null,null,[[0,8]])}}var Q=a(372),Y=a(346),X=a(348),J=a(347),$=a(197),Z=a.n($),ee=a(298);function te(e){var t=e.post_id,a=Object(n.useState)(!1),c=Object(K.a)(a,2),o=c[0],l=c[1],i=Object(n.useState)(!1),u=Object(K.a)(i,2),d=u[0],p=u[1],f=Object(m.b)();return r.a.createElement("div",null,r.a.createElement(Q.a,{title:"Borrar Post",placement:"bottom"},r.a.createElement(ee.a,{onClick:function(){return l(!0)}},r.a.createElement(Z.a,{color:"primary"}))),r.a.createElement(Y.a,{open:o,onClose:function(){return l(!1)},fullWidth:!0,maxWidth:"sm"},r.a.createElement(J.a,null," Estas Seguro de que quieres borrar esta publicac\xedon ? "),r.a.createElement(X.a,null,r.a.createElement(x.a,{disabled:d,onClick:function(){return f(function(e,t,a){return function(n){return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(!0),r.next=4,b.a.awrap(s.a.delete("/posts/".concat(e,"/delete")));case 4:n({type:"DELETE_POST",payload:e}),a(!1),t(!1),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.log(r.t0);case 12:case"end":return r.stop()}}),null,null,[[0,9]])}}(t,l,p))},variant:"contained",color:"primary"},"Si ",d&&r.a.createElement(M.a,{style:{marginLeft:15},size:30})),r.a.createElement(x.a,{onClick:function(){return l(!1)},variant:"contained",color:"secondary"},"Cancelar"))))}var ae=a(50),ne=a.n(ae),re=a(137),ce=a.n(re),oe=a(198),le=a.n(oe);function se(e){var t=Object(m.b)(),a=Object(m.c)((function(e){return e.user.loggedUser})),n=e.post,c=n.likes,o=n._id,l=a&&c&&c.filter((function(e){return e.user===a._id})).length>0;return r.a.createElement("div",null,l?r.a.createElement(ee.a,{onClick:function(){return t((e=o,function(t){var a;return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b.a.awrap(s.a.delete("/posts/".concat(e,"/dislike")));case 3:a=n.sent,t({type:"SET_DISLIKE",payload:a.data}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]])}));var e},"aria-label":"add to favorites"},r.a.createElement(ce.a,null)," ",c&&c.length):r.a.createElement(ee.a,{onClick:function(){return t((e=o,function(t){var a;return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b.a.awrap(s.a.post("/posts/".concat(e,"/like")));case 3:a=n.sent,console.log(a.data),t({type:"SET_LIKES",payload:a.data}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),null,null,[[0,8]])}));var e},"aria-label":"add to favorites"},r.a.createElement(le.a,null)," ",c&&c.length))}var ie=a(349),ue=a(351),me=a(350),de=a(373),pe=a(146),fe=a(199),Ee=a.n(fe),be=Object(H.a)((function(e){return{media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:pe.a[500]}}}));function ge(e){var t=e.post,a=Object(m.c)((function(e){return e.UI.onSinglePost})),n=Object(m.c)((function(e){return e.user.loggedUser})),c=t.imageURL,o=t.description,l=t.date,s=t.userRef,i=t._id,u=t.commentCount,d=be();return r.a.createElement(k.a,{elevation:8},r.a.createElement(ie.a,{avatar:r.a.createElement(de.a,{"aria-label":"profile-pic",className:d.avatar},r.a.createElement(_.b,{to:"/users/".concat(s&&s._id)}," ",r.a.createElement("img",{height:50,width:50,src:s&&s.profileImg,alt:"profile-pic"})," ")),action:r.a.createElement("div",null,s&&s._id===n._id&&r.a.createElement(te,{post_id:i})),title:s&&s.username,subheader:ne()(l).format("LLL")}),r.a.createElement("img",{src:c,style:{objectFit:"cover",backgroundColor:"#3C3C3C"},height:480,width:"100%",alt:"Post"}),r.a.createElement(me.a,{style:{padding:0},disableSpacing:!0},r.a.createElement(se,{post:t}),r.a.createElement(_.b,{style:{textDecoration:"none"},to:"/posts/".concat(i)},!a&&r.a.createElement(ee.a,null," ",r.a.createElement(Ee.a,null)," ",u," "))),r.a.createElement(ue.a,{style:{padding:"0px 0px 20px 10px"}},r.a.createElement(C.a,{color:"textSecondary",component:"p"},o)))}function ve(){var e=Object(n.useRef)(0),t=Object(m.c)((function(e){return e.data.allPosts})),a=Object(m.b)(),c=Object(n.useState)(!1),o=Object(K.a)(c,2),l=o[0],s=o[1],i=Object(n.useState)(!1),u=Object(K.a)(i,2),d=u[0],p=u[1],f=Object(n.useState)(1),E=Object(K.a)(f,2),b=E[0],g=E[1];function v(){var t=document.getElementById("scrollHandler");window.scrollY+window.innerHeight===t.clientHeight+t.offsetTop&&0===e.current&&(e.current=1,s((function(e){return!e})))}return Object(n.useEffect)((function(){return a(V(b,g,p,e)),window.addEventListener("scroll",v),function(){window.removeEventListener("scroll",v)}}),[a,b]),Object(n.useEffect)((function(){a(V(b,g,p,e))}),[l]),r.a.createElement("div",{id:"scrollHandler",className:"allPosts-container"},t.map((function(e,t){return r.a.createElement(ge,{key:t,post:e})})),d&&r.a.createElement(M.a,{size:60,color:"primary",style:{margin:"0px auto"}}))}function he(){return r.a.createElement("section",{className:"posts-container"},r.a.createElement(ve,null))}var ye=a(352),Oe=a(101),Se=a.n(Oe);function je(e){var t=e.height,a=e.width,n=e.src,c=e.alt,o=e.onClick,l=e.pointer;return r.a.createElement("img",{onClick:o,alt:c,src:n,style:{borderRadius:"50%",margin:10,width:a,height:t,cursor:l&&"pointer"}})}function we(e){var t=e.loading,a=e.connectedUser,n=Object(i.g)();return r.a.createElement("div",{className:"user-data"},t?r.a.createElement("div",null,r.a.createElement(je,{alt:"no-profile",src:Se.a,width:50,height:50})):r.a.createElement("div",null,r.a.createElement(je,{onClick:function(){return n.push("/users/".concat(a._id))},alt:"profile",src:a.profileImg,width:50,height:50,pointer:!0})),r.a.createElement(C.a,{variant:"h6"},t?r.a.createElement(ye.a,{width:150,animation:"wave"}):r.a.createElement("div",{style:{cursor:"pointer"},onClick:function(){return n.push("/users/".concat(a._id))}},a.username)))}function _e(){var e=Object(m.c)((function(e){return e.user.loggedUser})),t=Object(m.c)((function(e){return e.user.loading}));return r.a.createElement("section",{className:"users-section"},r.a.createElement(we,{connectedUser:e,loading:t}))}var xe=a(201),Ce=a.n(xe),Pe=a(353),ke=a(200),Te=a.n(ke);function Ne(){var e=Object(m.b)(),t=Object(n.useState)(""),a=Object(K.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),i=Object(K.a)(l,2),u=i[0],d=i[1],p=Object(n.useState)(""),f=Object(K.a)(p,2),E=f[0],g=f[1],v=Object(n.useState)(!1),h=Object(K.a)(v,2),y=h[0],O=h[1],S=Object(n.useState)(""),j=Object(K.a)(S,2),w=j[0],_=j[1],C=Object(n.useState)(!1),k=Object(K.a)(C,2),T=k[0],N=k[1],L=function(){O(!1),d(""),g(""),_("")};return r.a.createElement("div",{className:"add-post-container",placement:"top"},r.a.createElement(Q.a,{title:"Nuevo Post"},r.a.createElement(Ce.a,{onClick:function(){return O(!0)}})),r.a.createElement(Y.a,{open:y,onClose:L,fullWidth:!0,maxWidth:"sm"},r.a.createElement(J.a,null," Nuevo Post "),r.a.createElement(Pe.a,null,r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("input",{hidden:"hidden",id:"file-input",type:"file",placeholder:"select an image",onChange:function(e){e.preventDefault(),o(e.target.files[0]),e.target.files[0]?d(URL.createObjectURL(e.target.files[0])):d("")}}),u?r.a.createElement("img",{src:u,width:400,style:{margin:"auto"},height:400,alt:"new post"}):r.a.createElement("img",{src:Te.a,width:250,style:{margin:"auto"},height:250,alt:"preview"}),r.a.createElement(x.a,{onClick:function(e){e.preventDefault(),_(""),document.getElementById("file-input").click()},style:{marginTop:30},variant:"outlined",color:"primary"},"Seleccionar Im\xe1gen"),r.a.createElement(P.a,{style:{marginTop:30},name:"descripcion",tpye:"text",multiline:!0,rows:"4",placeholder:"Si asi lo quieres, a\xf1ade una descripci\xf3n...",value:E,onChange:function(e){return g(e.target.value)},fullWidth:!0,inputProps:{maxLength:200}})),r.a.createElement("p",{style:{color:"red",fontFamily:"Open Sans",margin:"auto"}},"  ",w&&w," ")),r.a.createElement(X.a,null,r.a.createElement(x.a,{disabled:T||w,onClick:function(){if(u){if("jpg"!==c.name.split(".").pop())return _("Formato de im\xe1gen inv\xe1lido. Solo jpg o jpeg.");var t=new FormData;t.append("image",c,c.name),t.append("description",E),e(function(e,t,a,n){return function(r){var c;return b.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,a(!0),o.next=4,b.a.awrap(s.a.post("/posts/add",e,{headers:{"content-type":"multipart/form-data"}}));case 4:c=o.sent,t(!1),a(!1),r({type:"SET_NEW_POST",payload:c.data}),o.next=15;break;case 10:o.prev=10,o.t0=o.catch(0),a(!1),n(o.t0.response.data),console.log(o.t0.response.data);case 15:case"end":return o.stop()}}),null,null,[[0,10]])}}(t,O,N,_)),_("")}else _("Debes seleccionar una im\xe1gen primero")},variant:"contained",color:"primary"},"Publicar! ",T&&r.a.createElement(M.a,{style:{marginLeft:15},size:30})),r.a.createElement(x.a,{onClick:L,variant:"contained",style:{backgroundColor:"red"},color:"secondary"},"Cancelar"))))}function Le(){var e=Object(m.b)();return Object(n.useEffect)((function(){return e({type:"ON_HOME"}),function(){e({type:"CLEAR_POSTS"}),e({type:"FOCUS_OFF"})}}),[e]),r.a.createElement("div",{className:"home-container"},r.a.createElement(Ne,null),r.a.createElement(_e,null),r.a.createElement(he,null))}var Re=a(203),Ie=a.n(Re),Ue=a(202),Ae=a.n(Ue);function De(e){var t=e.open,a=e.setOpen,c=e.hasPassword,o=(e.provider,e.values),l=Object(m.b)(),i=Object(n.useState)({loading:!1,success:null}),u=Object(K.a)(i,2),d=u[0],p=u[1];return r.a.createElement("div",null,r.a.createElement(Y.a,{open:t,onClose:function(){return a(!1)},fullWidth:!0,maxWidth:"sm"},r.a.createElement(J.a,null," OOPS! "),r.a.createElement(Pe.a,null,r.a.createElement("p",{style:{width:"100%",textAlign:"justify",fontFamily:"Open Sans"}},c?"Haz clic en reestablecer contrase\xf1a si deseas recuperar tu cuenta. Revisa tu correo (".concat(o.email,"), recibiras un mensaje para continuar con el proceso."):"Al parecer, la cuenta con la que intentas ingresar existe, pero no cuenta con una contrase\xf1a establecida. Si quieres establecer una nueva contrase\xf1a, haz clic en Reestablecer Contrase\xf1a.\n                       Tambien puedes volver atras e ingresar a tu cuenta a trav\xe9s de"),d.success&&r.a.createElement("p",null," El link ha sido enviado exitosamente, revisa tu correo. ")),r.a.createElement(X.a,null,r.a.createElement(x.a,{disabled:d.loading,onClick:function(){return l(function(e,t,a){return function(){return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t((function(e){return Object(f.a)({},e,{loading:!0})})),n.next=4,b.a.awrap(s.a.post("/user/forgotPassword",{email:e}));case 4:t({loading:!1,success:!0}),a(!1),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),null,null,[[0,8]])}}(o.email,p,a))},variant:"contained",color:"primary"},"Reestablecer Contrase\xf1a"),r.a.createElement(x.a,{disabled:d.loading,onClick:function(){return a(!1)},variant:"contained",color:"primary"},"Volver atr\xe1s"))))}var Fe=Object(H.a)((function(e){return{textField:{marginBottom:55,height:40,fontSize:2}}}));function We(){var e=Object(n.useState)(!1),t=Object(K.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(0),l=Object(K.a)(o,2),i=l[0],u=l[1],d=Object(m.c)((function(e){return e.user.userHasPassword})),p=Object(m.c)((function(e){return e.user.errors})),f=Fe(),E=Object(m.b)();return r.a.createElement(w.b,{initialValues:!0===d?{email:"",password:""}:{email:""},validationSchema:!0===d?A:D,onSubmit:function(e,t){var a=t.setSubmitting;null===d&&E(j(e,a,c)),!0===d&&E(function(e,t,a,n){return function(r){var c;return b.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,b.a.awrap(s.a.post("/user/login",e));case 3:return c=o.sent,y(c.data.token),r({type:"CLEAR_ERRORS"}),o.next=8,b.a.awrap(r(O()));case 8:o.next=16;break;case 10:o.prev=10,o.t0=o.catch(0),t(!1),r({type:"SET_ERRORS",payload:o.t0.response.data.error}),"Credenciales incorrectas. Por favor, intenta de nuevo."===o.t0.response.data.error&&n((function(e){return e+1})),!1===o.t0.response.data.hasPassword&&(a(!0),r({type:"SET_PASSWORD_AS_FALSE"}));case 16:case"end":return o.stop()}}),null,null,[[0,10]])}}(e,a,c,u)),!1===d&&E(j(e,a,c))}},(function(e){var t=e.handleSubmit,n=e.isSubmitting,o=e.errors,l=e.values,s=(e.touched,e.handleChange),u=e.handleBlur;return r.a.createElement("div",{className:"form-container"},r.a.createElement(De,{open:a,setOpen:c,hasPassword:d,values:l}),r.a.createElement(k.a,{className:"form-card",elevation:8},r.a.createElement(w.a,{className:"form"},r.a.createElement(C.a,{style:{margin:"5px 0px 25px 0px"},variant:"h4"}," Iniciar Sesi\xf3n "),r.a.createElement(P.a,{variant:"outlined",className:f.textField,error:o.email||p,id:"email",name:"email",type:"email",value:l.email,onChange:s,onBlur:u,required:!0,helperText:d?o.email:o.email||p,label:"Correo Electr\xf3nico"}),d&&r.a.createElement(P.a,{variant:"outlined",error:o.password||p,id:"password",name:"password",type:"password",value:l.password,onChange:s,onBlur:u,required:!0,helperText:o.password||p,label:"Contrase\xf1a"}),i>=1&&r.a.createElement("p",{style:{fontFamily:"Open Sans",marginTop:20}}," Olvidaste tu contrase\xf1a? haz click ",r.a.createElement("span",{onClick:function(){return c(!0)},style:{color:"blue",cursor:"pointer"}}," Aqu\xed ")," para recuperarla. "),r.a.createElement(x.a,{disabled:n,type:"submit",onClick:t,variant:"contained",color:"primary",style:{margin:"10px 0px"}},"Iniciar Sesi\xf3n"),r.a.createElement("a",{style:{cursor:"pointer",textDecoration:"none",margin:"10px 0px"},href:"https://clonetagram.herokuapp.com/api/user/login/facebook"},r.a.createElement(x.a,{variant:"contained",color:"secondary",style:{width:"100%"},startIcon:r.a.createElement(Ie.a,{style:{margin:0,padding:0}})},r.a.createElement("p",{style:{margin:0,padding:0}}," Iniciar sesi\xf3n con Facebook "))),r.a.createElement("a",{style:{cursor:"pointer",textDecoration:"none",margin:"10px 0px"},href:"https://clonetagram.herokuapp.com/api/user/login/google"},r.a.createElement(x.a,{variant:"outlined",color:"primary",style:{width:"100%"},startIcon:r.a.createElement("img",{src:Ae.a,alt:"google-icon",width:"20",height:"20"})},r.a.createElement("p",{style:{margin:0,padding:0}}," Iniciar sesi\xf3n con Google "))),r.a.createElement("p",{className:"auth-p"}," No tienes una cuenta?",r.a.createElement(_.b,{style:{textDecoration:"none",color:"#046B86"},to:"/Register"}," Registrate Aqu\xed"))),r.a.createElement("img",{src:q.a,alt:"landing",className:"auth-image"})),n&&r.a.createElement(z,null))}))}var qe=Object(H.a)((function(e){return{root:{"& > *":{width:"100%"}},input:{background:"#181818"}}}));function Me(e){var t=qe(),a=Object(m.b)(),c=Object(n.useState)(!1),o=Object(K.a)(c,2),l=o[0],i=o[1],u=Object(n.useState)(""),d=Object(K.a)(u,2),p=d[0],f=d[1],E=function(t){t.preventDefault(),p&&(i(!0),a(function(e,t,a){return function(n){var r;return b.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,b.a.awrap(s.a.post("/comments/".concat(t),e));case 3:r=c.sent,n({type:"SET_NEW_COMMENT",payload:r.data}),a(!1),c.next=11;break;case 8:c.prev=8,c.t0=c.catch(0),console.log(c.t0);case 11:case"end":return c.stop()}}),null,null,[[0,8]])}}({content:p},e.selectedPost._id,i)),f(""))};return r.a.createElement("form",{className:t.root,noValidate:!0,autoComplete:"off"},r.a.createElement(P.a,{disabled:l,type:"text",label:"A\xf1ade un comentario",rows:"2",variant:"filled",value:p,onChange:function(e){return f(e.target.value)},fullWidth:!0,onKeyPress:function(e){"Enter"===e.key&&E(e)}}))}var ze=a(344),He=a(358),Be=a(355),Ge=a(357),Ke=a(354),Ve=a(356),Qe=a(300),Ye=a(138),Xe=a.n(Ye);function Je(e){var t=e.reply,a=e.comment,c=Object(m.b)(),o=Object(n.useState)(!1),l=Object(K.a)(o,2),i=l[0],u=l[1],d=Object(n.useState)(!1),p=Object(K.a)(d,2),f=p[0],E=p[1];return r.a.createElement("div",null,r.a.createElement(Q.a,{title:"Borrar comentario",placement:"bottom"},r.a.createElement(ee.a,{onClick:function(){return u(!0)}},r.a.createElement(Xe.a,{color:"primary"}))),r.a.createElement(Y.a,{open:i,onClose:function(){return u(!1)},fullWidth:!0,maxWidth:"sm"},r.a.createElement(J.a,null," Seguro que quieres borrar tu comentario ?  "),r.a.createElement(X.a,null,r.a.createElement(x.a,{disabled:f,onClick:function(){return c(function(e,t,a,n){return function(r){return b.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,a(!0),c.next=4,b.a.awrap(s.a.delete("/comments/".concat(e,"/reply/").concat(t,"/delete")));case 4:a(!1),n(!1),r({type:"DELETE_REPLY",payload:{comment_id:e,reply_id:t}}),c.next=13;break;case 9:c.prev=9,c.t0=c.catch(0),a(!1),console.log(c.t0);case 13:case"end":return c.stop()}}),null,null,[[0,9]])}}(a._id,t._id,E,u))},variant:"contained",color:"primary"},"Borrar ",f&&r.a.createElement(M.a,{style:{marginLeft:15},size:30})),r.a.createElement(x.a,{onClick:function(){return u(!1)},variant:"contained",style:{backgroundColor:"red"},color:"secondary"},"Cancelar"))))}function $e(e){var t=e.reply,a=e.comment,n=t.user_id,c=n.profileImg,o=n.createdAt,l=n.username;return r.a.createElement(Qe.a,{style:{display:"flex"}},r.a.createElement(Ke.a,null,r.a.createElement(de.a,{alt:"comment profile",src:c})),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(Be.a,{primary:l,secondary:ne()(o).format("LLL")}),r.a.createElement(Be.a,{primary:t.content}),r.a.createElement(Ve.a,null,r.a.createElement(Je,{reply:t,comment:a}))),r.a.createElement(Ge.a,{variant:"inset",component:"span"}))}var Ze=Object(H.a)((function(e){return{root:{"& > *":{width:"100%"}}}}));function et(e){var t=Ze(),a=Object(m.b)(),c=Object(n.useState)(""),o=Object(K.a)(c,2),l=o[0],i=o[1],u=function(t){t.preventDefault(),l&&(a(function(e,t){return function(a){var n;return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,b.a.awrap(s.a.post("/comments/".concat(t,"/reply"),e));case 3:n=r.sent,a({type:"SET_REPLIES",payload:n.data}),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.log(r.t0);case 10:case"end":return r.stop()}}),null,null,[[0,7]])}}({content:l},e.comment._id)),i(""))};return r.a.createElement("form",{className:t.root,noValidate:!0,autoComplete:"off"},r.a.createElement(P.a,{tpye:"text",label:"Escribe un mensaje",rows:"2",variant:"filled",value:l,onChange:function(e){return i(e.target.value)},fullWidth:!0,onKeyPress:function(e){"Enter"===e.key&&u(e)}}))}function tt(e){var t=e.replies,a=e.comment,n=e.selectedPost;return r.a.createElement(He.a,{style:{width:"100%",maxHeight:450,padding:0}},r.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",maxHeight:400,overflow:"auto"}},r.a.createElement(et,{comment:a,selectedPost:n}),t.map((function(e,t){return r.a.createElement($e,{reply:e,key:t,comment:a})}))))}function at(e){var t=Object(m.b)(),a=Object(n.useState)(!1),c=Object(K.a)(a,2),o=c[0],l=c[1],i=Object(n.useState)(!1),u=Object(K.a)(i,2),d=u[0],p=u[1];return r.a.createElement("div",null,r.a.createElement(Q.a,{title:"Borrar comentario",placement:"bottom"},r.a.createElement(ee.a,{onClick:function(){return l(!0)}},r.a.createElement(Xe.a,{color:"primary"}))),r.a.createElement(Y.a,{open:o,onClose:function(){return l(!1)},fullWidth:!0,maxWidth:"sm"},r.a.createElement(J.a,null," Seguro que quieres borrar el comentario ?  "),r.a.createElement(X.a,null,r.a.createElement(x.a,{disabled:d,onClick:function(){return t(function(e,t,a){return function(n){return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t(!0),r.next=4,b.a.awrap(s.a.delete("/comments/".concat(e,"/delete")));case 4:t(!1),n({type:"DELETE_COMMENT",payload:e}),a(!1),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.log(r.t0);case 12:case"end":return r.stop()}}),null,null,[[0,9]])}}(e.comment_id,p,l))},variant:"contained",color:"primary"},"Borrar ",d&&r.a.createElement(M.a,{style:{marginLeft:15},size:30})),r.a.createElement(x.a,{onClick:function(){return l(!1)},variant:"contained",style:{backgroundColor:"red"},color:"secondary"},"Cancelar"))))}var nt=a(375),rt=a(360),ct=Object(H.a)((function(e){return{root:{height:"100%",overflow:"auto",width:"100%",backgroundColor:e.palette.background.paper},ExpansionPanelSummary:{border:0,width:"100%",boxShadow:"none"},ExpansionPanel:{border:0,boxShadow:"none",width:"100%",margin:0,outline:"none"},inline:{display:"inline"}}}));function ot(e){var t=e.comment,a=Object(m.c)((function(e){return e.user.loggedUser})),n=Object(m.c)((function(e){return e.data.selectedPost})),c=ct();return r.a.createElement("div",null,r.a.createElement(Qe.a,{id:"comment-box",alignItems:"flex-start"},r.a.createElement(Ke.a,null,r.a.createElement(de.a,{alt:"comment profile",src:t.user_id.profileImg})),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(Be.a,{primary:t.user_id.username,secondary:ne()(t.date).format("LLL")}),r.a.createElement("span",{style:{position:"absolute",right:0,top:0}},a._id===t.user_id._id&&r.a.createElement(at,{comment_id:t._id,selectedPost:n})),r.a.createElement(Be.a,{primary:t.content}),r.a.createElement(nt.a,{className:c.ExpansionPanel},r.a.createElement(rt.a,{className:c.ExpansionPanelSummary},r.a.createElement(Be.a,{secondary:"responder (".concat(t.replies.length,")")})),r.a.createElement(tt,{replies:t.replies,selectedPost:n,comment:t})))),r.a.createElement(Ge.a,{variant:"inset",component:"li"}))}function lt(e){var t=e.selectedPost,a=e.comments;return r.a.createElement("div",null,r.a.createElement(Me,{selectedPost:t}),r.a.createElement(ze.a,null,a.map((function(e,t){return r.a.createElement(ot,{comment:e,key:t})}))))}function st(e){var t=e.match.params.id,a=Object(m.b)(),c=Object(m.c)((function(e){return e.data.selectedPost})),o=Object(m.c)((function(e){return e.comments.comments})),l=Object(n.useState)(!1),i=Object(K.a)(l,2),u=i[0],d=i[1];return Object(n.useEffect)((function(){var n;return a(function(e,t,a){return function(n){var r;return b.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,a(!0),c.next=4,b.a.awrap(s.a.get("/posts/post/".concat(e)));case 4:r=c.sent,n({type:"SET_POST",payload:r.data}),a(!1),c.next=13;break;case 9:c.prev=9,c.t0=c.catch(0),500===c.t0.response.status&&t.push("/*"),console.log(c.t0);case 13:case"end":return c.stop()}}),null,null,[[0,9]])}}(t,e.history,d)),a((n=t,function(e){var t;return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,b.a.awrap(s.a.get("/comments/".concat(n)));case 3:t=a.sent,e({type:"SET_POST_COMMENTS",payload:t.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0.response);case 10:case"end":return a.stop()}}),null,null,[[0,7]])})),a({type:"ON_SINGLE_POST"}),function(){a({type:"CLOSE_SINGLE_POST"})}}),[a,t,e.history]),u?r.a.createElement("div",{style:{display:"flex",width:"100%",height:"100vh"}}," ",r.a.createElement(M.a,{style:{margin:"auto"},size:60})," "):r.a.createElement("section",{className:"fullPost-container"},r.a.createElement(ge,{post:c}),r.a.createElement(lt,{comments:o,selectedPost:c}))}function it(e){var t=e.user_id,a=Object(m.b)(),c=Object(m.c)((function(e){return e.data.selectedPosts}));return Object(n.useEffect)((function(){var e;a((e=t,function(t){var a;return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b.a.awrap(s.a.get("/posts/users/".concat(e)));case 3:a=n.sent,t({type:"SET_SELECTED_POSTS",payload:a.data}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]])}))}),[a,t]),r.a.createElement("div",{className:"profilePosts-grid"},c.map((function(e,t){return r.a.createElement(ge,{key:t,post:e})})))}function ut(e){var t=e.src;return Object(m.c)((function(e){return e.UI.changingProfileImage}))?r.a.createElement(M.a,{size:130}):r.a.createElement("img",{src:t,alt:"profile"})}function mt(e){var t=e.userProfile,a=e.connectedUser,c=t._id,o=Object(m.b)(),l=Object(n.useState)(),i=Object(K.a)(l,2),u=i[0],d=i[1],p=Object(n.useState)(!1),f=Object(K.a)(p,2),E=f[0],g=f[1];Object(n.useEffect)((function(){var e=a.subscriptions&&a.subscriptions.find((function(e){return e.user_id._id===c}));d(!!e)}),[a,c]);return t&&t.followUpRequests&&t.followUpRequests.find((function(e){return e.follower_id._id===a._id}))?r.a.createElement(x.a,{disabled:E,onClick:function(){return o(function(e,t){return function(a){var n;return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t(!0),r.next=4,b.a.awrap(s.a.delete("/users/requests/cancel/".concat(e)));case 4:n=r.sent,a({type:"SET_SELECTED_PROFILE",payload:n.data}),t(!1),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.log(r.t0);case 12:case"end":return r.stop()}}),null,null,[[0,9]])}}(c,g))},style:{marginLeft:10},variant:"contained",color:"primary",size:"small"}," Solicitud Enviada ",E&&r.a.createElement(M.a,{style:{marginLeft:5},size:20})):r.a.createElement("div",null,u?r.a.createElement(x.a,{disabled:E,onClick:function(){return o(function(e,t,a){return function(n){return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t(!0),r.next=4,b.a.awrap(s.a.delete("/users/unsubscribe/".concat(e)));case 4:n({type:"UNFOLLOW_USER",payload:{user_id:e,_id:a}}),t(!1),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),console.log(r.t0);case 11:case"end":return r.stop()}}),null,null,[[0,8]])}}(c,g,a._id))},style:{marginLeft:10},variant:"contained",color:"primary",size:"small"}," Siguiendo ",E&&r.a.createElement(M.a,{style:{marginLeft:5},size:20})):r.a.createElement(x.a,{disabled:E,onClick:function(){return o(function(e,t,a,n){return function(r){return b.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t(!0),c.next=4,b.a.awrap(s.a.post("/users/subscribe/".concat(e)));case 4:r(a?{type:"ADD_TO_REQUESTS",payload:n}:{type:"FOLLOW_USER",payload:n}),t(!1),c.next=11;break;case 8:c.prev=8,c.t0=c.catch(0),console.log(c.t0);case 11:case"end":return c.stop()}}),null,null,[[0,8]])}}(c,g,t.private,{userProfile:t,connectedUser:a}))},style:{marginLeft:10},variant:"contained",size:"small"}," Seguir ",E&&r.a.createElement(M.a,{style:{marginLeft:5},size:20})))}var dt=a(361),pt=Object(H.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},nested:{paddingLeft:e.spacing(4)}}}));function ft(e){var t=e.open,a=e.userList,n=void 0===a?[]:a,c=e.setOpen,o=e.showingFollowers,l=pt();return r.a.createElement(Y.a,{children:"div",open:t,onClose:function(){return c(!1)},fullWidth:!0,maxWidth:"sm"},r.a.createElement("div",null,r.a.createElement(ze.a,{style:{width:"100%"},component:"nav","aria-labelledby":"nested-list-subheader",subheader:r.a.createElement(dt.a,{component:"div",id:"nested-list-subheader"},o?"Seguidores":"Seguidos"," ",r.a.createElement("hr",null),0===n.length&&o?"Esta cuenta no tiene seguidores":0===n.length&&!o&&"Esta cuenta no sigue a nadie"),className:l.root},n.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(_.b,{onClick:function(){return c(!1)},style:{textDecoration:"none"},to:"/users/".concat(e.user_id._id)},r.a.createElement(Qe.a,{button:!0,className:l.nested},r.a.createElement(Ke.a,null,r.a.createElement(de.a,{src:e.user_id.profileImg})),r.a.createElement(Be.a,{secondary:e.user_id.username}))))})))))}var Et=a(219),bt=a(364),gt=a(204),vt=a.n(gt);function ht(e){var t=e.description,a=e.open,c=e.setOpen,o=Object(m.b)(),l=Object(n.useState)(!1),i=Object(K.a)(l,2),u=i[0],d=i[1],p=Object(n.useState)(""),f=Object(K.a)(p,2),E=f[0],g=f[1],v=Object(n.useState)(""),h=Object(K.a)(v,2),y=h[0],O=h[1];Object(n.useEffect)((function(){g(t)}),[t]);var S=function(){c(!1),O("")};return r.a.createElement("div",null,r.a.createElement(Y.a,{open:a,onClose:S,fullWidth:!0,maxWidth:"sm"},r.a.createElement("div",{style:{margin:"20px auto 20px auto",width:"85%"}},r.a.createElement(P.a,{tpye:"text",label:"Descripci\xf3n",multiline:!0,rows:"4",placeholder:"A\xf1ade una descripci\xf3n a tu perfil",value:E,onChange:function(e){return g(e.target.value)},fullWidth:!0})),y&&r.a.createElement("p",{style:{color:"red",fontFamily:"Open Sans",marginLeft:40}}," ",y," "),r.a.createElement(X.a,null,r.a.createElement(x.a,{onClick:function(){""===E.trim()&&O("No debe estar vac\xedo"),d(!0),o(function(e,t,a){return function(n){var r;return b.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,b.a.awrap(s.a.post("users/me/details",{details:e}));case 3:r=c.sent,n({type:"SET_SELECTED_PROFILE",payload:r.data}),a(!1),t(!1),c.next=13;break;case 9:c.prev=9,c.t0=c.catch(0),console.log(c.t0),t(!1);case 13:case"end":return c.stop()}}),null,null,[[0,9]])}}(E,d,c))},disabled:u,variant:"contained",color:"primary"},"Guardar ",u&&r.a.createElement(M.a,{style:{marginLeft:5},size:20})),r.a.createElement(x.a,{onClick:S,variant:"contained",style:{backgroundColor:"red"},color:"secondary"},"Cancelar"))))}function yt(e){var t=e.open,a=e.setOpen,n=Object(m.b)();return r.a.createElement("div",null,r.a.createElement(Y.a,{open:t,onClose:function(){return a(!1)},fullWidth:!0,maxWidth:"sm"},r.a.createElement(J.a,null," Cambiar foto de perfil "),r.a.createElement(Pe.a,null,r.a.createElement("form",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("input",{required:!0,hidden:"hidden",id:"file-input",type:"file",placeholder:"select an image",onChange:function(e){e.preventDefault();var t,r=e.target.files[0],c=new FormData;c.append("image",r,r.name),console.log(c),c&&(n((t=c,function(e){var a;return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e({type:"CHANGING_PROFILE_IMAGE"}),n.next=4,b.a.awrap(s.a.put("/users/image",t,{headers:{"content-type":"multipart/form-data"}}));case 4:a=n.sent,e({type:"SET_NEW_IMAGE",payload:a.data}),e({type:"PROFILE_IMAGE_CHANGED"}),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),e({type:"PROFILE_IMAGE_CHANGED"}),console.log(n.t0);case 13:case"end":return n.stop()}}),null,null,[[0,9]])})),a(!1))}}),r.a.createElement(x.a,{onClick:function(e){e.preventDefault(),document.getElementById("file-input").click()},variant:"outlined",color:"primary"},"Subir Foto"))),r.a.createElement(X.a,null,r.a.createElement(x.a,{onClick:function(){return a(!1)},variant:"contained",color:"secondary"},"Cancelar"))))}var Ot=a(363),St=a(376),jt=a(341),wt=a(340),_t=a(362);function xt(e){var t=e.connectedUser,a=Object(m.b)();Object(n.useEffect)((function(){console.log(t)}),[t]);var c=Object(n.useState)(!1),o=Object(K.a)(c,2),l=o[0],i=o[1];return r.a.createElement(wt.a,{component:"fieldset"},r.a.createElement(jt.a,{component:"legend"}," Editar privacidad "),r.a.createElement(_t.a,null,r.a.createElement(Ot.a,{control:r.a.createElement(St.a,{name:"gilad"}),checked:t.private,label:t.private?"Cuenta Privada":"Cuenta P\xfablica",onChange:function(){a(function(e){return function(t){return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e(!0),a.next=4,b.a.awrap(s.a.patch("/users/privacy"));case 4:e(!1),t({type:"CHANGE_PRIVACY"}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}}),null,null,[[0,8]])}}(i))},disabled:l})))}var Ct=Object(i.h)((function(e){var t=e.description,a=e.connectedUser,c=(e.history,Object(m.b)()),o=Object(n.useState)(null),l=Object(K.a)(o,2),s=l[0],i=l[1],u=Object(n.useState)(!1),d=Object(K.a)(u,2),p=d[0],f=d[1],E=Object(n.useState)(!1),b=Object(K.a)(E,2),g=b[0],v=b[1];return r.a.createElement("div",null,r.a.createElement(ee.a,{onClick:function(e){return i(e.currentTarget)},style:{height:50,color:"#e5e5e5"}},r.a.createElement(vt.a,null)),r.a.createElement(Et.a,{disableScrollLock:!0,MenuListProps:{disablePadding:!1},getContentAnchorEl:null,anchorOrigin:{vertical:"center",horizontal:"left"},transformOrigin:{horizontal:"right"},anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:function(){return i(!1)}},r.a.createElement(bt.a,{onClick:function(){f(!0),i(!1)}},"Editar descripci\xf3n"),r.a.createElement(bt.a,{onClick:function(){v(!0),i(!1)}}," Editar im\xe1gen de perfil  "),r.a.createElement(bt.a,null," ",r.a.createElement(xt,{connectedUser:a})," "),r.a.createElement(bt.a,{onClick:function(){return c(S())}}," Cerrar Sesi\xf3n")),r.a.createElement(yt,{open:g,setOpen:v}),r.a.createElement(ht,{open:p,setOpen:f,description:t}))}));function Pt(){return r.a.createElement("div",{style:{width:"100%",height:200,display:"flex"}},r.a.createElement(k.a,{elevation:"10",style:{margin:"auto",fontFamily:"Open Sans",padding:20}},"Esta cuenta es privada. Siguela para ver su contenido."))}function kt(e){var t=Object(m.b)(),a=e.match.params.id,c=Object(n.useState)(!0),o=Object(K.a)(c,2),l=o[0],i=o[1],u=Object(n.useState)(!1),d=Object(K.a)(u,2),p=d[0],f=d[1],E=Object(n.useState)(!1),g=Object(K.a)(E,2),v=g[0],h=g[1],y=Object(m.c)((function(e){return e.user.loggedUser})),O=Object(m.c)((function(e){return e.profile.profile})),S=O.subscriptions,j=O.followers,w=O.description,_=O.profileImg,C=O.username,P=y._id===a;Object(n.useEffect)((function(){var e,n;t((e=a,n=f,function(t){var a;return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n(!0),r.next=4,b.a.awrap(s.a.get("/users/".concat(e)));case 4:a=r.sent,t({type:"SET_SELECTED_PROFILE",payload:a.data}),n(!1),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.log(r.t0);case 12:case"end":return r.stop()}}),null,null,[[0,9]])}))}),[t,a]);var k=j&&j.find((function(e){return e.user_id._id===y._id}))||!O.private||y._id===a;return r.a.createElement("section",{className:"profile-container"},P&&r.a.createElement(Ne,null),r.a.createElement("div",{className:"profile-data"},r.a.createElement("div",{className:"data-container"},p?r.a.createElement("div",null,r.a.createElement("img",{src:Se.a,alt:"loading profile"})):r.a.createElement(ut,{src:_,isLoggedUser:P}),r.a.createElement("div",{className:"profile-info"},r.a.createElement("span",{style:{display:"flex",alignItems:"flex-end"}}," ",r.a.createElement("h1",null,p?r.a.createElement(ye.a,{width:350,animation:"wave"}):r.a.createElement("div",null," ",C," "))," ",y._id!==a&&!p&&r.a.createElement(mt,{userProfile:O,connectedUser:y})," "),r.a.createElement("div",null,p?r.a.createElement("div",{style:{marginLeft:50}},r.a.createElement(ye.a,{width:350,animation:"wave"}),r.a.createElement(ye.a,{width:350,animation:"wave"})):r.a.createElement("p",null," ",w&&w," ")," "),r.a.createElement("div",null,r.a.createElement(ft,{showingFollowers:l,open:v,setOpen:h,userList:l?j:S}))),P&&r.a.createElement(Ct,{connectedUser:y,description:w}))),!p&&r.a.createElement("div",{className:"profile-button-container"},r.a.createElement(x.a,{variant:"contained",color:"primary",style:{background:"#e5e5e5",color:"black"},onClick:k&&function(){h(!0),i(!0)}},"  ",j&&j.length," Seguidores"),r.a.createElement(x.a,{variant:"contained",color:"primary",style:{background:"#e5e5e5",color:"black"},onClick:k&&function(){h(!0),i(!1)}}," ",S&&S.length," Seguidos")),r.a.createElement("div",{className:"profilePosts-container"},k||p?r.a.createElement(it,{user_id:a}):r.a.createElement(Pt,null)))}function Tt(){return r.a.createElement("div",{className:"notFound-container"},r.a.createElement("div",{className:"notFound-text-container"},r.a.createElement("h1",null," E404"),r.a.createElement("h2",null,"Lo sentimos. La p\xe1gina que buscas no existe."),r.a.createElement("h2",null," Volver al ",r.a.createElement(_.b,{to:"/Home",style:{textDecoration:"none"}}," ",r.a.createElement("span",null," Inicio ")," "))))}var Nt=Object(i.h)((function(e){var t=e.match,a=e.history,c=Object(m.b)();return Object(n.useEffect)((function(){t.params.token&&(y(t.params.token),c(O(a)))}),[c,a,t.params.token]),r.a.createElement("div",null,r.a.createElement("h1",{style:{fontFamily:"Open Sans"}}," Redirigiendo, espera un segundo por favor. "))})),Lt=Object(H.a)((function(e){return{textField:{marginBottom:55,height:40,fontSize:2}}}));function Rt(e){var t=Object(m.b)(),a=Lt(),c=Object(n.useState)({user:{},success:null,updated:null}),o=Object(K.a)(c,2),l=o[0],i=o[1];return Object(n.useEffect)((function(){t(function(e,t,a){return function(){var n;return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,b.a.awrap(s.a.get("/user/reset/".concat(e)));case 3:n=r.sent,t({user:n.data.email,success:!0}),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),401===r.t0.response.status&&(t({user:null,success:!1}),setTimeout((function(){return a.push("/")}),1500));case 10:case"end":return r.stop()}}),null,null,[[0,7]])}}(e.match.params.token,i,e.history))}),[e.match.params.token,i,e.history,t]),!1===l.success?r.a.createElement("h1",null,"El token ha expirado, volviendo al inicio."):r.a.createElement(w.b,{enableReinitialize:!0,initialValues:{registerPassword:"",confirmPassword:""},validationSchema:F,onSubmit:function(a,n){var r=n.setSubmitting;console.log("submitting"),t(function(e,t,a,n,r){return function(){return b.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,b.a.awrap(s.a.patch("/user/reset/password",{password:e,email:t.user}));case 3:a(Object(f.a)({},t,{updated:!0})),setTimeout((function(){n(!1),r.push("/")}),1500),c.next=11;break;case 7:c.prev=7,c.t0=c.catch(0),console.log(c.t0),n(!1);case 11:case"end":return c.stop()}}),null,null,[[0,7]])}}(a.registerPassword,l,i,r,e.history))}},(function(e){var t=e.handleSubmit,n=e.isSubmitting,c=e.errors,o=e.values,s=e.touched,i=e.handleChange,u=e.handleBlur;return r.a.createElement("div",{className:"form-container"},r.a.createElement(k.a,{style:{margin:"auto",padding:40},elevation:8},r.a.createElement(w.a,{style:{display:"flex",flexDirection:"column"}},r.a.createElement(C.a,{style:{margin:"5px 0px 25px 0px"},variant:"h4"}," Reestablecer Contrase\xf1a "),r.a.createElement(P.a,{variant:"outlined",className:a.textField,error:c.registerPassword||c.confirmPassword,id:"registerPassword",name:"registerPassword",type:"password",value:o.registerPassword,onChange:i,onBlur:u,required:!0,helperText:(c.registerPassword||s.registerPassword)&&c.registerPassword,label:"Contrase\xf1a"}),r.a.createElement(P.a,{className:a.textField,variant:"outlined",error:c.confirmPassword,id:"confirmPassword",name:"confirmPassword",type:"password",value:o.confirmPassword,onChange:i,nBlur:u,required:!0,helperText:(c.confirmPassword||s.confirmPassword)&&c.confirmPassword,label:"Confirmar Contrase\xf1a"}),l.updated&&r.a.createElement("h1",null," contrase\xf1a reestablecida exitosamente, volvioendo al inicio ..."),r.a.createElement(x.a,{disabled:n,type:"submit",onClick:t,variant:"contained",color:"primary",style:{marginTop:5}},"Reestablecer Contrase\xf1a"))),n&&r.a.createElement(z,null))}))}function It(){for(var e=Object(m.b)(),t=Object(m.c)((function(e){return e.data.numberOfPosts})),a=Object(n.useState)(1),c=Object(K.a)(a,2),o=c[0],l=c[1],i=Object(n.useState)("page-1"),u=Object(K.a)(i,2),d=u[0],p=u[1],f=[],E=1;E<=o;E++)f.push(E);Object(n.useEffect)((function(){l(Math.ceil(t/8))}),[t,8]);var g=function(t){e(function(e,t){return function(a){var n;return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,b.a.awrap(s.a.get("/posts/?page=".concat(e,"&?postsNumber=").concat(t)));case 3:n=r.sent,a({type:"GET_ALL_POSTS",payload:n.data}),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.log(r.t0);case 10:case"end":return r.stop()}}),null,null,[[0,7]])}}(t)),p("page-".concat(t)),document.getElementById("page-".concat(t)).classList.add("selected-page")};return r.a.createElement(k.a,{className:"pagination-container"},f.map((function(e,t){return r.a.createElement("span",{className:d==="page-".concat(e)?"selected-page":null,id:"page-".concat(e),onClick:function(){return g(e)},key:t}," ",e," ")})))}function Ut(){var e=Object(n.useState)(!1),t=Object(K.a)(e,2),a=t[0],c=t[1],o=Object(m.b)(),l=Object(m.c)((function(e){return e.data.allPosts}));return Object(n.useEffect)((function(){return o(function(e){return function(t){var a;return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e(!0),n.next=4,b.a.awrap(s.a.get("/posts"));case 4:a=n.sent,e(!1),t({type:"GET_ALL_POSTS",payload:a.data}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}}),null,null,[[0,9]])}}(c)),o({type:"ON_EXPLORE"}),function(){o({type:"CLEAR_POSTS"}),o({type:"FOCUS_OFF"})}}),[o]),a?r.a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"flex-end",height:200}},r.a.createElement(M.a,{size:60,color:"primary"})):r.a.createElement("div",{style:{marginTop:160}},r.a.createElement(It,null),r.a.createElement("div",{className:"explorePosts-container"},l.map((function(e,t){return r.a.createElement(ge,{key:t,post:e})}))))}var At=a(367),Dt=a(368),Ft=a(214),Wt=a.n(Ft),qt=a(17),Mt=a(18),zt=a(371),Ht=a(207),Bt=a.n(Ht),Gt=a(359),Kt=a(205),Vt=a.n(Kt),Qt=a(206),Yt=a.n(Qt),Xt=a(160),Jt=Object(H.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},nested:{paddingLeft:e.spacing(4)}}}));function $t(e){var t=e.open,a=e.searchResults,n=Object(m.c)((function(e){return e.user.loggedUser})),c=Jt();return r.a.createElement(r.a.Fragment,null,t?r.a.createElement(Vt.a,null):r.a.createElement(Yt.a,null),r.a.createElement(Gt.a,{in:t,timeout:"auto",unmountOnExit:!0,style:{position:"absolute",transform:"translateY(20px)"}},r.a.createElement(Xt.a,null,r.a.createElement(ze.a,{style:{maxHeight:500,width:260},component:"nav","aria-labelledby":"nested-list-subheader",subheader:r.a.createElement(dt.a,{component:"div",id:"nested-list-subheader"},"Usuarios..."),className:c.root},a.filter((function(e){return e._id!==n._id})).map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(_.b,{style:{textDecoration:"none"},to:"/users/".concat(e._id)},r.a.createElement(Qe.a,{button:!0,className:c.nested},r.a.createElement(Ke.a,null,r.a.createElement(de.a,{src:e.profileImg})),r.a.createElement(Be.a,{secondary:e.username}))))}))))))}var Zt=Object(H.a)((function(e){return{search:Object(qt.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Mt.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Mt.b)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(qt.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:70},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}})}}));function ea(){var e=Zt(),t=Object(n.useState)(!1),a=Object(K.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),i=Object(K.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)([]),p=Object(K.a)(d,2),f=p[0],E=p[1],g=Object(n.useState)([]),v=Object(K.a)(g,2),h=v[0],y=v[1],O=Object(n.useState)(0),S=Object(K.a)(O,2),j=S[0],w=S[1];Object(n.useEffect)((function(){var e=f.filter((function(e){return e.username.toLocaleLowerCase().includes(u.toLocaleLowerCase())}));y(e)}),[f,u]);return function(e,t){var a=Object(n.useRef)(!1);Object(n.useEffect)((function(){a.current?e():a.current=!0}),t)}((function(){c&&(j&&clearTimeout(j),w(setTimeout((function(){return function(){var e;return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.awrap(s.a.get("/users/?search=".concat(u)));case 2:e=t.sent,E(e.data);case 4:case"end":return t.stop()}}))}()}),1e3)))}),[c,u]),r.a.createElement("div",null,r.a.createElement("div",{className:e.search},r.a.createElement("div",{className:e.searchIcon},r.a.createElement(Bt.a,null)),r.a.createElement(zt.a,{defaultValue:"",onChange:function(e){return m(e.target.value)},value:u,onFocus:function(){return o(!0)},onBlur:function(){o(!1),m("")},placeholder:"Buscar...",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"}}),r.a.createElement($t,{open:c,setOpen:o,searchResults:h})))}var ta=a(141),aa=a.n(ta),na=a(140),ra=a.n(na),ca=a(211),oa=a.n(ca),la=a(365),sa=a(208),ia=a.n(sa);function ua(e){var t=e.notification,a=t.readed,n=t.sender,c=t.type,o=t.createdAt,l=t.senderName,s=t.postRef,i=t.senderAvatar,u="like"===c?r.a.createElement(ce.a,{style:{color:"#DA201E"}}):r.a.createElement(ia.a,{style:{color:"#1565C0"}}),m="like"===c?"le dio me gusta a tu publicaci\xf3n":"comment"===c?"ha comentado tu publicaci\xf3n":"reply"===c?"respondi\xf3 un comentario tuyo":"follow"===c&&"ha comenzado a seguirte",d="follow"===c?"/users/".concat(n):"/posts/".concat(s);return r.a.createElement("div",null,r.a.createElement(Qe.a,{button:!0,style:{minWidth:430,backgroundColor:!a&&"#A8A8A8"}},r.a.createElement(_.b,{to:"/users/".concat(n)},r.a.createElement(Ke.a,null,r.a.createElement(de.a,{alt:"Remy Sharp",src:i}))),r.a.createElement(_.b,{to:d,style:{textDecoration:"none"}},r.a.createElement(Be.a,{primary:l+" "+m,secondary:ne()(o).startOf("hour").fromNow()}),r.a.createElement(Ve.a,null,u))),r.a.createElement(Ge.a,{variant:"inset",component:"li"}))}function ma(e){var t=e.request,a=Object(m.b)(),c=Object(n.useState)(!1),o=Object(K.a)(c,2),l=o[0],i=o[1],u=t.follower_id,d=u._id,p=u.username,f=u.profileImg,E=u.createdAt;return r.a.createElement("div",null,r.a.createElement(Qe.a,{style:{minWidth:430}},r.a.createElement(_.b,{to:"/users/".concat(d)},r.a.createElement(Ke.a,null,r.a.createElement(de.a,{alt:"Remy Sharp",src:f}))),r.a.createElement(Be.a,{primary:p,secondary:ne()(E).startOf("hour").fromNow()}),r.a.createElement(Ve.a,null,r.a.createElement(x.a,{disabled:l,variant:"contained",onClick:function(){return a(function(e,t){return function(a){return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t(!0),n.next=4,b.a.awrap(s.a.patch("/users/requests/accept",{follower_id:e}));case 4:a({type:"DELETE_REQUEST",payload:e}),t(!1),n.next=13;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0),a({type:"DELETE_REQUEST",payload:e}),t(!1);case 13:case"end":return n.stop()}}),null,null,[[0,8]])}}(d,i))},size:"small",color:"primary",endIcon:l&&r.a.createElement(M.a,{size:"small"})}," Aceptar "),r.a.createElement(x.a,{disabled:l,variant:"contained",onClick:function(){return a(function(e,t){return function(a){return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t(!0),n.next=4,b.a.awrap(s.a.delete("/users/requests/ignore/".concat(e)));case 4:a({type:"DELETE_REQUEST",payload:e}),t(!1),n.next=13;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0),a({type:"DELETE_REQUEST",payload:e}),t(!1);case 13:case"end":return n.stop()}}),null,null,[[0,8]])}}(d,i))},size:"small",color:"default"}," Ignorar "))),r.a.createElement(Ge.a,{variant:"inset",component:"li"}))}var da=a(209),pa=a.n(da),fa=a(210),Ea=a.n(fa);function ba(e){var t=e.setShowRequests,a=e.requests,n=void 0===a?[]:a;return r.a.createElement(Qe.a,{onClick:function(){return t(!0)},style:{minWidth:430,cursor:"pointer"}},r.a.createElement(Ke.a,{style:{display:"flex",alignItems:"center",marginLeft:10}},r.a.createElement(la.a,{badgeContent:n.length,color:"secondary",max:999,anchorOrigin:{vertical:"top",horizontal:"left"}},r.a.createElement(pa.a,null))),r.a.createElement(Be.a,{primary:"Solicitudes de seguidores",secondary:"Aprueba o ignora las Solicitudes"}),r.a.createElement(Ve.a,{onClick:function(){return t(!0)},style:{cursor:"pointer"}},r.a.createElement(Ea.a,null)))}var ga=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.notifications.notifications})),a=Object(m.c)((function(e){return e.user.loggedUser.followUpRequests})),c=Object(n.useState)(null),o=Object(K.a)(c,2),l=o[0],i=o[1],u=Object(n.useState)(!1),d=Object(K.a)(u,2),p=d[0],f=d[1];Object(n.useEffect)((function(){e((function(e){var t;return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,b.a.awrap(s.a.get("/notifications"));case 3:t=a.sent,e({type:"SET_NOTIFICATIONS",payload:t.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}}),null,null,[[0,7]])}))}),[e]);var E=function(){f(!1),i(null)};return r.a.createElement("div",null,r.a.createElement(Q.a,{placement:"top",title:"Notificaciones"},r.a.createElement(ee.a,{"aria-owns":l?"simple-menu":void 0,"aria-haspopup":"true",onClick:function(e){return i(e.target)}},r.a.createElement(la.a,{badgeContent:t.filter((function(e){return!1===e.readed})).length,color:"secondary",max:999,anchorOrigin:{vertical:"top",horizontal:"left"}},r.a.createElement(oa.a,{style:{color:"#888888"}})))),r.a.createElement(Et.a,{style:{padding:0,maxHeight:300},anchorEl:l,open:Boolean(l),onClose:E,onEntered:function(){var a=t.filter((function(e){return!e.readed})).map((function(e){return e._id}));a.length>0&&e(function(e){return function(t){return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,b.a.awrap(s.a.patch("/notifications/read",e));case 3:t({type:"MARK_NOTIFICATIONS_AS_READED"}),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),console.log(a.t0);case 9:case"end":return a.stop()}}),null,null,[[0,6]])}}(a))},disableScrollLock:!0,MenuListProps:{disablePadding:!1},getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{horizontal:"right",vertical:"top"},keepMounted:!0},p&&a.map((function(e){return r.a.createElement(ma,{key:e._id,request:e})})),a&&a.length>0&&!p&&r.a.createElement(ba,{setShowRequests:f,requests:a}),t.length>0?r.a.createElement("div",null," ",t.filter((function(e){return"followRequest"!==e.type})).map((function(e){return r.a.createElement(ua,{key:e._id,notification:e})}))," "):r.a.createElement(bt.a,{onClick:E},"No tienes notificaciones")))};function va(){var e=Object(m.c)((function(e){return e.user.loggedUser})),t=Object(m.c)((function(e){return e.user.loading})),a=Object(m.c)((function(e){return e.UI.onHome}));return r.a.createElement("div",{className:"navbar-buttons"},r.a.createElement(ga,null),r.a.createElement(_.b,{to:"/home"},r.a.createElement(ra.a,{style:{color:a?"white":"#888888"}})),r.a.createElement(_.b,{to:"/explore"},r.a.createElement(aa.a,{style:{color:!1===a?"white":"#888888",margin:"0px 8px"}})),t?r.a.createElement(je,{alt:"no-profile",src:Se.a,width:40,height:40}):r.a.createElement(_.b,{to:"/users/".concat(e._id)},r.a.createElement(je,{alt:"profile",src:e.profileImg,width:40,height:40,pointer:!0})))}var ha=a(212),ya=a.n(ha);function Oa(){var e=Object(m.b)();return r.a.createElement("div",{className:"open-menu-button"},r.a.createElement(ga,null),r.a.createElement(ee.a,{onClick:function(){return e({type:"OPEN_MENU"})},color:"inherit","aria-label":"open drawer",edge:"start"},r.a.createElement(ya.a,null)))}var Sa=a(374),ja=a(366),wa=a(213),_a=a.n(wa),xa=Object(H.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},nested:{paddingLeft:e.spacing(4)}}}));function Ca(){var e=Object(n.useState)(!1),t=Object(K.a)(e,2),a=t[0],c=t[1],o=Object(m.b)(),l=Object(m.c)((function(e){return e.UI.openMenu})),s=Object(m.c)((function(e){return e.user.loggedUser})),i=xa();return r.a.createElement(Sa.a,{style:{width:"70%"},color:"secondary",open:l,onClose:function(){return o({type:"CLOSE_MENU"})}},r.a.createElement(_.b,{style:{margin:0,padding:0,width:"100%",height:"50%"},onClick:function(){return o({type:"CLOSE_MENU"})},to:"/users/".concat(s._id)},r.a.createElement("img",{style:{objectFit:"cover"},src:s.profileImg})),r.a.createElement(ze.a,{component:"nav","aria-labelledby":"nested-list-subheader",className:i.root},r.a.createElement(_.b,{style:{textDecoration:"none"},onClick:function(){return o({type:"CLOSE_MENU"})},to:"/Home"},r.a.createElement(Qe.a,{button:!0,className:i.nested},r.a.createElement(ja.a,null," ",r.a.createElement(ra.a,null)," "),r.a.createElement(Be.a,{primary:"Home"}))),r.a.createElement(Ge.a,null),r.a.createElement(_.b,{style:{textDecoration:"none"},onClick:function(){return o({type:"CLOSE_MENU"})},to:"/Explore"},r.a.createElement(Qe.a,{button:!0,className:i.nested},r.a.createElement(ja.a,null," ",r.a.createElement(aa.a,null)," "),r.a.createElement(Be.a,{primary:"Explorar"}))),r.a.createElement(Ge.a,null),r.a.createElement(Qe.a,{button:!0,onClick:function(){return c(!0)},className:i.nested},r.a.createElement(ja.a,null," ",r.a.createElement(_a.a,null)," "),r.a.createElement(Be.a,{primary:"Cerrar Sesi\xf3n"}))),r.a.createElement(Y.a,{open:a,onClose:function(){return c(!1)},fullWidth:!0,maxWidth:"sm"},r.a.createElement(J.a,null," Estas Seguro de que quieres desconectarte ? "),r.a.createElement(X.a,null,r.a.createElement(x.a,{onClick:function(){o({type:"CLOSE_MENU"}),o(S())},variant:"contained",color:"primary"},"Si"),r.a.createElement(x.a,{onClick:function(){return c(!1)},variant:"contained",color:"secondary"},"Cancelar"))))}function Pa(){return r.a.createElement("nav",null,r.a.createElement(At.a,null,r.a.createElement(Dt.a,{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(_.b,{to:"/home"},r.a.createElement(Wt.a,{fontSize:"large",style:{color:"white"}})),r.a.createElement(ea,null),r.a.createElement(va,null),r.a.createElement(Oa,null),r.a.createElement(Ca,null))))}var ka=a(215),Ta=a.n(ka);s.a.defaults.baseURL="https://clonetagram.herokuapp.com/api";var Na=Object(i.h)((function(e){var t=e.history,a=Object(m.c)((function(e){return e.user.authenticated})),c=Object(m.c)((function(e){return e.user.userSocket})),o=Object(m.b)(),l=localStorage.getItem("x-auth-token");if(l){var u=function(e){var t={},a=!1;try{t=Ta()(e)}catch(n){n&&(a=!0,localStorage.removeItem("x-auth-token"))}return{decoded:t,invalidToken:a}}(l),f=u.decoded,E=u.invalidToken;s.a.defaults.headers.common.Authorization=l,E||(a?1e3*f.exp<Date.now()&&o(S()):(o({type:"AUTHENTICATED"}),o(O(t))))}return Object(n.useEffect)((function(){c&&c.on("NEW_NOTIFICATION",(function(e){return"followRequest"===e.type?o({type:"ADD_REQUEST",payload:e}):o({type:"SET_NEW_NOTIFICATION",payload:e})}))}),[c,o]),r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(Pa,{history:t}),r.a.createElement(i.d,null,r.a.createElement(p,{exact:!0,path:"/Register",component:G}),r.a.createElement(d,{exact:!0,path:"/Home",component:Le}),r.a.createElement(p,{exact:!0,path:"/",component:We}),r.a.createElement(d,{exact:!0,path:"/users/:id",component:kt}),r.a.createElement(d,{exact:!0,path:"/posts/:id",component:st}),r.a.createElement(p,{exact:!0,path:"/redirecting/:token",component:Nt}),r.a.createElement(p,{exact:!0,path:"/resetPassword/:token",component:Rt}),r.a.createElement(d,{exact:!0,path:"/explore",component:Ut}),r.a.createElement(i.b,{exact:!0,path:"*",component:Tt})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var La=a(216),Ra=a(75),Ia=a(217),Ua=a(15),Aa={loggedUser:{},authenticated:!1,userHasPassword:null,loading:!1,errors:"",userSocket:""},Da={numberOfPosts:"",allPosts:[],selectedPosts:[],selectedPost:{}},Fa={loading:!1,onSinglePost:!1,onHome:null,changingProfileImage:!1,openMenu:!1},Wa={comments:[]},qa={profile:{}},Ma={notifications:[]},za=Object(Ra.combineReducers)({notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ma,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATIONS":return{notifications:t.payload};case"SET_NEW_NOTIFICATION":return console.log(t.payload),{notifications:[t.payload].concat(Object(Ua.a)(e.notifications))};case"MARK_NOTIFICATIONS_AS_READED":return console.log("EXEC"),{notifications:e.notifications.map((function(e){return Object(f.a)({},e,{readed:!0})}))};default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_POST_COMMENTS":return{comments:Object(Ua.a)(t.payload)};case"SET_REPLIES":return console.log(t.payload),{comments:e.comments.map((function(e){return e._id===t.payload._id?t.payload:e}))};case"SET_NEW_COMMENT":return{comments:[].concat(Object(Ua.a)(e.comments),[t.payload])};case"DELETE_COMMENT":return{comments:e.comments.filter((function(e){return e._id!==t.payload}))};case"DELETE_REPLY":return{comments:e.comments.map((function(e){return e._id===t.payload.comment_id?Object(f.a)({},e,{replies:e.replies.filter((function(e){return e._id!==t.payload.reply_id}))}):e}))};default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SELECTED_PROFILE":return{profile:Object(f.a)({},t.payload)};case"SET_UPDATED_USERS":return{profile:Object(f.a)({},e.profile,{},t.payload.followed)};case"SET_NEW_IMAGE":return{profile:Object(f.a)({},e.profile,{profileImg:t.payload.profileImage})};case"ADD_TO_REQUESTS":var a=t.payload.connectedUser._id;return{profile:Object(f.a)({},e.profile,{followUpRequests:[{follower_id:{_id:a}}].concat(Object(Ua.a)(e.profile.followUpRequests))})};case"FOLLOW_USER":var n=t.payload.connectedUser,r=n._id,c=n.username,o=n.profileImg;return{profile:Object(f.a)({},e.profile,{followers:[{user_id:{_id:r,username:c,profileImg:o}}].concat(Object(Ua.a)(e.profile.followers))})};case"UNFOLLOW_USER":return{profile:Object(f.a)({},e.profile,{followers:e.profile.followers.filter((function(e){return e.user_id._id!==t.payload._id}))})};default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Aa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTHENTICATED":return Object(f.a)({},e,{authenticated:!0});case"UNAUTHENTICATED":return Object(f.a)({},e,{authenticated:!1});case"LOADING":return Object(f.a)({},e,{loading:!0});case"LOADED":return Object(f.a)({},e,{loading:!1});case"USER_LOGGED":return Object(f.a)({},e,{loggedUser:Object(f.a)({},t.payload)});case"SET_ERRORS":return Object(f.a)({},e,{errors:t.payload});case"CLEAR_ERRORS":return Object(f.a)({},e,{errors:""});case"SET_PASSWORD_AS_TRUE":return Object(f.a)({},e,{userHasPassword:!0});case"SET_PASSWORD_AS_FALSE":return Object(f.a)({},e,{userHasPassword:!1});case"CHANGE_PRIVACY":return Object(f.a)({},e,{loggedUser:Object(f.a)({},e.loggedUser,{private:!e.loggedUser.private})});case"SET_USER_SOCKET":return Object(f.a)({},e,{userSocket:t.payload});case"SET_UPDATED_USERS":return Object(f.a)({},e,{loggedUser:Object(f.a)({},e.loggedUser,{},t.payload.follower)});case"SET_NEW_IMAGE":return Object(f.a)({},e,{loggedUser:Object(f.a)({},e.loggedUser,{profileImg:t.payload.profileImage})});case"DELETE_REQUEST":return Object(f.a)({},e,{loggedUser:Object(f.a)({},e.loggedUser,{followUpRequests:e.loggedUser.followUpRequests.filter((function(e){return e.follower_id._id!==t.payload}))})});case"FOLLOW_USER":var a=t.payload.userProfile._id;return Object(f.a)({},e,{loggedUser:Object(f.a)({},e.loggedUser,{subscriptions:[{user_id:{_id:a}}].concat(Object(Ua.a)(e.loggedUser.subscriptions))})});case"UNFOLLOW_USER":return Object(f.a)({},e,{loggedUser:Object(f.a)({},e.loggedUser,{subscriptions:e.loggedUser.subscriptions.filter((function(e){return e.user_id._id!==t.payload.user_id}))})});case"ADD_REQUEST":console.log(t.payload);var n=t.payload,r=n.sender,c=n.senderName,o=n.senderAvatar,l=n.createdAt,s={_id:r,username:c,profileImg:o,createdAt:l};return Object(f.a)({},e,{loggedUser:Object(f.a)({},e.loggedUser,{followUpRequests:[{follower_id:s}].concat(Object(Ua.a)(e.loggedUser.followUpRequests))})});default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Da,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_POSTS":return Object(f.a)({},e,{allPosts:Object(Ua.a)(t.payload.posts),selectedPost:{},numberOfPosts:t.payload.numberOfPosts});case"SET_SELECTED_POSTS":return Object(f.a)({},e,{selectedPosts:Object(Ua.a)(t.payload)});case"SET_NEW_POST":return Object(f.a)({},e,{allPosts:[Object(f.a)({},t.payload)].concat(Object(Ua.a)(e.allPosts)),selectedPosts:[Object(f.a)({},t.payload)].concat(Object(Ua.a)(e.selectedPosts))});case"DELETE_POST":return Object(f.a)({},e,{allPosts:e.allPosts.filter((function(e){return e._id!==t.payload})),selectedPosts:e.selectedPosts.filter((function(e){return e._id!==t.payload})),selectedPost:""});case"SET_SUBSCRIPTIONS_POSTS":return console.log("overwrite"),Object(f.a)({},e,{allPosts:Object(Ua.a)(t.payload)});case"SET_NEW_SUBSCRIPTIONS_POSTS":return console.log("pushing new ones"),Object(f.a)({},e,{allPosts:[].concat(Object(Ua.a)(e.allPosts),Object(Ua.a)(t.payload))});case"CLEAR_POSTS":return Object(f.a)({},e,{allPosts:[]});case"SET_POST":return Object(f.a)({},e,{selectedPost:Object(f.a)({},t.payload)});case"SET_LIKES":case"SET_DISLIKE":return Object(f.a)({},e,{allPosts:e.allPosts.map((function(e){return e._id===t.payload._id?Object(f.a)({},e,{likes:Object(Ua.a)(t.payload.likes)}):e})),selectedPosts:e.selectedPosts.map((function(e){return e._id===t.payload._id?Object(f.a)({},e,{likes:Object(Ua.a)(t.payload.likes)}):e})),selectedPost:Object(f.a)({},e.selectedPost,{likes:Object(Ua.a)(t.payload.likes)})});case"SET_NEW_IMAGE":return Object(f.a)({},e,{selectedPosts:e.selectedPosts.map((function(e){return e.userRef._id===t.payload.id?Object(f.a)({},e,{userRef:Object(f.a)({},e.userRef,{profileImg:t.payload.profileImage})}):e}))});default:return e}},UI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ON_SINGLE_POST":return Object(f.a)({},e,{onSinglePost:!0});case"CLOSE_SINGLE_POST":return Object(f.a)({},e,{onSinglePost:!1});case"ON_HOME":return Object(f.a)({},e,{onHome:!0});case"ON_EXPLORE":return Object(f.a)({},e,{onHome:!1});case"FOCUS_OFF":return Object(f.a)({},e,{onHome:null});case"CHANGING_PROFILE_IMAGE":return Object(f.a)({},e,{changingProfileImage:!0});case"PROFILE_IMAGE_CHANGED":return Object(f.a)({},e,{changingProfileImage:!1});case"OPEN_MENU":return console.log("WORKINGs"),Object(f.a)({},e,{openMenu:!0});case"CLOSE_MENU":return Object(f.a)({},e,{openMenu:!1});default:return e}}}),Ha=Object(Ra.createStore)(za,Object(Ia.composeWithDevTools)(Object(Ra.applyMiddleware)(La.a))),Ba=(a(296),a(369)),Ga=a(218),Ka=Object(Ga.a)({palette:{primary:{light:"#484848",main:"#212121",dark:"#000000",contrastText:"#ffffff"},secondary:{light:"#e5e5e5",main:"#1565c0",dark:"#003c8f",contrastText:"#ffffff"}}});o.a.render(r.a.createElement(_.a,null,r.a.createElement(Ba.a,{theme:Ka},r.a.createElement(m.a,{store:Ha},r.a.createElement(Na,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[235,1,2]]]);
//# sourceMappingURL=main.e2087026.chunk.js.map